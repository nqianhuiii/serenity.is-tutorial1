{
  "version": 3,
  "sources": ["../../src/q/arrays.ts", "../../src/q/system.ts", "../../src/q/strings.ts", "../../src/q/localtext.ts", "../../src/q/notify.ts", "../../src/q/config.ts", "../../src/q/html.ts", "../../src/q/dialogs.ts", "../../src/q/errorhandling.ts", "../../src/q/blockui.ts", "../../src/q/services.ts", "../../src/q/formatting.ts", "../../src/q/scriptdata.ts", "../../src/q/authorization.ts", "../../src/q/debounce.ts", "../../src/q/layouttimer.ts", "../../src/q/router.ts", "../../src/q/layout.ts", "../../src/q/lookup.ts", "../../src/q/propertyitem.ts", "../../src/q/servicetypes.ts", "../../src/q/validation.ts", "../../src/q/validateoptions.ts", "../../src/q/criteria.ts"],
  "sourcesContent": ["\uFEFFexport type Grouping<TItem> = { [key: string]: TItem[] };\r\n\r\n/**\r\n * Tests if any of array elements matches given predicate\r\n */\r\nexport function any<TItem>(array: TItem[], predicate: (x: TItem) => boolean): boolean {\r\n    for (let x of array)\r\n        if (predicate(x))\r\n            return true;\r\n\r\n    return false;\r\n}\r\n\r\n/**\r\n * Counts number of array elements that matches a given predicate\r\n */\r\nexport function count<TItem>(array: TItem[], predicate: (x: TItem) => boolean): number {\r\n    let count = 0;\r\n    for (let x of array)\r\n        if (predicate(x))\r\n            count++;\r\n\r\n    return count;\r\n}\r\n\r\n/**\r\n * Gets first element in an array that matches given predicate.\r\n * Throws an error if no match is found.\r\n */\r\nexport function first<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\r\n    for (let x of array)\r\n        if (predicate(x))\r\n            return x;\r\n\r\n    throw new Error(\"first:No element satisfies the condition.!\");\r\n}\r\n\r\n/**\r\n * Gets index of first element in an array that matches given predicate\r\n */\r\nexport function indexOf<TItem>(array: TItem[], predicate: (x: TItem) => boolean): number {\r\n    for (var i = 0; i < array.length; i++)\r\n        if (predicate(array[i]))\r\n            return i;\r\n\r\n    return -1;\r\n}\r\n\r\n/**\r\n * Inserts an item to the array at specified index\r\n */\r\nexport function insert(obj: any, index: number, item: any): void {\r\n    if (obj.insert)\r\n        obj.insert(index, item);\r\n    else if (Object.prototype.toString.call(obj) === '[object Array]')\r\n        obj.splice(index, 0, item);\r\n    else\r\n        throw new Error(\"Object does not support insert!\");\r\n}\r\n\r\n/**\r\n * Determines if the object is an array\r\n */\r\nexport function isArray(obj: any): boolean {\r\n    return Object.prototype.toString.call(obj) === '[object Array]';\r\n}\r\n\r\n/**\r\n* Gets first element in an array that matches given predicate.\r\n* Throws an error if no matches is found, or there are multiple matches.\r\n*/\r\nexport function single<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\r\n    let match: any;\r\n    let found = false;\r\n    for (let x of array)\r\n        if (predicate(x)) {\r\n            if (found)\r\n                throw new Error(\"single:sequence contains more than one element.\");\r\n\r\n            found = true;\r\n            match = x;\r\n        }\r\n\r\n    if (!found)\r\n        throw new Error(\"single:No element satisfies the condition.\");\r\n\r\n    return match;\r\n}\r\n\r\n/**\r\n * Maps an array into a dictionary with keys determined by specified getKey() callback,\r\n * and values that are arrays containing elements for a particular key.\r\n */\r\nexport function toGrouping<TItem>(items: TItem[], getKey: (x: TItem) => any): Grouping<TItem> {\r\n    let lookup: Grouping<TItem> = {};\r\n    for (let x of items) {\r\n        let key = getKey(x) || \"\";\r\n        let d = lookup[key];\r\n        if (!d) {\r\n            d = lookup[key] = [];\r\n        }\r\n\r\n        d.push(x);\r\n    }\r\n    return lookup;\r\n}\r\n\r\n\r\nexport type Group<TItem> = {\r\n    order: number;\r\n    key: string;\r\n    items: TItem[];\r\n    start: number;\r\n}\r\n\r\nexport type Groups<TItem> = {\r\n    byKey: { [key: string]: Group<TItem> };\r\n    inOrder: Group<TItem>[];\r\n};\r\n\r\n/**\r\n * Groups an array with keys determined by specified getKey() callback.\r\n * Resulting object contains group objects in order and a dictionary to access by key.\r\n */\r\nexport function groupBy<TItem>(items: TItem[], getKey: (x: TItem) => any): Groups<TItem> {\r\n    let result: Groups<TItem> = {\r\n        byKey: Object.create(null),\r\n        inOrder: []\r\n    };\r\n\r\n    for (var index = 0; index < items.length; index++) {\r\n        var item = items[index];\r\n        let key = getKey(item) ?? \"\";\r\n        var group = result.byKey[key];\r\n        if (group === undefined) {\r\n            group = {\r\n                order: result.inOrder.length,\r\n                key: key,\r\n                items: [item],\r\n                start: index\r\n            }\r\n            result.byKey[key] = group;\r\n            result.inOrder.push(group);\r\n        }\r\n        else {\r\n            group.items.push(item);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Gets first element in an array that matches given predicate.\r\n * Returns null if no match is found.\r\n */\r\nexport function tryFirst<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\r\n    for (let x of array)\r\n        if (predicate(x))\r\n            return x;\r\n}", "\uFEFFexport type Dictionary<TItem> = { [key: string]: TItem };\r\n\r\nexport function coalesce(a: any, b: any): any {\r\n    return a != null ? a : b;\r\n}\r\n\r\nexport function isValue(a: any): boolean {\r\n    return a != null;\r\n}\r\n\r\nexport let today = (): Date => {\r\n    var d = new Date();\r\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n}\r\n\r\nexport function extend<T = any>(a: T, b: T): T {\r\n    for (var key in b)\r\n        if (Object.prototype.hasOwnProperty.call(b, key))\r\n            a[key] = b[key];\r\n    return a;\r\n}\r\n\r\nexport function deepClone<T = any>(a: T, a2?: any, a3?: any): T {\r\n    // for backward compatibility\r\n    if (a2 != null || a3 != null) {\r\n        return extend(extend(deepClone(a || {}), deepClone(a2 || {})), deepClone(a3 || {}));\r\n    }\r\n\r\n    // https://github.com/angus-c/just/blob/master/packages/collection-clone/index.js\r\n    var result = a;\r\n    var type = {}.toString.call(a).slice(8, -1);\r\n    if (type == 'Set') {\r\n        return new Set([...(a as any)].map(value => deepClone(value))) as any;\r\n    }\r\n    if (type == 'Map') {\r\n        return new Map([...(a as any)].map(kv => [deepClone(kv[0]), deepClone(kv[1])])) as any;\r\n    }\r\n    if (type == 'Date') {\r\n        return new Date((a as any).getTime()) as any;\r\n    }\r\n    if (type == 'RegExp') {\r\n        return RegExp((a as any).source, getRegExpFlags(a as any)) as any;\r\n    }\r\n    if (type == 'Array' || type == 'Object') {\r\n        result = (Array.isArray(a) ? [] : {}) as any;\r\n        for (var key in a) {\r\n            // include prototype properties\r\n            result[key] = deepClone(a[key]);\r\n        }\r\n    }\r\n    // primitives and non-supported objects (e.g. functions) land here\r\n    return result;\r\n}\r\n\r\nfunction getRegExpFlags(regExp: RegExp) {\r\n    if (typeof (regExp.source as any).flags == 'string') {\r\n        return (regExp.source as any).flags;\r\n    } else {\r\n        var flags = [];\r\n        regExp.global && flags.push('g');\r\n        regExp.ignoreCase && flags.push('i');\r\n        regExp.multiline && flags.push('m');\r\n        regExp.sticky && flags.push('y');\r\n        regExp.unicode && flags.push('u');\r\n        return flags.join('');\r\n    }\r\n}\r\n\r\ninterface TypeExt {\r\n    __interface?: boolean;\r\n    __interfaces?: any[];\r\n    __isAssignableFrom?: (from: any) => boolean;\r\n    __isInstanceOfType?: (instance: any) => boolean;\r\n    __metadata?: TypeMetadata;\r\n    __typeName?: string;\r\n}\r\n\r\ninterface TypeMetadata {\r\n    enumFlags?: boolean;\r\n    attr?: any[];\r\n    members?: TypeMember[];\r\n}\r\n\r\nexport type Type = Function | Object;\r\n\r\nexport interface TypeMember {\r\n    name: string;\r\n    type: MemberType;\r\n    attr?: any[];\r\n    getter?: string;\r\n    setter?: string;\r\n}\r\n\r\nfunction getTypeStore() {\r\n    return getStateStore(\"__types\");\r\n}\r\n\r\nexport function getNested(from: any, name: string) {\r\n    var a = name.split('.');\r\n    for (var i = 0; i < a.length; i++) {\r\n        from = from[a[i]];\r\n        if (from == null)\r\n            return null;\r\n    }\r\n    return from;\r\n}\r\n\r\nconst globalObj: any = \r\n    (typeof globalThis !== \"undefined\" && globalThis) || \r\n    (typeof window !== \"undefined\" && window) || \r\n    (typeof self !== \"undefined\" && self) ||\r\n    // @ts-ignore check for global\r\n    (typeof global !== \"undefined\" && global) ||\r\n    (function () { return this; })() || Function('return this')();\r\n\r\nexport function getGlobalThis(): any {\r\n    return globalObj;\r\n}\r\n\r\nexport function getType(name: string, target?: any): Type  {\r\n    var type: any;\r\n    const types = getTypeStore();\r\n    if (target == null) {\r\n        type = types[name];\r\n        if (type != null || globalObj == void 0 || name === \"Object\")\r\n            return type;\r\n\r\n        target = globalObj;\r\n    }\r\n\r\n    type = getNested(target, name)\r\n    if (typeof type !== 'function')\r\n        return null;\r\n\r\n    return type;\r\n}\r\n\r\nexport function getTypeNameProp(type: Type): string {\r\n    return (Object.prototype.hasOwnProperty.call(type, \"__typeName\") && (type as TypeExt).__typeName) || void 0;\r\n}\r\n\r\nexport function setTypeNameProp(type: Type, value: string) {\r\n    Object.defineProperty(type, \"__typeName\", { value, configurable: true });\r\n}\r\n\r\nexport function getTypeFullName(type: Type): string {\r\n    return getTypeNameProp(type) || (type as any).name ||\r\n        (type.toString().match(/^\\s*function\\s*([^\\s(]+)/) || [])[1] || 'Object';\r\n};\r\n\r\nexport function getTypeShortName(type: Type): string {\r\n    var fullName = getTypeFullName(type);\r\n    var bIndex = fullName.indexOf('[');\r\n    var nsIndex = fullName.lastIndexOf('.', bIndex >= 0 ? bIndex : fullName.length);\r\n    return nsIndex > 0 ? fullName.substr(nsIndex + 1) : fullName;\r\n};\r\n\r\nexport function getInstanceType(instance: any): any {\r\n    if (instance == null)\r\n        throw new ArgumentNullException(\"instance\", \"Can't get instance type of null or undefined!\");\r\n\r\n    // Have to catch as constructor cannot be looked up on native COM objects\r\n    try {\r\n        return instance.constructor;\r\n    }\r\n    catch (ex) {\r\n        return Object;\r\n    }\r\n};\r\n\r\nexport function isAssignableFrom(target: any, type: Type) {\r\n    if (target === type || (type as any).prototype instanceof target)\r\n        return true;\r\n\r\n    if (typeof (target as TypeExt).__isAssignableFrom === 'function')\r\n        return (target as TypeExt).__isAssignableFrom(type);\r\n\r\n    return false;\r\n};\r\n\r\nexport function isInstanceOfType(instance: any, type: Type) {\r\n    if (instance == null)\r\n        return false;\r\n\r\n    if (typeof (type as TypeExt).__isInstanceOfType === 'function')\r\n        return (type as TypeExt).__isInstanceOfType(instance);\r\n\r\n    return isAssignableFrom(type, getInstanceType(instance));\r\n};\r\n\r\nexport function safeCast(instance: any, type: Type) {\r\n    return isInstanceOfType(instance, type) ? instance : null;\r\n};\r\n\r\nexport function cast(instance: any, type: Type) {\r\n    if (instance == null)\r\n        return instance;\r\n    else if (isInstanceOfType(instance, type))\r\n        return instance;\r\n    throw new InvalidCastException('Cannot cast object to type ' + getTypeFullName(type));\r\n}\r\n\r\nexport function getBaseType(type: any) {\r\n    if (type === Object ||\r\n        !type.prototype ||\r\n        (type as TypeExt).__interface === true) {\r\n        return null;\r\n    }\r\n    else if (Object.getPrototypeOf) {\r\n        return Object.getPrototypeOf(type.prototype).constructor;\r\n    }\r\n    else {\r\n        var p = type.prototype;\r\n        if (Object.prototype.hasOwnProperty.call(p, 'constructor')) {\r\n            try {\r\n                var ownValue = p.constructor;\r\n                delete p.constructor;\r\n                return p.constructor;\r\n            }\r\n            finally {\r\n                p.constructor = ownValue;\r\n            }\r\n        }\r\n        return p.constructor;\r\n    }\r\n};\r\n\r\nexport function getAttributes(type: any, attrType: any, inherit?: boolean) {\r\n    var result = [];\r\n    if (inherit) {\r\n        var b = getBaseType(type);\r\n        if (b) {\r\n            var a: any = getAttributes(b, attrType, true);\r\n            for (var i = 0; i < a.length; i++) {\r\n                var t = getInstanceType(a[i]);\r\n                result.push(a[i]);\r\n            }\r\n        }\r\n    }\r\n    var attr = (type as TypeExt).__metadata?.attr;\r\n    if (attr != null) {\r\n        for (var i = 0; i < attr.length; i++) {\r\n            var a: any = attr[i];\r\n            if (attrType == null || isInstanceOfType(a, attrType)) {\r\n                var t = getInstanceType(a);\r\n                for (var j = result.length - 1; j >= 0; j--) {\r\n                    if (isInstanceOfType(result[j], t))\r\n                        result.splice(j, 1);\r\n                }\r\n                result.push(a);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n};\r\n\r\nexport enum MemberType {\r\n    field = 4,\r\n    property = 16\r\n}\r\n\r\nexport function getMembers(type: any, memberTypes: MemberType): TypeMember[] {\r\n    var result: TypeMember[] = [];\r\n    var b = getBaseType(type);\r\n    if (b)\r\n        result = getMembers(b, memberTypes & ~1);\r\n\r\n    var members = (type as TypeExt).__metadata?.members;\r\n    if (members != null) {\r\n        for (var m of members) {\r\n            if (memberTypes & m.type)\r\n                result.push(m);\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nexport function addTypeMember(type: any, member: TypeMember): TypeMember {\r\n\r\n    var name = member.name;\r\n    var md = ensureMetadata(type);\r\n    md.members = md.members || [];\r\n\r\n    let existing: TypeMember;\r\n    for (var m of md.members) {\r\n        if (m.name == name) {\r\n            existing = m;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (existing) {\r\n        if (member.type != null)\r\n            existing.type = member.type;\r\n        if (member.attr != null)\r\n            existing.attr = merge(existing.attr, member.attr);\r\n        if (member.getter != null)\r\n            existing.getter = member.getter;\r\n        if (member.setter != null)\r\n            existing.setter = member.setter;\r\n        return existing;\r\n    }\r\n    else {\r\n        md.members.push(member);\r\n        return member;\r\n    }\r\n}\r\n\r\nexport function getTypes(from?: any): any[] {\r\n    const types = getTypeStore();\r\n    var result = [];\r\n    if (!from) {\r\n        for (var t in types) {\r\n            if (Object.prototype.hasOwnProperty.call(types, t))\r\n                result.push(types[t]);\r\n        }\r\n    }\r\n    else {\r\n        var traverse = function (s: any, n: string) {\r\n            for (var c in s) {\r\n                if (Object.prototype.hasOwnProperty.call(s, c))\r\n                    traverse(s[c], c);\r\n            }\r\n            if (typeof (s) === 'function' &&\r\n                n.charAt(0).toUpperCase() === n.charAt(0) &&\r\n                n.charAt(0).toLowerCase() !== n.charAt(0))\r\n                result.push(s);\r\n        };\r\n        traverse(from, '');\r\n    }\r\n    return result;\r\n};\r\n\r\nexport function clearKeys(d: any) {\r\n    for (var n in d) {\r\n        if (Object.prototype.hasOwnProperty.call(d, n))\r\n            delete d[n];\r\n    }\r\n}\r\n\r\nexport function delegateCombine(delegate1: any, delegate2: any) {\r\n    if (!delegate1) {\r\n        if (!delegate2._targets) {\r\n            return delegate2;\r\n        }\r\n        return delegate2;\r\n    }\r\n    if (!delegate2) {\r\n        if (!delegate1._targets) {\r\n            return delegate1;\r\n        }\r\n        return delegate1;\r\n    }\r\n\r\n    var targets1 = delegate1._targets ? delegate1._targets : [null, delegate1];\r\n    var targets2 = delegate2._targets ? delegate2._targets : [null, delegate2];\r\n\r\n    return _mkdel(targets1.concat(targets2));\r\n};\r\n\r\nconst fallbackStore: any = {};\r\n\r\n\r\nexport function getStateStore(key?: string): any {\r\n\r\n    let store: any;\r\n    if (globalObj) {\r\n        if (!globalObj.Q)\r\n            globalObj.Q = {};\r\n\r\n        store = globalObj.Q.__stateStore;\r\n        if (!store)\r\n            globalObj.Q.__stateStore = store = Object.create(null);\r\n    }\r\n    else\r\n        store = fallbackStore;\r\n\r\n    if (key == null)\r\n        return store;\r\n\r\n    var s = store[key];\r\n    if (s == null)\r\n        store[key] = s = Object.create(null);\r\n    return s;\r\n}\r\n\r\nexport namespace Enum {\r\n    export let toString = (enumType: any, value: number): string => {\r\n        var values = enumType;\r\n        if (value === 0 || !((enumType as TypeExt).__metadata?.enumFlags)) {\r\n            for (var i in values) {\r\n                if (values[i] === value) {\r\n                    return i;\r\n                }\r\n            }\r\n            return value == null ? \"\" : value.toString();\r\n        }\r\n        else {\r\n            var parts: string[] = [];\r\n            for (var i in values) {\r\n                if (values[i] & value) {\r\n                    parts.push(i);\r\n                }\r\n                else\r\n                    parts.push(value == null ? \"\" : value.toString());\r\n            }\r\n            return parts.join(' | ');\r\n        }\r\n    };\r\n\r\n    export let getValues = (enumType: any) => {\r\n        var parts = [];\r\n        var values = enumType;\r\n        for (var i in values) {\r\n            if (Object.prototype.hasOwnProperty.call(values, i) &&\r\n                typeof values[i] === \"number\")\r\n                parts.push(values[i]);\r\n        }\r\n        return parts;\r\n    };\r\n}\r\n\r\nfunction delegateContains(targets: any[], object: any, method: any) {\r\n    for (var i = 0; i < targets.length; i += 2) {\r\n        if (targets[i] === object && targets[i + 1] === method) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\n\r\nlet _mkdel = (targets: any[]): any => {\r\n    var delegate: any = function () {\r\n        if (targets.length === 2) {\r\n            return targets[1].apply(targets[0], arguments);\r\n        }\r\n        else {\r\n            var clone = targets.slice();\r\n            for (var i = 0; i < clone.length; i += 2) {\r\n                if (delegateContains(targets, clone[i], clone[i + 1])) {\r\n                    clone[i + 1].apply(clone[i], arguments);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n    delegate._targets = targets;\r\n\r\n    return delegate;\r\n};\r\n\r\nexport let delegateRemove = (delegate1: any, delegate2: any) => {\r\n    if (!delegate1 || (delegate1 === delegate2)) {\r\n        return null;\r\n    }\r\n    if (!delegate2) {\r\n        return delegate1;\r\n    }\r\n\r\n    var targets = delegate1._targets;\r\n    var object = null;\r\n    var method;\r\n    if (delegate2._targets) {\r\n        object = delegate2._targets[0];\r\n        method = delegate2._targets[1];\r\n    }\r\n    else {\r\n        method = delegate2;\r\n    }\r\n\r\n    for (var i = 0; i < targets.length; i += 2) {\r\n        if ((targets[i] === object) && (targets[i + 1] === method)) {\r\n            if (targets.length === 2) {\r\n                return null;\r\n            }\r\n            var t = targets.slice();\r\n            t.splice(i, 2);\r\n            return _mkdel(t);\r\n        }\r\n    }\r\n\r\n    return delegate1;\r\n};\r\n\r\nexport let isEnum = (type: any) => {\r\n    return typeof type !== \"function\" &&\r\n        (type as TypeExt).__interface === null;\r\n};\r\n\r\nexport function initFormType(typ: Function, nameWidgetPairs: any[]) {\r\n    for (var i = 0; i < nameWidgetPairs.length - 1; i += 2) {\r\n        (function (name: string, widget: any) {\r\n            Object.defineProperty(typ.prototype, name, {\r\n                get: function () {\r\n                    return this.w(name, widget);\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n        })(nameWidgetPairs[i], nameWidgetPairs[i + 1]);\r\n    }\r\n}\r\n\r\nexport function prop(type: any, name: string, getter?: string, setter?: string) {\r\n    getter = getter || \"get_\" + name;\r\n    setter = setter || \"set_\" + name;\r\n\r\n    Object.defineProperty(type.prototype, name, {\r\n        get: function () {\r\n            return this[getter]();\r\n        },\r\n        set: function (value) {\r\n            return this[setter](value);\r\n        },\r\n        configurable: true,\r\n        enumerable: true\r\n    });\r\n}\r\n\r\nfunction ensureMetadata(target: Type): TypeMetadata {\r\n\r\n    if (!Object.prototype.hasOwnProperty.call(target, '__metadata') ||\r\n        !(target as TypeExt).__metadata) {\r\n        (target as TypeExt).__metadata = Object.create(null);\r\n    }\r\n\r\n    return (target as TypeExt).__metadata;\r\n}\r\n\r\nfunction distinct(arr: any[]) {\r\n    return arr.filter((item, pos) => arr.indexOf(item) === pos);\r\n}\r\n\r\nconst _fieldsProxy = new Proxy({}, { get: (_, p) => p }) as any;\r\n\r\nexport function fieldsProxy<TRow>(): Readonly<Record<keyof TRow, string>> {\r\n    return _fieldsProxy\r\n}\r\n\r\nexport function keyOf<T>(prop: keyof T) {\r\n    return prop;\r\n}\r\n\r\nfunction merge(arr1: any[], arr2: any[]) {\r\n    if (!arr1 || !arr2)\r\n        return (arr1 || arr2 || []).slice();\r\n\r\n    return distinct(arr1.concat(arr2));\r\n}\r\n\r\nfunction interfaceIsAssignableFrom(from: any) {\r\n    return from != null && \r\n        Array.isArray((from as TypeExt).__interfaces) && \r\n        (from as TypeExt).__interfaces.some(x => \r\n            x === this ||\r\n            (getTypeNameProp(this)?.length && \r\n                x.__interface &&\r\n                getTypeNameProp(x) === this.__typeName));\r\n}\r\n\r\nfunction registerType(type: any, name: string, intf: any[]) {\r\n    const types = getTypeStore();\r\n    if (name && name.length) {\r\n        setTypeNameProp(type, name);\r\n        types[name] = type;\r\n    }\r\n    else if (getTypeNameProp(type as TypeExt)?.length)\r\n        types[(type as TypeExt).__typeName] = type;\r\n\r\n    if (intf != null && intf.length)\r\n        Object.defineProperty(type, \"__interfaces\", {\r\n            value: merge((type as TypeExt).__interfaces, intf),\r\n            configurable: true\r\n        });\r\n}\r\n\r\nexport function registerClass(type: any, name: string, intf?: any[]) {\r\n    registerType(type, name, intf);\r\n    Object.defineProperty(type, \"__interface\", { value: false, configurable: true });\r\n}\r\n\r\nexport function registerEditor(type: any, name: string, intf?: any[]) {\r\n    registerClass(type, name, intf);\r\n    addAttribute(type, new EditorAttribute());\r\n}\r\n\r\nexport function registerEnum(type: any, name: string, enumKey?: string) {\r\n    registerType(type, name, undefined);\r\n    if (enumKey && enumKey != name) {\r\n        const types = getTypeStore();\r\n        if (!types[enumKey])\r\n            types[enumKey] = type;\r\n    }\r\n    Object.defineProperty(type, \"__interface\", { value: null, configurable: true });\r\n}\r\n\r\nexport function registerInterface(type: any, name: string, intf?: any[]) {\r\n    registerType(type, name, intf);\r\n    Object.defineProperty(type, \"__interface\", { value: true, configurable: true });\r\n    Object.defineProperty(type, \"__isAssignableFrom\", { value: interfaceIsAssignableFrom, configurable: true });\r\n}\r\n\r\nexport function addAttribute(type: any, attr: any) {\r\n    var md = ensureMetadata(type);\r\n    md.attr = md.attr || [];\r\n    md.attr.push(attr);\r\n}\r\n\r\nexport class ISlickFormatter {\r\n}\r\n\r\nregisterInterface(ISlickFormatter, 'Serenity.ISlickFormatter');\r\n\r\nexport class EditorAttribute {\r\n}\r\n\r\nregisterClass(EditorAttribute, 'Serenity.EditorAttribute');\r\n\r\nexport function initializeTypes(root: any, pre: string, limit: number) {\r\n\r\n    if (!root)\r\n        return;\r\n\r\n    const types = getTypeStore();\r\n\r\n    for (var k of Object.keys(root)) {\r\n        if (k.charAt(0) < 'A' || \r\n            k.charAt(0) > 'Z' || \r\n            k.indexOf('$') >= 0 || \r\n            !Object.prototype.hasOwnProperty.call(root, k))\r\n            continue;\r\n\r\n        var obj = root[k];\r\n\r\n        if (obj == void 0 ||\r\n            Array.isArray(obj) ||\r\n            obj instanceof Date ||\r\n            (typeof obj != \"function\" &&\r\n             typeof obj != \"object\"))\r\n            continue;\r\n\r\n        // no explict __typeName, e.g. not registered with a name,\r\n        // a function but not an html element, or registered without name\r\n        if (!getTypeNameProp(obj) && \r\n            ((typeof obj === \"function\" && typeof obj.nodeType !== \"number\") || \r\n             (Object.prototype.hasOwnProperty.call(obj, \"__interface\") &&\r\n              (obj as TypeExt).__interface !== undefined))) {\r\n   \r\n            // legacy formatter with registerClass\r\n            if (typeof obj == \"function\" && \r\n                !obj.__interfaces && \r\n                obj.prototype?.format &&\r\n                k.substr(-9) === \"Formatter\") {\r\n                if ((obj as TypeExt).__interface === undefined)\r\n                    Object.defineProperty(obj, \"__interface\", { value: false, configurable: true });\r\n                (obj as TypeExt).__interfaces = [ISlickFormatter]\r\n            }\r\n\r\n            // only register types that should\r\n            if ((obj as TypeExt).__interface !== undefined) {\r\n                setTypeNameProp(obj, pre + k);\r\n                types[pre + k] = obj;\r\n            }\r\n        }\r\n        \r\n        if (limit > 0) \r\n            initializeTypes(obj, pre + k + \".\", limit - 1);\r\n    }\r\n}\r\n\r\nexport class Exception extends Error {\r\n    constructor(message: string) {\r\n        super(message);\r\n        this.name = \"Exception\";\r\n    }\r\n}\r\n\r\nexport class ArgumentNullException extends Exception {\r\n    constructor(paramName: string, message?: string) {\r\n        super((message || 'Value cannot be null.') + '\\nParameter name: ' + paramName);\r\n        this.name = \"ArgumentNullException\";\r\n    }\r\n}\r\n\r\nexport class InvalidCastException extends Exception {\r\n    constructor(message: string) {\r\n        super(message);\r\n        this.name = \"InvalidCastException\";\r\n    }\r\n}\r\n\r\nexport {}", "\uFEFFexport function endsWith(s: string, suffix: string): boolean {\r\n    if (String.prototype.endsWith)\r\n        return s.endsWith(suffix);\r\n\r\n    if (suffix == null)\r\n        return false;\r\n    \r\n    if (!suffix.length)\r\n        return true;\r\n    if (suffix.length > s.length)\r\n        return false;\r\n    return (s.substr(s.length - suffix.length) == suffix);\r\n}\r\n\r\nexport function isEmptyOrNull(s: string) {\r\n    return s == null || s.length === 0;\r\n}\r\n\r\nexport function isTrimmedEmpty(s: string) {\r\n    return trimToNull(s) == null;\r\n}\r\n\r\nexport function padLeft(s: string | number, len: number, ch: string = ' ') {\r\n    if ((s as any).padStart)\r\n        return (s as any).padStart(len, ch);\r\n    s = s.toString();\r\n    while (s.length < len)\r\n        s = ch + s;\r\n    return s;\r\n}\r\n\r\nexport function startsWith(s: string, prefix: string): boolean {\r\n    if (String.prototype.startsWith)\r\n        return s.startsWith(prefix);\r\n\r\n    if (prefix == null)\r\n        return false;\r\n\r\n    if (!prefix.length)\r\n        return true;\r\n    if (prefix.length > s.length)\r\n        return false;\r\n    return (s.substr(0, prefix.length) === prefix);\r\n}\r\n\r\nexport function toSingleLine(str: string) {\r\n    return replaceAll(replaceAll(trimToEmpty(str), '\\r\\n', ' '), '\\n', ' ').trim();\r\n}\r\n\r\nexport var trimEnd = function(s: string) {\r\n    return s.replace(/\\s*$/, '');\r\n};\r\n\r\nexport var trimStart = function(s: string) {\r\n    return s.replace(/^\\s*/, '');\r\n};\r\n\r\nexport function trim(s: string) {\r\n    if (s == null)\r\n        return '';\r\n    return s.replace(new RegExp('^\\\\s+|\\\\s+$', 'g'), '');\r\n}\r\n\r\nexport function trimToEmpty(s: string) {\r\n    if (s == null || s.length === 0)\r\n        return '';\r\n\r\n    return trim(s);\r\n}\r\n\r\nexport function trimToNull(s: string) {\r\n    s = trim(s);\r\n    if (s.length === 0)\r\n        return null;\r\n    return s;\r\n}\r\n\r\nexport function replaceAll(s: string, f: string, r: string): string {\r\n    s = s || '';\r\n    return s.split(f).join(r);\r\n}\r\n\r\nexport function zeroPad(n: number, digits: number): string {\r\n    let s = n.toString();\r\n    while (s.length < digits)\r\n        s = \"0\" + s;\r\n    return s;\r\n}", "\uFEFFimport { getStateStore } from \"./system\";\r\nimport { isEmptyOrNull, startsWith } from \"./strings\";\r\n\r\nexport function localText(key: string): string {\r\n    let t: string = getTable()[key];\r\n    if (t == null) {\r\n        t = key ?? '';\r\n    }\r\n    return t;\r\n}\r\n\r\n/** @obsolete prefer localText for better discoverability */\r\nexport const text = localText;\r\n\r\nexport function dbText(prefix: string): ((key: string) => string) {\r\n    return function (key: string) {\r\n        return localText(\"Db.\" + prefix + \".\" + key);\r\n    }\r\n}\r\n\r\nfunction getTable(): { [key: string]: string } {\r\n    return getStateStore(\"__localText\");\r\n}\r\n\r\nexport function prefixedText(prefix: string) {\r\n\r\n    return function (text: string, key: string | ((p?: string) => string)) {\r\n\r\n        if (text != null && !startsWith(text, '`')) {\r\n            var local = tryGetText(text);\r\n            if (local != null) {\r\n                return local;\r\n            }\r\n        }\r\n\r\n        if (text != null && startsWith(text, '`')) {\r\n            text = text.substr(1);\r\n        }\r\n\r\n        if (!isEmptyOrNull(prefix)) {\r\n            var textKey = typeof (key) == \"function\" ? key(prefix) : (prefix + key);\r\n            var localText = tryGetText(textKey);\r\n            if (localText != null) {\r\n                return localText;\r\n            }\r\n        }\r\n\r\n        return text;\r\n    }\r\n}\r\n\r\nexport function tryGetText(key: string): string {\r\n    var value = getTable()[key];\r\n    return value;\r\n}\r\n\r\nexport function dbTryText(prefix: string): ((key: string) => string) {\r\n    return function (key: string) {\r\n        return localText(\"Db.\" + prefix + \".\" + key);\r\n    }\r\n}\r\n\r\nexport function proxyTexts(o: Object, p: string, t: Object): Object {\r\n    if (typeof window != 'undefined' && window['Proxy']) {\r\n        return new window['Proxy'](o, {\r\n            get: (x: Object, y: string) => {\r\n                var tv = t[y];\r\n                if (tv == null)\r\n                    return;\r\n                if (typeof tv == 'number')\r\n                    return localText(p + y);\r\n                else {\r\n                    var z = o[y];\r\n                    if (z != null)\r\n                        return z;\r\n                    o[y] = z = proxyTexts({}, p + y + '.', tv);\r\n                    return z;\r\n                }\r\n            },\r\n            ownKeys: (x: Object) => Object.keys(t)\r\n        });\r\n    }\r\n    else {\r\n        for (var k of Object.keys(t)) {\r\n            if (typeof t[k] == 'number')\r\n                Object.defineProperty(o, k, {\r\n                    get: () => localText(p + k)\r\n                });\r\n            else\r\n                o[k] = proxyTexts({}, p + k + '.', t[k]);\r\n        }\r\n        return o;\r\n    }\r\n}\r\n\r\nexport class LT {\r\n    static empty: LT = new LT('');\r\n\r\n    constructor(private key: string) {\r\n    }\r\n\r\n    static add(key: string, value: string): void;\r\n    static add(obj: any, pre?: string) {\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        \r\n        let table = getTable();\r\n\r\n        if (typeof obj === \"string\") {\r\n            table[obj] = pre;\r\n            return;\r\n        }\r\n\r\n        pre = pre || '';\r\n        for (let k of Object.keys(obj)) {\r\n            let actual = pre + k;\r\n            let o = obj[k];\r\n            if (typeof (o) === 'object') {\r\n                LT.add(o, actual + '.');\r\n            }\r\n            else {\r\n                table[actual] = o;\r\n            }\r\n        }\r\n    }\r\n\r\n    get() {\r\n        var t = getTable()[this.key];\r\n        if (t == null) {\r\n            t = this.key || '';\r\n        }\r\n        return t;\r\n    }\r\n\r\n    toString() {\r\n        var t = getTable()[this.key];\r\n        if (t == null) {\r\n            t = this.key || '';\r\n        }\r\n        return t;\r\n    }\r\n\r\n    static initializeTextClass = function (type: any, prefix: string) {\r\n        var $t1 = Object.keys(type).slice();\r\n        var table = getTable();\r\n        for (var $t2 = 0; $t2 < $t1.length; $t2++) {\r\n            var member = $t1[$t2];\r\n            var value = type[member];\r\n            if (value instanceof LT) {\r\n                var lt = value;\r\n                var key = prefix + member;\r\n                table[key] = lt.key;\r\n                type[member] = new LT(key);\r\n            }\r\n        }\r\n    }\r\n\r\n    static getDefault = function (key: string, defaultText: string) {\r\n        var t = getTable()[key];\r\n        if (t == null) {\r\n            t = defaultText;\r\n            if (t == null) {\r\n                t = key || '';\r\n            }\r\n        }\r\n        return t;\r\n    }\r\n}\r\n\r\nif (typeof globalThis !== \"undefined\") {\r\n    const Q = (globalThis as any).Q || ((globalThis as any).Q = {});\r\n    if (Q.LT == null)\r\n        Q.LT = LT;\r\n}", "\uFEFFimport { extend } from \"./system\";\r\n\r\n// set default for toastr itself, possible security issue\r\nif (typeof toastr !== \"undefined\" && toastr.options)\r\n    toastr.options.escapeHtml = true;\r\n\r\nexport let defaultNotifyOptions: ToastrOptions = {\r\n    timeOut: 3000,\r\n    showDuration: 250,\r\n    hideDuration: 500,\r\n    escapeHtml: true,\r\n    extendedTimeOut: 500,\r\n    positionClass: 'position-toast toast-top-full-width'\r\n}\r\n\r\nfunction getToastrOptions(options: ToastrOptions) {\r\n    options = extend(extend({}, defaultNotifyOptions), options);\r\n    positionToastContainer(true, options);\r\n    return options;\r\n}\r\n\r\nexport function notifyWarning(message: string, title?: string, options?: ToastrOptions): void {\r\n    toastr.warning(message, title, getToastrOptions(options));\r\n}\r\n\r\nexport function notifySuccess(message: string, title?: string, options?: ToastrOptions): void {\r\n    toastr.success(message, title, getToastrOptions(options));\r\n}\r\n\r\nexport function notifyInfo(message: string, title?: string, options?: ToastrOptions): void {\r\n    toastr.info(message, title, getToastrOptions(options));\r\n}\r\n\r\nexport function notifyError(message: string, title?: string, options?: ToastrOptions): void {\r\n    toastr.error(message, title, getToastrOptions(options));\r\n}\r\n\r\nexport function positionToastContainer(create: boolean, options?: ToastrOptions) {\r\n    if (typeof toastr === 'undefined') {\r\n        return;\r\n    }\r\n\r\n    var container = toastr.getContainer(options, create);\r\n    if (!container.length || !container.hasClass('position-toast'))\r\n        return;\r\n\r\n    var dialog = $(window.document.body).children('.ui-dialog:visible, .modal.in, .modal.show').last();\r\n    if (dialog.length > 0) {\r\n        var position = dialog.position();\r\n        container.addClass('positioned-toast');\r\n        container.css({ position: 'absolute', top: position.top + 28 + 'px', left: position.left + 6 + 'px', width: dialog.width() - 12 + 'px' });\r\n    }\r\n    else {\r\n        if (container.hasClass('positioned-toast')) {\r\n            container.removeClass('positioned-toast');\r\n            container.css({ position: '', top: '', left: '', width: '' });\r\n        }\r\n    }\r\n}", "\uFEFFvar Config = {\r\n    /**\r\n     * This is the root path of your application. If your application resides under http://localhost/mysite/,\r\n     * your root path is \"mysite/\". This variable is automatically initialized by reading from a <link> element\r\n     * with ID \"ApplicationPath\" from current page, which is usually located in your _LayoutHead.cshtml file\r\n     */\r\n    applicationPath: '/',\r\n\r\n    /**\r\n     * Email validation by default only allows ASCII characters. Set this to true if you want to allow unicode.\r\n     */\r\n    emailAllowOnlyAscii: true,\r\n\r\n    /**\r\n     * @Obsolete defaulted to false before for backward compatibility, now its true by default\r\n     */\r\n    responsiveDialogs: true,\r\n\r\n    /**\r\n     * Set this to true, to prefer bootstrap dialogs over jQuery UI dialogs by default for message dialogs\r\n     */\r\n    bootstrapMessages: false,\r\n\r\n    /**\r\n     * This is the list of root namespaces that may be searched for types. For example, if you specify an editor type\r\n     * of \"MyEditor\", first a class with name \"MyEditor\" will be searched, if not found, search will be followed by\r\n     * \"Serenity.MyEditor\" and \"MyApp.MyEditor\" if you added \"MyApp\" to the list of root namespaces.\r\n     *\r\n     * You should usually add your application root namespace to this list in ScriptInitialization.ts file.\r\n     */\r\n    rootNamespaces: ['Serenity'],\r\n\r\n    /**\r\n     * This is an optional method for handling when user is not logged in. If a users session is expired \r\n     * and when a NotAuthorized response is received from a service call, Serenity will call this handler, so\r\n     * you may intercept it and notify user about this situation and ask if she wants to login again...\r\n     */\r\n    notLoggedInHandler: <Function>null\r\n}\r\n\r\nif (typeof document !== 'undefined') {\r\n    var pathLink = document.querySelector('link#ApplicationPath') as HTMLLinkElement;\r\n    if (pathLink != null) {\r\n        Config.applicationPath = pathLink.getAttribute('href');\r\n    }\r\n}\r\n\r\nexport { Config };", "\uFEFFimport { localText } from \"./localtext\";\r\nimport { isEmptyOrNull } from \"./strings\";\r\n\r\nexport function addOption(select: JQuery, key: string, text: string) {\r\n    $('<option/>').val(key).text(text).appendTo(select);\r\n}\r\n\r\nexport function addEmptyOption(select: JQuery) {\r\n    addOption(select, '', localText(\"Controls.SelectEditor.EmptyItemText\"));\r\n}\r\n\r\nexport function clearOptions(select: JQuery) {\r\n    select.html('');\r\n}\r\n\r\nexport function findElementWithRelativeId(element: JQuery, relativeId: string): JQuery {\r\n    let elementId = element.attr('id');\r\n    if (isEmptyOrNull(elementId)) {\r\n        return $('#' + relativeId);\r\n    }\r\n\r\n    let result = $('#' + elementId + relativeId);\r\n    if (result.length > 0) {\r\n        return result;\r\n    }\r\n\r\n    result = $('#' + elementId + '_' + relativeId);\r\n\r\n    if (result.length > 0) {\r\n        return result;\r\n    }\r\n\r\n    while (true) {\r\n        let idx = elementId.lastIndexOf('_');\r\n        if (idx <= 0) {\r\n            return $('#' + relativeId);\r\n        }\r\n\r\n        elementId = elementId.substr(0, idx);\r\n        result = $('#' + elementId + '_' + relativeId);\r\n\r\n        if (result.length > 0) {\r\n            return result;\r\n        }\r\n    }\r\n}\r\n\r\nconst esc = {\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": \"&apos;\",\r\n    '&': '&amp;',\r\n}\r\n\r\nfunction escFunc(a: string) {\r\n    return esc[a];\r\n}\r\n\r\n/**\r\n * Html encodes a string (encodes single and double quotes, & (ampersand), > and < characters)\r\n * @param s String to be HTML encoded\r\n */\r\nexport function htmlEncode(s: any): string {\r\n    if (s == null)\r\n        return '';\r\n\r\n    if (typeof s !== \"string\")\r\n        s = \"\" + s;\r\n\r\n    return s.replace(/[<>\"'&]/g, escFunc)\r\n}\r\n\r\n/** @obsolete use htmlEncode as it also encodes quotes */\r\nexport const attrEncode = htmlEncode;\r\n\r\nexport function newBodyDiv(): JQuery {\r\n    return $('<div/>').appendTo(document.body);\r\n}\r\n\r\nexport function outerHtml(element: JQuery) {\r\n    return $('<i/>').append(element.eq(0).clone()).html();\r\n}\r\n", "\uFEFFimport { Config } from \"./config\";\r\nimport { extend } from \"./system\";\r\nimport { htmlEncode } from \"./html\";\r\nimport { startsWith } from \"./strings\";\r\nimport { tryGetText } from \"./localtext\";\r\n\r\nexport interface DialogButton {\r\n    text?: string;\r\n    hint?: string;\r\n    icon?: string;\r\n    click?: (e: JQueryEventObject) => void;\r\n    cssClass?: string;\r\n    htmlEncode?: boolean;\r\n    result?: string;\r\n}\r\n\r\nexport interface CommonDialogOptions  {\r\n    onOpen?: () => void;\r\n    onClose?: (result: string) => void;\r\n    title?: string;\r\n    htmlEncode?: boolean;\r\n    preWrap?: boolean;\r\n    dialogClass?: string;\r\n    buttons?: DialogButton[];\r\n    modalClass?: string;\r\n    bootstrap?: boolean;\r\n    result?: string;\r\n}\r\n\r\nexport interface AlertOptions extends CommonDialogOptions {\r\n    okButton?: string | boolean;\r\n    okButtonClass?: string;\r\n}\r\n\r\n\r\n// if both jQuery UI and bootstrap button exists, prefer jQuery UI button as UI dialog needs them\r\nif (typeof $ !== \"undefined\" && $.fn && $.fn.button && $.ui && $.ui.button && ($.fn.button as any).noConflict) {\r\n    ($.fn as any).btn = ($.fn.button as any).noConflict();\r\n}\r\n\r\nfunction toIconClass(icon: string): string {\r\n    if (!icon)\r\n        return null;\r\n    if (startsWith(icon, 'fa-'))\r\n        return 'fa ' + icon;\r\n    if (startsWith(icon, 'glyphicon-')) \r\n        return 'glyphicon ' + icon;\r\n    return icon;\r\n}\r\n\r\nfunction uiDialogMessage(options: CommonDialogOptions, message: string, dialogClass: string) {\r\n    var opt = extend(<JQueryUI.DialogOptions>{\r\n        modal: true,\r\n        width: '40%',\r\n        maxWidth: 450,\r\n        minWidth: 180,\r\n        resizable: false,\r\n        open: function () {\r\n            if (options.onOpen)\r\n                options.onOpen.call(this);\r\n        },\r\n        close: function () {\r\n            $(this).dialog('destroy');\r\n            if (options.onClose)\r\n                options.onClose.call(this, options.result);\r\n        }\r\n    }, options);\r\n\r\n    opt.dialogClass = 's-MessageDialog' + (dialogClass ? (' ' + dialogClass): '');\r\n\r\n    if (options.buttons) {\r\n        opt.buttons = options.buttons.map(x => {\r\n            var btn = dialogButtonToUI(x);\r\n            btn.click = function(e) {\r\n                options.result = x.result;\r\n                $(this).dialog('close');\r\n                x.click && x.click.call(this, e);\r\n            }\r\n            return btn;\r\n        });\r\n    }\r\n\r\n    return $('<div>' + message + '</div>').dialog(opt);\r\n}\r\n\r\nlet _isBS3: boolean;\r\nlet _isBS5Plus: boolean;\r\n\r\nexport function isBS3(): boolean {\r\n    if (_isBS3 != null)\r\n        return _isBS3;\r\n    // @ts-ignore\r\n    return (_isBS3 = !!($.fn.modal && $.fn.modal.Constructor && $.fn.modal.Constructor.VERSION && ($.fn.modal.Constructor.VERSION + \"\").charAt(0) == '3'));\r\n}\r\n\r\nexport function isBS5Plus(): boolean {\r\n    if (_isBS5Plus != null)\r\n        return _isBS5Plus;\r\n    // @ts-ignore\r\n    return (_isBS5Plus = typeof bootstrap !== \"undefined\" && (!bootstrap.Modal || !bootstrap.Modal.VERSION || (!bootstrap.Modal.VERSION + \"\").charAt(0) != '4'));\r\n}\r\n\r\nexport function resetBSVersionCheck() {\r\n    _isBS3 = undefined;\r\n    _isBS5Plus = undefined;\r\n}\r\n\r\nconst defaultTxt = {\r\n    AlertTitle: 'Alert',\r\n    InformationTitle: 'Information',\r\n    WarningTitle: 'Warning',\r\n    ConfirmationTitle: 'Confirm',\r\n    OkButton: 'OK',\r\n    YesButton: 'Yes',\r\n    NoButton: 'No',\r\n    CancelButton: 'Cancel',\r\n    CloseButton: 'Close'\r\n};\r\n\r\nfunction txt(k: string) {\r\n    return tryGetText(\"Dialogs.\" + k) ?? defaultTxt[k];\r\n}\r\n\r\nexport function bsModalMarkup(title: string, body: string, modalClass?: string) {\r\n    var closeButton = `<button type=\"button\" class=\"${isBS5Plus() ? \"btn-\" : \"\"}close\" data-${isBS5Plus() ? \"bs-\" :  \"\"}dismiss=\"modal\" aria-label=\"${txt('CloseButton')}\">` + \r\n        `${isBS5Plus() ? \"\" : '<span aria-hidden=\"true\">&times;</span>'}</button>`;\r\n    return (\r\n`<div class=\"modal ${modalClass}\" tabindex=\"-1\" role=\"dialog\">\r\n<div class=\"modal-dialog\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n            ${(isBS3() ? closeButton : \"\")}<h5 class=\"modal-title\">${title}</h5>${(isBS3() ? \"\" : closeButton)}\r\n        </div>\r\n        <div class=\"modal-body\">${body}</div>\r\n        <div class=\"modal-footer\"></div>\r\n    </div>\r\n</div>\r\n</div>`);\r\n}\r\n\r\nexport function dialogButtonToBS(x: DialogButton) {\r\n    var text = x.htmlEncode == null || x.htmlEncode ? htmlEncode(x.text) : x.text;\r\n    var iconClass = toIconClass(x.icon);\r\n    if (iconClass != null)\r\n        text = '<i class=\"' + iconClass + \"><i>\" + (text ? (\" \" + text) : \"\");\r\n    return `<button class=\"btn ${x.cssClass ? x.cssClass : ''}\"${x.hint ? (' title=\"' + htmlEncode(x.hint) + '\"') : ''}>${text}</button>`;\r\n}\r\n\r\nexport function dialogButtonToUI(x: DialogButton) {\r\n    var text = x.htmlEncode == null || x.htmlEncode ? htmlEncode(x.text) : x.text;\r\n    var iconClass = toIconClass(x.icon);\r\n    if (iconClass != null)\r\n        text = '<i class=\"' + iconClass + \"><i> \";\r\n    return <JQueryUI.DialogButtonOptions>{\r\n        text: text,\r\n        attr: !x.cssClass ? undefined : {\r\n            \"class\": x.cssClass\r\n        },\r\n        click: x.click\r\n    }\r\n}\r\n\r\nfunction bsModalMessage(options: CommonDialogOptions, message: string, modalClass: string) {\r\n    var markup = bsModalMarkup(options.title, message, \"s-MessageModal\" + (modalClass ? (\" \" + modalClass) : \"\"));\r\n    var div = $(markup).eq(0).appendTo(document.body);\r\n    \r\n    if (options.onOpen)\r\n        div.one('shown.bs.modal', options.onOpen);\r\n\r\n    div.one('hidden.bs.modal', e => {\r\n        try {\r\n            options.onClose && options.onClose(options.result);\r\n        }\r\n        finally {\r\n            div.remove();\r\n        }\r\n    });\r\n\r\n    var footer = div.find('.modal-footer');\r\n\r\n    function createButton(x: DialogButton) {\r\n        return $(dialogButtonToBS(x))\r\n            .appendTo(footer)\r\n            .click(e => {\r\n                options.result = x.result;\r\n                (div as any).modal('hide');\r\n                x.click && x.click.call(this, e);       \r\n            });\r\n    }\r\n\r\n    if (options.buttons)\r\n        for (var button of options.buttons) \r\n            createButton(button);\r\n\r\n    if (isBS5Plus()) {\r\n        (div as any).modal({\r\n            backdrop: false,\r\n        });\r\n        (div as any).modal('show');\r\n    }\r\n    else {\r\n        (div as any).modal({\r\n            backdrop: false,\r\n            show: true\r\n        } as any);\r\n    }\r\n\r\n    if (isBS5Plus())\r\n        (div as any).modal('show');\r\n}\r\n\r\nlet _useBrowserDialogs: boolean;\r\nfunction useBrowserDialogs() {\r\n    if (_useBrowserDialogs == null) {\r\n        _useBrowserDialogs = typeof $ === 'undefined' || ((!$.ui || !$.ui.dialog) && (!$.fn || !(($.fn as any).modal)));\r\n    }\r\n    return _useBrowserDialogs;\r\n}\r\n\r\nfunction useBSModal(options: CommonDialogOptions): boolean {\r\n    return !!((!$.ui || !$.ui.dialog) || Config.bootstrapMessages || (options && options.bootstrap));\r\n}\r\n\r\nfunction messageHtml(message: string, options?: CommonDialogOptions): string {\r\n    var encode = options == null || options.htmlEncode == null || options.htmlEncode;\r\n    if (encode)\r\n        message = htmlEncode(message); \r\n\r\n    var preWrap = options == null || (options.preWrap == null && encode) || options.preWrap;\r\n    return '<div class=\"message\"' + (preWrap ? ' style=\"white-space: pre-wrap\">' : '>') + message + '</div>';\r\n}\r\n\r\nexport function alertDialog(message: string, options?: AlertOptions) {\r\n\r\n    if (useBrowserDialogs()) {\r\n        window.alert(message);\r\n        return;\r\n    }\r\n\r\n    let useBS = useBSModal(options);\r\n\r\n    options = extend({\r\n        htmlEncode: true,\r\n        okButton: txt('OkButton'),\r\n        title: txt('AlertTitle')\r\n    }, options);\r\n\r\n    if (options.buttons == null) {\r\n        options.buttons = [];\r\n        if (options.okButton == null || options.okButton) {\r\n            options.buttons.push({\r\n                text: typeof options.okButton == \"boolean\" ? txt('OkButton') : options.okButton,\r\n                cssClass: options.okButtonClass ?? (useBS ? 'btn-danger' : undefined),\r\n                result: 'ok'\r\n            });\r\n        }\r\n    }\r\n\r\n    message = messageHtml(message, options);\r\n\r\n    if (useBS)\r\n        bsModalMessage(options, message, options.modalClass ?? \"s-AlertModal\");\r\n    else\r\n        uiDialogMessage(options, message, options.dialogClass ?? \"s-AlertDialog\");\r\n}\r\n\r\n/** @obsolete use alertDialog */\r\nexport const alert = alertDialog;\r\n\r\nexport interface ConfirmOptions extends CommonDialogOptions {\r\n    yesButton?: string | boolean;\r\n    yesButtonClass?: string;\r\n    noButton?: string | boolean;\r\n    cancelButton?: string | boolean;\r\n    onCancel?: () => void;\r\n    onNo?: () => void;\r\n}\r\n\r\nexport function confirmDialog(message: string, onYes: () => void, options?: ConfirmOptions): void {\r\n    if (useBrowserDialogs()) {\r\n        if (window.confirm(message))\r\n            onYes && onYes();\r\n        return;\r\n    }\r\n\r\n    let useBS = useBSModal(options);\r\n\r\n    options = extend(<ConfirmOptions>{\r\n        htmlEncode: true,\r\n        yesButton: txt('YesButton'),\r\n        noButton: txt('NoButton'),\r\n        title: txt('ConfirmationTitle')\r\n    }, options);\r\n\r\n    if (options.buttons == null) {\r\n        options.buttons = [];\r\n        if (options.yesButton == null || options.yesButton) {\r\n            options.buttons.push({\r\n                text: typeof options.yesButton == \"boolean\" ? txt('YesButton') : options.yesButton,\r\n                cssClass: options.yesButtonClass ?? (useBS ? 'btn-primary' : undefined),\r\n                result: 'yes',\r\n                click: onYes\r\n            });\r\n        }\r\n        if (options.noButton == null || options.noButton) {\r\n            options.buttons.push({\r\n                text: typeof options.noButton == \"boolean\" ? txt('NoButton') : options.noButton,\r\n                cssClass: useBS ? (isBS5Plus() ? 'btn-danger' : 'btn-default'): undefined,\r\n                result: 'no',\r\n                click: options.onNo\r\n            });\r\n        }\r\n        if (options.cancelButton) {\r\n            options.buttons.push({\r\n                text: typeof options.cancelButton == \"boolean\" ? txt('CancelButton') : options.cancelButton,\r\n                cssClass: useBS ? (isBS5Plus() ? 'btn-secondary': 'btn-default') : undefined,\r\n                result: 'cancel',\r\n                click: options.onCancel\r\n            });\r\n        }\r\n    }\r\n\r\n    message = messageHtml(message, options);\r\n    if (useBS)\r\n        bsModalMessage(options, message, options.modalClass ?? \"s-ConfirmModal\");\r\n    else\r\n        uiDialogMessage(options, message, options.dialogClass ?? \"s-ConfirmDialog\");\r\n}\r\n\r\n/** @obsolete use confirmDialog */\r\nexport const confirm = confirmDialog;\r\n\r\nexport interface IFrameDialogOptions {\r\n    html?: string;\r\n}\r\n\r\nexport function iframeDialog(options: IFrameDialogOptions) {\r\n\r\n    if (useBrowserDialogs()) {\r\n        window.alert(options.html);\r\n        return;\r\n    }\r\n\r\n    if (useBSModal(options as any)) {\r\n        bsModalMessage({\r\n            title: txt('AlertTitle'),\r\n            modalClass: 'modal-lg',\r\n            onOpen: function() {\r\n                doc = (<HTMLIFrameElement>($(this).find('iframe').css({\r\n                    border: 'none',\r\n                    width: '100%',\r\n                    height: '100%'\r\n                })[0])).contentDocument;\r\n                doc.open();\r\n                doc.write(options.html);\r\n                doc.close();\r\n            }\r\n        }, '<div style=\"overflow: hidden\"><iframe></iframe></div>', 's-IFrameModal');\r\n        return;\r\n    }\r\n\r\n    let doc: any;\r\n    let e = $('<div style=\"overflow: hidden\"><iframe></iframe></div>');\r\n    let settings: IFrameDialogOptions = extend<any>(<JQueryUI.DialogOptions>{\r\n        autoOpen: true,\r\n        modal: true,\r\n        width: '60%',\r\n        height: '400',\r\n        title: txt('AlertTitle'),\r\n        open: function () {\r\n            doc = (<HTMLIFrameElement>(e.find('iframe').css({\r\n                border: 'none',\r\n                width: '100%',\r\n                height: '100%'\r\n            })[0])).contentDocument;\r\n            doc.open();\r\n            doc.write(settings.html);\r\n            doc.close();\r\n        },\r\n        close: function () {\r\n            doc.open();\r\n            doc.write('');\r\n            doc.close();\r\n            e.dialog('destroy').html('');\r\n        }\r\n    }, options);\r\n    e.dialog(settings as any);\r\n}\r\n\r\nexport function informationDialog(message: string, onOk: () => void, options?: ConfirmOptions) {\r\n    if (useBrowserDialogs()) {\r\n        window.alert(message);\r\n        onOk && onOk();\r\n        return;\r\n    }\r\n\r\n    confirmDialog(message, onOk, extend<ConfirmOptions>({\r\n        title: txt(\"InformationTitle\"),\r\n        dialogClass: \"s-InformationDialog\",\r\n        modalClass: \"s-InformationModal\",\r\n        yesButton: txt(\"OkButton\"),\r\n        yesButtonClass: 'btn-info',\r\n        noButton: false,\r\n    }, options));\r\n}\r\n\r\n/** @obsolete use informationDialog */\r\nexport const information = informationDialog;\r\n\r\nexport function successDialog(message: string, onOk: () => void, options?: ConfirmOptions) {\r\n    if (useBrowserDialogs()) {\r\n        window.alert(message);\r\n        onOk && onOk();\r\n        return;\r\n    }\r\n\r\n    confirmDialog(message, onOk, extend<ConfirmOptions>({\r\n        title: txt(\"SuccessTitle\"),\r\n        dialogClass: \"s-SuccessDialog\",\r\n        modalClass: \"s-SuccessModal\",\r\n        yesButton: txt(\"OkButton\"),\r\n        yesButtonClass: 'btn-success',\r\n        noButton: false,\r\n    }, options));\r\n}\r\n\r\n/** @obsolete use successDialog */\r\nexport const success = successDialog;\r\n\r\nexport function warningDialog(message: string, options?: AlertOptions) {\r\n    alertDialog(message, extend<AlertOptions>({\r\n        title: txt(\"WarningTitle\"),\r\n        dialogClass: \"s-WarningDialog\",\r\n        modalClass: \"s-WarningModal\",\r\n        okButtonClass: 'btn-warning'\r\n    }, options));\r\n}\r\n\r\n/** @obsolete use warningDialog */\r\nexport const warning = warningDialog;\r\n\r\nexport function closePanel(element: JQuery, e?: JQueryEventObject) {\r\n\r\n    if (!element.hasClass('s-Panel') || element.hasClass('hidden'))\r\n        return;\r\n\r\n    var query = $.Event(e as any);\r\n    (query as any).type = 'panelbeforeclose';\r\n    query.target = element[0];\r\n    element.trigger(query);\r\n    if (query.isDefaultPrevented())\r\n        return;\r\n\r\n    element.addClass('hidden');\r\n    var uniqueName = element.data('paneluniquename') || new Date().getTime();\r\n    var klass = 'panel-hidden-' + uniqueName;\r\n    $('.' + klass).removeClass(klass).removeClass('panel-hidden');\r\n    $(window).triggerHandler('resize');\r\n    $('.require-layout:visible').triggerHandler('layout');\r\n\r\n    e = $.Event(e as any);\r\n    (e as any).type = 'panelclose';\r\n    (e as any).target = element[0];\r\n    element.trigger(e);\r\n}", "\uFEFFimport { alertDialog } from \"./dialogs\";\r\nimport { htmlEncode } from \"./html\";\r\nimport { notifyError } from \"./notify\";\r\nimport { ServiceError } from \"./servicetypes\";\r\n\r\nexport namespace ErrorHandling {\r\n\r\n    export function showServiceError(error: ServiceError) {\r\n        let msg: any;\r\n        if (error == null) {\r\n            msg = '??ERROR??';\r\n        }\r\n        else {\r\n            msg = error.Message;\r\n            if (msg == null) {\r\n                msg = error.Code;\r\n            }\r\n        }\r\n\r\n        alertDialog(msg);\r\n    }\r\n\r\n    export function runtimeErrorHandler(message: string, filename?: string,\r\n        lineno?: number, colno?: number, error?: Error) {\r\n        try {\r\n            var host = (window.location.host || \"\").toLowerCase();\r\n            if (host.indexOf(\"localhost\") < 0 &&\r\n                host.indexOf(\"127.0.0.1\") < 0)\r\n                return;\r\n\r\n            if (!window['toastr'])\r\n                return;\r\n\r\n            var errorInfo = JSON.stringify(error || {});\r\n\r\n            message =\r\n                '<p></p><p>Message: ' + htmlEncode(message) +\r\n                '</p><p>File: ' + htmlEncode(filename) +\r\n                ', Line: ' + lineno + ', Column: ' + colno +\r\n                (errorInfo != \"{}\" ? '</p><p>Error: ' : \"\") + '</p>';\r\n\r\n            window.setTimeout(function () {\r\n                try {\r\n                    notifyError(message, \"SCRIPT ERROR! See browser console (F12) for details.\", {\r\n                        escapeHtml: false,\r\n                        timeOut: 15000\r\n                    });\r\n                }\r\n                catch {\r\n                }\r\n            });\r\n        }\r\n        catch {\r\n        }\r\n    }\r\n}", "\uFEFFimport { extend } from \"./system\"\r\n\r\nexport interface JQBlockUIOptions {\r\n    useTimeout?: boolean;   \r\n}  \r\n\r\nlet blockUICount: number = 0;\r\n\r\nfunction blockUIWithCheck(opt: JQBlockUIOptions) {\r\n    if (blockUICount > 0) {\r\n        blockUICount++;\r\n        return;\r\n    }\r\n\r\n    if (($ as any).blockUI) {\r\n        ($ as any).blockUI(opt);\r\n    }\r\n    else {\r\n        $('<div class=\"blockUI blockOverlay\" style=\"z-index: 2000; border: none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0; cursor: wait; position: fixed;\"></div>')\r\n            .appendTo(document.body);\r\n    }\r\n    blockUICount++;\r\n}\r\n\r\n/**\r\n * Uses jQuery BlockUI plugin to block access to whole page (default) or \r\n * a part of it, by using a transparent overlay covering the whole area.\r\n * @param options Parameters for the BlockUI plugin\r\n * @remarks If options are not specified, this function blocks \r\n * whole page with a transparent overlay. Default z-order of the overlay\r\n * div is 2000, so a higher z-order shouldn't be used in page.\r\n */\r\nexport function blockUI(options: JQBlockUIOptions) {\r\n    options = extend(<any>{\r\n        baseZ: 2000,\r\n        message: '',\r\n        overlayCSS: {\r\n            opacity: '0.0',\r\n            zIndex: 2000,\r\n            cursor: 'wait'\r\n        }, fadeOut: 0\r\n    }, options);\r\n\r\n    if (options.useTimeout) {\r\n        window.setTimeout(function () {\r\n            blockUIWithCheck(options);\r\n        }, 0);\r\n    }\r\n    else {\r\n        blockUIWithCheck(options);\r\n    }\r\n}\r\n\r\nexport function blockUndo() {\r\n    if (blockUICount > 1) {\r\n        blockUICount--;\r\n        return;\r\n    }\r\n\r\n    blockUICount--;\r\n    if (($ as any).unblockUI)\r\n        ($ as any).unblockUI({ fadeOut: 0 });\r\n    else \r\n        $(document.body).children('.blockUI.blockOverlay').remove();\r\n}", "\uFEFFimport { extend } from \"./system\";\r\nimport { Config } from \"./config\"\r\nimport { ErrorHandling } from \"./errorhandling\";\r\nimport { alertDialog, iframeDialog } from \"./dialogs\";\r\nimport { blockUI, blockUndo } from \"./blockui\";\r\nimport { ListRequest, ServiceOptions, ServiceResponse } from \"./servicetypes\";\r\n\r\nexport function getCookie(name: string) {\r\n    if (($ as any).cookie)\r\n        return ($ as any).cookie(name);\r\n\r\n    name += '=';\r\n    for (var ca = document.cookie.split(/;\\s*/), i = ca.length - 1; i >= 0; i--)\r\n        if (!ca[i].indexOf(name))\r\n            return ca[i].replace(name, '');\r\n}\r\n\r\ntypeof $ != 'undefined' && $.ajaxSetup && $.ajaxSetup({\r\n    beforeSend: function (xhr, opt) {\r\n        if (!opt || !opt.crossDomain) {\r\n            var token = getCookie('CSRF-TOKEN');\r\n            if (token)\r\n                xhr.setRequestHeader('X-CSRF-TOKEN', token);\r\n        }\r\n    }\r\n});\r\n\r\nexport function serviceCall<TResponse extends ServiceResponse>(options: ServiceOptions<TResponse>) {\r\n    let handleError = function (response: any) {\r\n        if (Config.notLoggedInHandler != null &&\r\n            response &&\r\n            response.Error &&\r\n            response.Error.Code == 'NotLoggedIn' &&\r\n            Config.notLoggedInHandler(options, response)) {\r\n            return;\r\n        }\r\n\r\n        if (options.onError != null) {\r\n            options.onError(response);\r\n            return;\r\n        }\r\n\r\n        ErrorHandling.showServiceError(response.Error);\r\n    };\r\n\r\n    var url = options.service;\r\n    if (url && url.length && url.charAt(0) != '~' && url.charAt(0) != '/' && url.indexOf('://') < 0)\r\n        url = resolveUrl(\"~/Services/\") + url;\r\n\r\n    options = extend<ServiceOptions<TResponse>>({\r\n        dataType: 'json',\r\n        contentType: 'application/json',\r\n        type: 'POST',\r\n        cache: false,\r\n        blockUI: true,\r\n        url: url,\r\n        data: JSON.stringify(options.request),\r\n        success: function (data: any, textStatus: string, request: any) {\r\n            try {\r\n                if (!data.Error && options.onSuccess) {\r\n                    options.onSuccess(data);\r\n                }\r\n            }\r\n            finally {\r\n                if (options.blockUI) {\r\n                    blockUndo();\r\n                }\r\n                options.onCleanup && options.onCleanup();\r\n            }\r\n        },\r\n        error: function (xhr: any, status: any, ev: any) {\r\n            try {\r\n                if (xhr.status === 403) {\r\n                    var l: any = null;\r\n                    try {\r\n                        l = xhr.getResponseHeader('Location');\r\n                    }\r\n                    catch ($t1) {\r\n                        l = null;\r\n                    }\r\n                    if (l) {\r\n                        window.top.location.href = l;\r\n                        return;\r\n                    }\r\n                }\r\n                if ((xhr.getResponseHeader('content-type') || '')\r\n                    .toLowerCase().indexOf('application/json') >= 0) {\r\n                    var json = $.parseJSON(xhr.responseText);\r\n                    if (json && json.Error) {\r\n                        handleError(json);\r\n                        return;\r\n                    }\r\n                }\r\n                var html = xhr.responseText;\r\n                if (!html) {\r\n                    if (!xhr.status) {\r\n                        if (xhr.statusText != \"abort\")\r\n                            alertDialog(\"An unknown AJAX connection error occurred! Check browser console for details.\");\r\n                    }\r\n                    else if (xhr.status == 500)\r\n                        alertDialog(\"HTTP 500: Connection refused! Check browser console for details.\");\r\n                    else\r\n                        alertDialog(\"HTTP \" + xhr.status + ' error! Check browser console for details.');\r\n                }\r\n                else\r\n                    iframeDialog({ html: html });\r\n            }\r\n            finally {\r\n                if (options.blockUI) {\r\n                    blockUndo();\r\n                }\r\n                options.onCleanup && options.onCleanup();\r\n            }\r\n        }\r\n    }, options);\r\n\r\n    if (options.blockUI) {\r\n        blockUI(null);\r\n    }\r\n\r\n    return $.ajax(options);\r\n}\r\n\r\nexport function serviceRequest<TResponse extends ServiceResponse>(service: string, request?: any,\r\n    onSuccess?: (response: TResponse) => void, options?: ServiceOptions<TResponse>) {\r\n    return serviceCall(extend<ServiceOptions<TResponse>>({\r\n        service: service,\r\n        request: request,\r\n        onSuccess: onSuccess\r\n    }, options));\r\n}\r\n\r\nexport function setEquality(request: ListRequest, field: string, value: any) {\r\n    if (request.EqualityFilter == null) {\r\n        request.EqualityFilter = {};\r\n    }\r\n    request.EqualityFilter[field] = value;\r\n}\r\n\r\nexport interface PostToServiceOptions {\r\n    url?: string;\r\n    service?: string;\r\n    target?: string;\r\n    request: any;\r\n}\r\n\r\nexport interface PostToUrlOptions {\r\n    url?: string;\r\n    target?: string;\r\n    params: any;\r\n}\r\n\r\nexport function parseQueryString(s?: string): {} {\r\n    let qs: string;\r\n    if (s === undefined)\r\n        qs = location.search.substring(1, location.search.length);\r\n    else\r\n        qs = s || '';\r\n    let result = {};\r\n    let parts = qs.split('&');\r\n    for (let i = 0; i < parts.length; i++) {\r\n        let pair = parts[i].split('=');\r\n        let name = decodeURIComponent(pair[0]);\r\n        result[name] = (pair.length >= 2 ? decodeURIComponent(pair[1]) : name);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function postToService(options: PostToServiceOptions) {\r\n    let form = $('<form/>')\r\n        .attr('method', 'POST')\r\n        .attr('action', options.url ? (resolveUrl(options.url)) : resolveUrl('~/Services/' + options.service))\r\n        .appendTo(document.body);\r\n    if (options.target)\r\n        form.attr('target', options.target);\r\n    let div = $('<div/>').appendTo(form);\r\n    $('<input/>').attr('type', 'hidden').attr('name', 'request')\r\n        .val($['toJSON'](options.request))\r\n        .appendTo(div);\r\n    var csrfToken = getCookie('CSRF-TOKEN');\r\n    if (csrfToken) {\r\n        $('<input/>').attr('type', 'hidden').attr('name', '__RequestVerificationToken')\r\n            .appendTo(div).val(csrfToken);\r\n    }\r\n    $('<input/>').attr('type', 'submit')\r\n        .appendTo(div);\r\n    form.submit();\r\n    window.setTimeout(function () { form.remove(); }, 0);\r\n}\r\n\r\nexport function postToUrl(options: PostToUrlOptions) {\r\n    let form = $('<form/>')\r\n        .attr('method', 'POST')\r\n        .attr('action', resolveUrl(options.url))\r\n        .appendTo(document.body);\r\n    if (options.target)\r\n        form.attr('target', options.target);\r\n    let div = $('<div/>').appendTo(form);\r\n    if (options.params != null) {\r\n        for (let k in options.params) {\r\n            $('<input/>').attr('type', 'hidden').attr('name', k)\r\n                .val(options.params[k])\r\n                .appendTo(div);\r\n        }\r\n    }\r\n    var csrfToken = getCookie('CSRF-TOKEN');\r\n    if (csrfToken) {\r\n        $('<input/>').attr('type', 'hidden').attr('name', '__RequestVerificationToken')\r\n            .appendTo(div).val(csrfToken);\r\n    }\r\n    $('<input/>').attr('type', 'submit')\r\n        .appendTo(div);\r\n    form.submit();\r\n    window.setTimeout(function () { form.remove(); }, 0);\r\n}\r\n\r\nexport function resolveUrl(url: string) {\r\n    if (url && url.substr(0, 2) === '~/') {\r\n        return Config.applicationPath + url.substr(2);\r\n    }\r\n\r\n    return url;\r\n}", "\uFEFFimport { padLeft, startsWith, trim, trimToNull, zeroPad } from \"./strings\";\r\nimport { getInstanceType } from \"./system\";\r\n\r\nexport interface NumberFormat {\r\n    decimalSeparator: string;\r\n    groupSeparator?: string;\r\n    decimalDigits?: number;\r\n    positiveSign?: string;\r\n    negativeSign?: string;\r\n    nanSymbol?: string;\r\n    percentSymbol?: string;\r\n    currencySymbol?: string;\r\n}\r\n\r\nexport interface DateFormat {\r\n    dateSeparator?: string;\r\n    dateFormat?: string;\r\n    dateOrder?: string;\r\n    dateTimeFormat?: string;\r\n    amDesignator?: string;\r\n    pmDesignator?: string;\r\n    timeSeparator?: string;\r\n    firstDayOfWeek?: number;\r\n    dayNames?: string[];\r\n    shortDayNames?: string[];\r\n    minimizedDayNames?: string[];\r\n    monthNames?: string[];\r\n    shortMonthNames?: string[];\r\n}\r\n\r\nexport interface Locale extends NumberFormat, DateFormat {\r\n    stringCompare?: (a: string, b: string) => number;\r\n    toUpper?: (a: string) => string;\r\n}\r\n\r\nexport let Invariant: Locale = {\r\n    decimalSeparator: '.',\r\n    groupSeparator: ',',\r\n    decimalDigits: 2,\r\n    negativeSign: '-',\r\n    positiveSign: '+',\r\n    percentSymbol: '%',\r\n    currencySymbol: '$',\r\n    dateSeparator: '/',\r\n    dateOrder: 'mdy',\r\n    dateFormat: 'MM/dd/yyyy',\r\n    dateTimeFormat: 'MM/dd/yyyy HH:mm:ss',\r\n    amDesignator: 'AM',\r\n    pmDesignator: 'PM',\r\n    timeSeparator: ':',\r\n    firstDayOfWeek: 0,\r\n    dayNames: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\r\n    shortDayNames: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n    minimizedDayNames: ['Su','Mo','Tu','We','Th','Fr','Sa'],\r\n    monthNames: ['January','February','March','April','May','June','July','August','September','October','November','December',''],\r\n    shortMonthNames: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec',''],\r\n    stringCompare: (a, b) => a < b ? -1 : (a > b ? 1 : 0)\r\n}\r\n\r\nexport function compareStringFactory(order: string): ((a: string, b: string) => number) {\r\n\r\n    var o: { [key: string]: number } = {};\r\n    for (let z = 0; z < order.length; z++) {\r\n        o[order.charAt(z)] = z + 1;\r\n    }\r\n\r\n    return function(a: string, b: string) {\r\n        a = a || \"\";\r\n        b = b || \"\";\r\n        if (a == b)\r\n            return 0;\r\n        \r\n        for (let i = 0, _len = Math.min(a.length, b.length); i < _len; i++) {\r\n            let x = a.charAt(i), y = b.charAt(i);\r\n            if (x === y)\r\n                continue;\r\n            let ix = o[x], iy = o[y];\r\n            if (ix != null && iy != null)\r\n                return ix < iy ? -1 : 1;\r\n            let c = x.localeCompare(y);\r\n            if (c == 0)\r\n                continue;\r\n            return c;\r\n        }\r\n        return a.localeCompare(b);\r\n    }\r\n}       \r\n\r\nexport let Culture: Locale = {\r\n    decimalSeparator: '.',\r\n    groupSeparator: ',',\r\n    dateSeparator: '/',\r\n    dateOrder: 'dmy',\r\n    dateFormat: 'dd/MM/yyyy',\r\n    dateTimeFormat: 'dd/MM/yyyy HH:mm:ss',\r\n    stringCompare: compareStringFactory(\"AaBbCc\u00C7\u00E7FfGg\u011E\u011FHhI\u0131\u0130iJjKkLlMmNnOo\u00D6\u00F6PpRrSs\u015E\u015FTtUu\u00DC\u00FCVvYyZz\")\r\n};\r\n\r\n(function() {\r\n    let k: string;\r\n    for (k in Invariant)\r\n        if (Culture[k] === undefined && Object.prototype.hasOwnProperty.call(Invariant, k))\r\n            Culture[k] = Invariant[k];\r\n\r\n    if (typeof document !== \"undefined\" && (k = trimToNull((document.querySelector('script#ScriptCulture') || {}).innerHTML)) != null) {\r\n        var sc = JSON.parse(k);\r\n        if (sc.DecimalSeparator != null)\r\n            Culture.decimalSeparator = sc.DecimalSeparator;\r\n        if (sc.GroupSeparator != null && sc.GroupSeparator != Culture.decimalSeparator)\r\n            Culture.groupSeparator = sc.GroupSeparator;\r\n        else if (Culture.groupSeparator == Culture.decimalSeparator)\r\n            Culture.groupSeparator = Culture.decimalSeparator == '.' ? ',' : '.';\r\n\r\n        delete sc.groupSeparator;\r\n        delete sc.decimal;\r\n        for (k in sc) {\r\n            if (Culture[k] === undefined && Object.prototype.hasOwnProperty.call(sc, k))\r\n                Culture[k.charAt(0).toLowerCase() + k.substr(1)] = sc[k];\r\n        }\r\n    }\r\n})();\r\n\r\n// for backwards compatibility\r\nexport function turkishLocaleToUpper(a: string): string {\r\n    if (!a)\r\n        return a;\r\n    return a.replace(/i/g, '\u0130').replace(/\u0131/g, 'I').toUpperCase();\r\n}\r\n\r\n// for backwards compatibility\r\nexport let turkishLocaleCompare = Culture.stringCompare;\r\n\r\nfunction insertGroupSeperator(num: string, dec: string, grp: string, neg: string) {\r\n    var decPart = null;\r\n    var decIndex = num.indexOf(dec);\r\n    if (decIndex > 0) {\r\n        decPart = num.substr(decIndex);\r\n        num = num.substr(0, decIndex);\r\n    }\r\n\r\n    var negative = startsWith(num, neg);\r\n    if (negative) {\r\n        num = num.substr(1);\r\n    }\r\n\r\n    var groupSize = 3;\r\n    if (num.length < groupSize) {\r\n        return (negative ? neg : '') + (decPart ? num + decPart : num);\r\n    }\r\n\r\n    var index = num.length;\r\n    var s = '';\r\n    var done = false;\r\n    while (!done) {\r\n        var length = groupSize;\r\n        var startIndex = index - length;\r\n        if (startIndex < 0) {\r\n            groupSize += startIndex;\r\n            length += startIndex;\r\n            startIndex = 0;\r\n            done = true;\r\n        }\r\n\r\n        if (!length)\r\n            break;\r\n\r\n        var part = num.substr(startIndex, length);\r\n        if (s.length)\r\n            s = part + grp + s;\r\n        else \r\n            s = part;\r\n        index -= length;\r\n    }\r\n\r\n    if (negative) \r\n        s = '-' + s;\r\n    return decPart ? s + decPart : s;\r\n}\r\n\r\nvar _formatRE = /\\{\\{|\\}\\}|\\{[^\\}\\{]+\\}/g;\r\n\r\nfunction _formatString(format: string, l: Locale, values: IArguments, from: number) {\r\n\r\n    return format.replace(_formatRE,\r\n        function (m) {\r\n            if (m === '{{' || m === '}}')\r\n                return m.charAt(0);\r\n            var index = parseInt(m.substr(1), 10);\r\n            var value = values[index + from];\r\n            if (value == null) {\r\n                return '';\r\n            }\r\n            var type = getInstanceType(value);\r\n            if (type == Number || type == Date) {\r\n                var formatSpec = null;\r\n                var formatIndex = m.indexOf(':');\r\n                if (formatIndex > 0) {\r\n                    formatSpec = m.substring(formatIndex + 1, m.length - 1);\r\n                }\r\n                return _formatObject(value, formatSpec, l);\r\n            }\r\n            else {\r\n                return value.toString();\r\n            }\r\n        });\r\n};\r\n\r\n\r\nexport function format(format: string, ...prm: any[]): string {\r\n    return _formatString(format, Culture, arguments, 1);\r\n}\r\n\r\nexport function localeFormat(format: string, l: Locale, ...prm: any[]): string {\r\n    return _formatString(format, l, arguments, 2);\r\n}\r\n\r\nfunction _formatObject(obj: any, format: string, fmt?: Locale): string {\r\n    if (typeof (obj) === 'number')\r\n        return formatNumber(obj, format, fmt);\r\n    else if (Object.prototype.toString.call(obj) === '[object Date]')\r\n        return formatDate(obj, format, fmt);\r\n    else\r\n        return obj.format(format);\r\n};\r\n\r\nexport let round = (n: number, d?: number, rounding?: boolean) => {\r\n    var m = Math.pow(10, d || 0);\r\n    n *= m;\r\n    var sign = ((n > 0) as any) | -(n < 0);\r\n    if (n % 1 === 0.5 * sign) {\r\n        var f = Math.floor(n);\r\n        return (f + (rounding ? (sign > 0) as any : (f % 2 * sign))) / m;\r\n    }\r\n\r\n    return Math.round(n) / m;\r\n};\r\n\r\nexport let trunc = (n: number): number => n != null ? (n > 0 ? Math.floor(n) : Math.ceil(n)) : null;\r\n\r\nexport function formatNumber(num: number, format?: string, decOrLoc?: string | NumberFormat, grp?: string): string {\r\n    \r\n    if (num == null)\r\n        return \"\";\r\n    \r\n    var fmt: NumberFormat = typeof decOrLoc !== \"string\" ? (decOrLoc ?? Culture) : {\r\n        decimalSeparator: decOrLoc,\r\n        groupSeparator: grp ?? (decOrLoc == \",\" ? \".\" : \",\")\r\n    }\r\n    \r\n    if (isNaN(num)) {\r\n        return fmt.nanSymbol ?? Culture.nanSymbol;\r\n    }\r\n    \r\n    if (format == null || (format.length == 0) || (format == 'i')) {\r\n        return num.toString();\r\n    }\r\n\r\n    var dec = fmt.decimalSeparator ?? Culture.decimalSeparator;\r\n    grp = grp ?? fmt.groupSeparator ?? Culture.groupSeparator;\r\n    var neg = fmt.negativeSign ?? Culture.negativeSign;\r\n\r\n    var s = '';\r\n    var precision = -1;\r\n\r\n    if (format.length > 1) {\r\n        precision = parseInt(format.substr(1), 10);\r\n    }\r\n    \r\n    var fs = format.charAt(0);\r\n    switch (fs) {\r\n        case 'd': \r\n        case 'D':\r\n            s = parseInt(Math.abs(num) as any).toString();\r\n            if (precision != -1)\r\n                s = padLeft(s, precision, '0');\r\n            if (num < 0)\r\n                s = neg + s;\r\n            break;\r\n        case 'x': case 'X':\r\n            s = parseInt(Math.abs(num) as any).toString(16);\r\n            if (fs == 'X')\r\n                s = s.toUpperCase();\r\n            if (precision != -1)\r\n                s = padLeft(s, precision, '0');\r\n            break;\r\n        case 'e': \r\n        case 'E':\r\n            if (precision == -1)\r\n                s = num.toExponential();\r\n            else\r\n                s = num.toExponential(precision);\r\n            if (fs == 'E')\r\n                s = s.toUpperCase();\r\n            break;\r\n        case 'f': \r\n        case 'F':\r\n        case 'n':\r\n        case 'N':\r\n            if (precision == -1) {\r\n                precision = fmt.decimalDigits ?? Culture.decimalDigits;\r\n            }\r\n            s = num.toFixed(precision).toString();\r\n            if (precision && (dec != '.')) {\r\n                var index = s.indexOf('.');\r\n                s = s.substr(0, index) + dec + s.substr(index + 1);\r\n            }\r\n            if ((fs == 'n') || (fs == 'N')) {\r\n                s = insertGroupSeperator(s, dec, grp, neg);\r\n            }\r\n            break;\r\n        case 'c': case 'C':\r\n        case 'p': case 'P':\r\n            if (precision == -1) {\r\n                precision = fmt.decimalDigits ?? Culture.decimalDigits;\r\n            }\r\n            if (fs === 'p' || fs == 'P')\r\n                num *= 100;\r\n            s = Math.abs(num).toFixed(precision).toString();\r\n            if (precision && (dec != '.')) {\r\n                var index = s.indexOf('.');\r\n                s = s.substr(0, index) + dec + s.substr(index + 1);\r\n            }\r\n            s = insertGroupSeperator(s, dec, grp, neg);\r\n            s = localeFormat(\"0\", fmt, s);\r\n            break;\r\n            \r\n        default:\r\n            var prefix = '';\r\n            var mid = '';\r\n            var suffix = '';\r\n            var endPrefix = false;\r\n            var inQuote = false;\r\n            for (var i = 0; i < format.length; i++) {\r\n                var c = format.charAt(i);\r\n                if (c == \"'\") {\r\n                    inQuote = !inQuote;\r\n                    continue;\r\n                }\r\n                else if (!inQuote) {\r\n                    if (c == '\\\\') {\r\n                        var c = (format.charAt(i + 1) || '');\r\n                        i++;\r\n                    }\r\n                    else if (c == '#' || c == ',' || c == '.' || c == '0') {\r\n                        endPrefix = true;\r\n                        mid += c;\r\n                        continue;\r\n                    }\r\n                }\r\n                endPrefix ? (suffix += c) : (prefix += c);\r\n            }\r\n\r\n            format = mid;\r\n\r\n            let r = \"\";\r\n            if (format.indexOf(\".\") > -1) {\r\n                let dp = dec;\r\n                let df = format.substring(format.lastIndexOf(\".\") + 1);\r\n                num = roundNumber(num, df.length);\r\n                let dv = num % 1;\r\n                let ds = new String(dv.toFixed(df.length));\r\n                ds = ds.substring(ds.lastIndexOf(\".\") + 1);\r\n                for (let i = 0; i < df.length; i++) {\r\n                    if (df.charAt(i) == '#' && ds.charAt(i) != '0') {\r\n                        dp += ds.charAt(i);\r\n                        continue;\r\n                    }\r\n                    else if (df.charAt(i) == '#' && ds.charAt(i) == '0') {\r\n                        let notParsed = ds.substring(i);\r\n                        if (notParsed.match('[1-9]')) {\r\n                            dp += ds.charAt(i);\r\n                            continue;\r\n                        }\r\n                        else\r\n                            break;\r\n                    }\r\n                    else if (df.charAt(i) == \"0\")\r\n                        dp += ds.charAt(i);\r\n                    else\r\n                        dp += df.charAt(i);\r\n                }\r\n                r += dp;\r\n            }\r\n            else\r\n                num = Math.round(num);\r\n    \r\n            let ones = Math.floor(num);\r\n            if (num < 0)\r\n                ones = Math.ceil(num);\r\n            let of = \"\";\r\n            if (format.indexOf(\".\") == -1)\r\n                of = format;\r\n            else\r\n                of = format.substring(0, format.indexOf(\".\"));\r\n    \r\n            let op = \"\";\r\n            if (!(ones == 0 && of.substr(of.length - 1) == '#')) {\r\n                // find how many digits are in the group\r\n                let oneText = new String(Math.abs(ones));\r\n                let gl = 9999;\r\n                if (of.lastIndexOf(\",\") != -1)\r\n                    gl = of.length - of.lastIndexOf(\",\") - 1;\r\n                let gc = 0;\r\n                for (let i = oneText.length - 1; i > -1; i--) {\r\n                    op = oneText.charAt(i) + op;\r\n                    gc++;\r\n                    if (gc == gl && i != 0) {\r\n                        op = grp + op;\r\n                        gc = 0;\r\n                    }\r\n                }\r\n    \r\n                // account for any pre-data padding\r\n                if (of.length > op.length) {\r\n                    let padStart = of.indexOf('0');\r\n                    if (padStart != -1) {\r\n                        let padLen = of.length - padStart;\r\n                        // pad to left with 0's or group char\r\n                        let pos = of.length - op.length - 1;\r\n                        while (op.length < padLen) {\r\n                            let pc = of.charAt(pos);\r\n                            // replace with real group char if needed\r\n                            if (pc == ',')\r\n                                pc = grp;\r\n                            op = pc + op;\r\n                            pos--;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (!op && of.indexOf('0', of.length - 1) !== -1)\r\n                op = '0';\r\n    \r\n            r = op + r;\r\n            if (num < 0)\r\n                r = neg + r;\r\n    \r\n            if (r.lastIndexOf(dec) == r.length - 1) {\r\n                r = r.substring(0, r.length - 1);\r\n            }\r\n    \r\n            return prefix + r + suffix;\r\n    }\r\n\r\n    return s;\r\n}\r\n\r\nexport function parseInteger(s: string): number {\r\n    s = trim(s.toString());\r\n    let ts = Culture.groupSeparator;\r\n    if (s && s.length && s.indexOf(ts) > 0) {\r\n        s = s.replace(new RegExp(\"(\\\\b\\\\d{1,3})\\\\\" + ts + \"(?=\\\\d{3}(\\\\D|$))\", \"g\"), '$1');\r\n    }\r\n    if (!(/^[-\\+]?\\d+$/.test(s)))\r\n        return NaN;\r\n    return parseInt(s, 10);\r\n}\r\n\r\nexport function parseDecimal(s: string): number {\r\n    if (s == null)\r\n        return null;\r\n\r\n    s = trim(s.toString());\r\n    if (s.length == 0)\r\n        return null;\r\n\r\n    let ts = Culture.groupSeparator;\r\n\r\n    if (s && s.length && s.indexOf(ts) > 0) {\r\n        s = s.replace(new RegExp(\"(\\\\b\\\\d{1,3})\\\\\" + ts + \"(?=\\\\d{3}(\\\\D|$))\", \"g\"), '$1');\r\n    }\r\n\r\n    if (!(new RegExp(\"^\\\\s*([-\\\\+])?(\\\\d*)\\\\\" + Culture.decimalSeparator + \"?(\\\\d*)\\\\s*$\").test(s)))\r\n        return NaN;\r\n\r\n    return parseFloat(s.toString().replace(Culture.decimalSeparator, '.'));\r\n}\r\n\r\nfunction roundNumber(n: number, dec?: number): number {\r\n    let power = Math.pow(10, dec || 0);\r\n    let value = (Math.round(n * power) / power).toString();\r\n    // ensure the decimal places are there\r\n    if (dec > 0) {\r\n        let dp = value.indexOf(\".\");\r\n        if (dp == -1) {\r\n            value += '.';\r\n            dp = 0;\r\n        }\r\n        else {\r\n            dp = value.length - (dp + 1);\r\n        }\r\n        while (dp < dec) {\r\n            value += '0';\r\n            dp++;\r\n        }\r\n    }\r\n    return parseFloat(value);\r\n}\r\n\r\nexport function toId(id: any): any {\r\n    if (id == null)\r\n        return null;\r\n    if (typeof id == \"number\")\r\n        return id;\r\n    id = $.trim(id);\r\n    if (id == null || !id.length)\r\n        return null;\r\n    if (id.length >= 15 || !(/^-?\\d+$/.test(id)))\r\n        return id;\r\n    let v = parseInt(id, 10);\r\n    if (isNaN(v))\r\n        return id;\r\n    return v;\r\n}\r\n\r\nvar _dateFormatRE = /'.*?[^\\\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|\\//g;\r\n\r\nexport function formatDate(d: Date | string, format?: string, locale?: Locale) {\r\n    if (!d)\r\n        return '';\r\n\r\n    let date: Date;\r\n    if (typeof d == \"string\") {\r\n        var res = parseDate(d, locale == null ? null : locale.dateOrder);\r\n        if (!res)\r\n            return d;\r\n        date = res as Date;\r\n    }\r\n    else\r\n        date = d;\r\n\r\n    if (format == 'i') \r\n        return date.toString();\r\n    if (format == 'id')\r\n        return date.toDateString();\r\n    if (format == 'it')\r\n        return date.toTimeString();\r\n\r\n    \r\n    if (locale == null)\r\n        locale = Culture;\r\n\r\n    if (format == null || format == \"d\")\r\n        format = locale.dateFormat ?? Culture.dateFormat;\r\n    else if (format.length == 1) {\r\n        switch (format) {\r\n            case \"g\": format = (locale.dateTimeFormat ?? Culture.dateTimeFormat).replace(\":ss\", \"\"); break;\r\n            case \"G\": format = (locale.dateTimeFormat ?? Culture.dateTimeFormat); break;\r\n            case \"s\": format = \"yyyy-MM-ddTHH:mm:ss\"; break;\r\n            case 'd': format = (locale.dateFormat ?? Culture.dateFormat);\r\n            case 't': format = (locale.dateTimeFormat && locale.dateFormat) ? locale.dateTimeFormat.replace(locale.dateFormat + \" \", \"\") : \"HH:mm\"; break;\r\n            case 'u':\r\n            case 'U':\r\n                format = format == 'u' ? 'yyyy-MM-ddTHH:mm:ss.fffZ' : locale.dateTimeFormat ?? Culture.dateTimeFormat;\r\n                date = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(),\r\n                    date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());\r\n                break;\r\n        }\r\n    }\r\n\r\n    if (format.charAt(0) == '%') {\r\n        format = format.substr(1);\r\n    }\r\n\r\n    var re = _dateFormatRE;\r\n    var sb = [];\r\n\r\n    re.lastIndex = 0;\r\n    while (true) {\r\n        var index = re.lastIndex;\r\n        var match = re.exec(format);\r\n\r\n        sb.push(format.slice(index, match ? match.index : format.length));\r\n        if (!match) {\r\n            break;\r\n        }\r\n\r\n        var fs = match[0];\r\n        var part: any = fs;\r\n        switch (fs) {\r\n            case '/': \r\n                part = locale.dateSeparator ?? Culture.dateSeparator;\r\n                break;\r\n            case 'dddd':\r\n                part = (locale.dayNames ?? Culture.dayNames)[date.getDay()];\r\n                break;\r\n            case 'ddd':\r\n                part = (locale.shortDayNames ?? Culture.shortDayNames)[date.getDay()];\r\n                break;\r\n            case 'dd':\r\n                part = padLeft(date.getDate().toString(), 2, '0');\r\n                break;\r\n            case 'd':\r\n                part = date.getDate();\r\n                break;\r\n            case 'MMMM':\r\n                part = (locale.monthNames ?? Culture.monthNames)[date.getMonth()];\r\n                break;\r\n            case 'MMM':\r\n                part = (locale.shortMonthNames ?? Culture.shortMonthNames)[date.getMonth()];\r\n                break;\r\n            case 'MM':\r\n                part = padLeft(date.getMonth() + 1, 2, '0');\r\n                break;\r\n            case 'M':\r\n                part = (date.getMonth() + 1);\r\n                break;\r\n            case 'yyyy':\r\n                part = padLeft(date.getFullYear(), 4, '0');\r\n                break;\r\n            case 'yy':\r\n                part = padLeft(date.getFullYear() % 100, 2, '0');\r\n                break;\r\n            case 'y':\r\n                part = date.getFullYear() % 100;\r\n                break;\r\n            case 'h': case 'hh':\r\n                part = date.getHours() % 12;\r\n                if (!part) {\r\n                    part = '12';\r\n                }\r\n                else if (fs == 'hh') {\r\n                    part = padLeft(part, 2, '0');\r\n                }\r\n                break;\r\n            case 'HH':\r\n                part = padLeft(date.getHours(), 2, '0');\r\n                break;\r\n            case 'H':\r\n                part = date.getHours();\r\n                break;\r\n            case 'mm':\r\n                part = padLeft(date.getMinutes(), 2, '0');\r\n                break;\r\n            case 'm':\r\n                part = date.getMinutes();\r\n                break;\r\n            case 'ss':\r\n                part = padLeft(date.getSeconds().toString(), 2, '0');\r\n                break;\r\n            case 's':\r\n                part = date.getSeconds();\r\n                break;\r\n            case 't': case 'tt':\r\n                part = (date.getHours() < 12) ? (locale.amDesignator ?? Culture.amDesignator) : (locale.pmDesignator ?? Culture.pmDesignator);\r\n                if (fs == 't') {\r\n                    part = part.charAt(0);\r\n                }\r\n                break;\r\n            case 'fff':\r\n                part = padLeft(date.getMilliseconds(), 3, '0');\r\n                break;\r\n            case 'ff':\r\n                part = padLeft(date.getMilliseconds(), 3).substr(0, 2);\r\n                break;\r\n            case 'f':\r\n                part = padLeft(date.getMilliseconds(), 3).charAt(0);\r\n                break;\r\n            case 'z':\r\n            case 'Z':\r\n                part = date.getTimezoneOffset() / 60;\r\n                part = ((part >= 0) ? '-' : '+') + Math.floor(Math.abs(part));\r\n                break;\r\n            case 'zz': \r\n            case 'zzz':\r\n                part = date.getTimezoneOffset() / 60;\r\n                part = ((part >= 0) ? '-' : '+') +\r\n                    Math.floor(padLeft(Math.abs(part), 2, '0'));\r\n                if (fs == 'zzz') {\r\n                    part += (locale.timeSeparator ?? Culture.timeSeparator) +\r\n                        Math.abs(padLeft(date.getTimezoneOffset() % 60, 2, '0'));\r\n                }\r\n                break;\r\n            default:\r\n                if (part.charAt(0) == '\\'') {\r\n                    part = part.substr(1, part.length - 2).replace(/\\\\'/g, '\\'');\r\n                }\r\n                break;\r\n        }\r\n        sb.push(part);\r\n    }\r\n\r\n    return sb.join('');\r\n}\r\n\r\nexport function formatDayHourAndMin(n: number): string {\r\n    if (n === 0)\r\n        return '0';\r\n    else if (!n)\r\n        return '';\r\n    let days = Math.floor(n / 24 / 60);\r\n    let txt = \"\";\r\n    if (days > 0) {\r\n        txt += days.toString();\r\n    }\r\n    let mins = zeroPad(Math.floor((n % (24 * 60)) / (60)), 2) + ':' + zeroPad(n % 60, 2);\r\n    if (mins != '00:00') {\r\n        if (days > 0)\r\n            txt += \".\";\r\n        txt += mins;\r\n    }\r\n    return txt;\r\n}\r\n\r\nexport function formatISODateTimeUTC(d: Date): string {\r\n    if (d == null)\r\n        return \"\";\r\n    let zeropad = function (num: number) { return ((num < 10) ? '0' : '') + num; };\r\n    let str = d.getUTCFullYear() + \"-\" +\r\n        zeropad(d.getUTCMonth() + 1) + \"-\" +\r\n        zeropad(d.getUTCDate()) + \"T\" +\r\n        zeropad(d.getUTCHours()) + \":\" +\r\n        zeropad(d.getUTCMinutes());\r\n    let secs = Number(d.getUTCSeconds() + \".\" +\r\n        ((d.getUTCMilliseconds() < 100) ? '0' : '') +\r\n        zeropad(d.getUTCMilliseconds()));\r\n    str += \":\" + zeropad(secs) + \"Z\";\r\n    return str;\r\n}\r\n\r\nlet isoRegexp = /(\\d{4,})(?:-(\\d{1,2})(?:-(\\d{1,2})(?:[T ](\\d{1,2}):(\\d{1,2})(?::(\\d{1,2})(?:\\.(\\d+))?)?(?:(Z)|([+-])(\\d{1,2})(?::(\\d{1,2}))?)?)?)?)?/;\r\n\r\nexport function parseISODateTime(s: string): Date {\r\n    if (!s || !s.length)\r\n        return null;\r\n\r\n    s = s + \"\";\r\n    if (typeof (s) != \"string\" || s.length === 0)\r\n        return null;\r\n\r\n    let res = s.match(isoRegexp);\r\n    if (typeof (res) == \"undefined\" || res === null)\r\n        return null;\r\n\r\n    return new Date(s + (s.length == 10 ? \"T00:00:00\" : \"\"));\r\n}\r\n\r\nexport function parseHourAndMin(value: string) {\r\n    let v = trim(value);\r\n    if (v.length < 4 || v.length > 5)\r\n        return NaN;\r\n    let h: number, m: number;\r\n    if (v.charAt(1) == ':') {\r\n        h = parseInteger(v.substr(0, 1));\r\n        m = parseInteger(v.substr(2, 2));\r\n    }\r\n    else {\r\n        if (v.charAt(2) != ':')\r\n            return NaN;\r\n        h = parseInteger(v.substr(0, 2));\r\n        m = parseInteger(v.substr(3, 2));\r\n    }\r\n    if (isNaN(h) || isNaN(m) || h < 0 || h > 23 || m < 0 || m > 59)\r\n        return NaN;\r\n    return h * 60 + m;\r\n}\r\n\r\nexport function parseDayHourAndMin(s: string): number {\r\n    let days: number;\r\n    let v = trim(s);\r\n    if (!v)\r\n        return NaN;\r\n    let p = v.split('.');\r\n    if (p.length == 0 || p.length > 2)\r\n        return NaN;\r\n    if (p.length == 1) {\r\n        days = parseInteger(p[0]);\r\n        if (!isNaN(days))\r\n            return days * 24 * 60;\r\n        return parseHourAndMin(p[0]);\r\n    }\r\n    else {\r\n        days = parseInteger(p[0]);\r\n        let hm = parseHourAndMin(p[1]);\r\n        if (isNaN(days) || isNaN(hm))\r\n            return NaN;\r\n        return days * 24 * 60 + hm;\r\n    }\r\n}\r\n\r\nexport function parseDate(s: string, dateOrder?: string): any {\r\n    if (!s || !s.length)\r\n        return null;\r\n\r\n    if (s.length >= 10 && s.charAt(4) === '-' && s.charAt(7) === '-' &&\r\n        (s.length === 10 || (s.length > 10 && s.charAt(10) === 'T'))) {\r\n        var res = parseISODateTime(s);\r\n        if (res == null)\r\n            return false;\r\n        return res;\r\n    }\r\n\r\n    s = trim(s);\r\n    if (s.indexOf(' ') > 0 && s.indexOf(':') > s.indexOf(' ') + 1) {\r\n        var datePart = parseDate(s.substr(0, s.indexOf(' ')));\r\n        if (!datePart)\r\n            return false;\r\n        return parseISODateTime(formatDate(datePart, 'yyyy-MM-dd') + 'T' + trim(s.substr(s.indexOf(' ') + 1)));\r\n    }\r\n\r\n    let dateVal: any;\r\n    let dArray: any;\r\n    let d: number, m: number, y: number;\r\n    dArray = splitDateString(s);\r\n    if (!dArray)\r\n        return false;\r\n\r\n    if (dArray.length == 3) {\r\n        dateOrder = dateOrder || Culture.dateOrder;\r\n        switch (dateOrder) {\r\n            case \"dmy\":\r\n                d = parseInt(dArray[0], 10);\r\n                m = parseInt(dArray[1], 10) - 1;\r\n                y = parseInt(dArray[2], 10);\r\n                break;\r\n            case \"ymd\":\r\n                d = parseInt(dArray[2], 10);\r\n                m = parseInt(dArray[1], 10) - 1;\r\n                y = parseInt(dArray[0], 10);\r\n                break;\r\n            case \"mdy\":\r\n            default:\r\n                d = parseInt(dArray[1], 10);\r\n                m = parseInt(dArray[0], 10) - 1;\r\n                y = parseInt(dArray[2], 10);\r\n                break;\r\n        }\r\n\r\n        if (isNaN(d) || isNaN(m) || isNaN(y) || d < 1 || d > 31 || m < 0 || m > 11 || y > 9999 || y < 0)\r\n            return false;\r\n\r\n        if (y < 100) {\r\n            let fullYear = new Date().getFullYear();\r\n            let shortYearCutoff = (fullYear % 100) + 10;\r\n            y += fullYear - fullYear % 100 + (y <= shortYearCutoff ? 0 : -100);\r\n        }\r\n        try {\r\n            dateVal = new Date(y, m, d);\r\n            if (isNaN(dateVal.getFullYear()))\r\n                return false;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (dArray.length == 1) {\r\n        try {\r\n            dateVal = new Date(dArray[0]);\r\n            if (isNaN(dateVal.getFullYear()))\r\n                return false;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    return dateVal;\r\n}\r\n\r\nexport function splitDateString(s: string): string[] {\r\n    s = trim(s);\r\n    if (!s.length)\r\n        return;\r\n    if (s.indexOf(\"/\") >= 0)\r\n        return s.split(\"/\");\r\n    else if (s.indexOf(\".\") >= 0)\r\n        return s.split(\".\");\r\n    else if (s.indexOf(\"-\") >= 0)\r\n        return s.split(\"-\");\r\n    else if (s.indexOf(\"\\\\\") >= 0)\r\n        return s.split(\"\\\\\");\r\n    else\r\n        return [s];\r\n}", "\uFEFFimport { resolveUrl } from \"./services\";\r\nimport { startsWith, trimToNull } from \"./strings\";\r\nimport { blockUI, blockUndo } from \"./blockui\";\r\nimport { alertDialog, iframeDialog } from \"./dialogs\";\r\nimport { notifyError } from \"./notify\";\r\nimport { format } from \"./formatting\";\r\nimport { PropertyItem, PropertyItemsData } from \"./propertyitem\";\r\nimport { getStateStore } from \"./system\";\r\nimport { Lookup } from \"./lookup\";\r\n\r\nfunction getHash(key: string, reload?: boolean): string {\r\n    let k: string;\r\n\r\n    const stateStore = getStateStore();\r\n    if (stateStore.__scriptHash == null &&\r\n        typeof document !== \"undefined\" && \r\n        (k = trimToNull((document.querySelector('script#RegisteredScripts') || {}).innerHTML)) != null &&\r\n        k.charAt(0) == '{') {\r\n        var regs = JSON.parse(k);\r\n        ScriptData.setRegisteredScripts(regs);\r\n    }\r\n\r\n    if (stateStore.__scriptHash == null) {\r\n        if (reload)\r\n            stateStore.__scriptHash = {};\r\n        else\r\n            return null;\r\n    }\r\n\r\n    if (reload)\r\n        return (stateStore.__scriptHash[key] = new Date().getTime().toString());\r\n\r\n    return stateStore.__scriptHash[key];\r\n}\r\n\r\nfunction setHash(key: string, value: string): void {\r\n    getStateStore(\"__scriptHash\")[key] = value;\r\n}\r\n\r\nfunction getLoadedData(name: string): any {\r\n    return getStateStore(\"__scriptData\")[name];\r\n}\r\n\r\nfunction setLoadedData(name: string, value: any): void {\r\n    getStateStore(\"__scriptData\")[name] = value;\r\n}\r\n\r\nexport namespace ScriptData {\r\n    \r\n    export function bindToChange(name: string, regClass: string, onChange: () => void) {\r\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && ($(document.body) as any).bind('scriptdatachange.' + regClass, function (e: any, s: string) {\r\n            if (s == name) {\r\n                onChange();\r\n            }\r\n        });\r\n    }\r\n\r\n    export function triggerChange(name: string) {\r\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && $(document.body).triggerHandler('scriptdatachange', [name]);\r\n    }\r\n\r\n    export function unbindFromChange(regClass: string) {\r\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && $(document.body).unbind('scriptdatachange.' + regClass);\r\n    }\r\n\r\n    function loadOptions(name: string, async: boolean): JQueryAjaxSettings {\r\n        return {\r\n            async: async,\r\n            cache: true,\r\n            type: 'GET',\r\n            url: resolveUrl('~/DynJS.axd/') + name + '.js?v=' + (getHash(name) ?? new Date().getTime()),\r\n            data: null,\r\n            dataType: 'text',\r\n            converters: {\r\n                \"text script\": function (text: string) {\r\n                    return text;\r\n                }\r\n            },\r\n            success: function (data, textStatus, jqXHR) {\r\n                $.globalEval(data);\r\n            },\r\n            error: function (xhr, textStatus, errorThrown) {\r\n                var isLookup = startsWith(name, \"Lookup.\");\r\n                if (xhr.status == 403 && isLookup) {\r\n                    notifyError('<p>Access denied while trying to load the lookup: \"<b>' +\r\n                        name.substr(7) + '</b>\". Please check if current user has required permissions for this lookup.</p> ' +\r\n                        '<p><em>Lookups use the ReadPermission of their row by default. You may override that for the lookup ' +\r\n                        'like [LookupScript(\"Some.Lookup\", Permission = \"?\")] to grant all ' +\r\n                        'authenticated users to read it (or use \"*\" for public).</em></p>' + \r\n                        '<p><em>Note that this might be a security risk if the lookup contains sensitive data, ' +\r\n                        'so it could be better to set a separate permission for lookups, like \"MyModule:Lookups\".</em></p>', null, {\r\n                            timeOut: 10000,\r\n                            escapeHtml: false\r\n                        });\r\n                    return;\r\n                }\r\n\r\n                notifyError(\"An error occurred while trying to load \" +\r\n                    (isLookup ? ' the lookup: \"' + name.substr(7) :\r\n                        ' dynamic script: \"' + name) +\r\n                    '\"!. Please check the error message displayed in the dialog below for more info.');\r\n\r\n                var html = xhr.responseText;\r\n                if (!html) {\r\n                    if (!xhr.status)\r\n                        alertDialog(\"An unknown connection error occurred! Check browser console for details.\");\r\n                    else if (xhr.status == 500)\r\n                        alertDialog(\"HTTP 500: Connection refused! Check browser console for details.\");\r\n                    else\r\n                        alertDialog(\"HTTP \" + xhr.status + ' error! Check browser console for details.');\r\n                }\r\n                else\r\n                    iframeDialog({ html: html });\r\n            }\r\n        }\r\n    }\r\n\r\n    async function loadScriptAsync(name: string): Promise<any> {\r\n        blockUI(null);\r\n        return await Promise.resolve(\r\n            $.ajax(loadOptions(name, true))\r\n                .always(function () {\r\n                    blockUndo();\r\n                }));\r\n    }\r\n\r\n    function loadScriptData(name: string) {\r\n        $.ajax(loadOptions(name, false));\r\n    }\r\n\r\n    async function loadScriptDataAsync(name: string): Promise<any> {\r\n        return await loadScriptAsync(name);\r\n    }\r\n\r\n    function loadError(name: string) {\r\n        var message;\r\n\r\n        if (name != null &&\r\n            name.startsWith('Lookup.')) {\r\n            message = 'No lookup with key \"' + name.substring(7) + '\" is registered. Please make sure you have a' +\r\n                ' [LookupScript(\"' + name.substring(7) + '\")] attribute in server side code on top of a row / custom lookup and ' +\r\n                ' its key is exactly the same.';\r\n        } else {\r\n            message = format(\"Can't load script data: {0}!\", name);\r\n        }\r\n\r\n        notifyError(message);\r\n        throw new Error(message);\r\n    }\r\n\r\n    export function ensure(name: string) {\r\n        var data = getLoadedData(name);\r\n        if (data == null) {\r\n            loadScriptData(name);\r\n        }\r\n\r\n        data = getLoadedData(name);\r\n\r\n        if (data == null) \r\n            loadError(name);\r\n\r\n        return data;\r\n    }\r\n\r\n    export async function ensureAsync(name: string): Promise<any> {\r\n        var data = getLoadedData(name);\r\n        if (data != null)\r\n            return data;\r\n        await loadScriptDataAsync(name);\r\n        data = getLoadedData(name);\r\n        if (data == null)\r\n            loadError(name);\r\n        return data;\r\n    }\r\n\r\n    export function reload(name: string) {\r\n        getHash(name, true);\r\n        loadScriptData(name);\r\n        var data = getLoadedData(name);\r\n        return data;\r\n    }\r\n\r\n    export async function reloadAsync(name: string) {\r\n        getHash(name, true);\r\n        await loadScriptDataAsync(name);\r\n        return getLoadedData(name);\r\n    }\r\n\r\n    export function canLoad(name: string) {\r\n        return getLoadedData(name) != null || getHash(name) != null;\r\n    }\r\n\r\n    export function setRegisteredScripts(scripts: any[]) {\r\n        var t = new Date().getTime().toString();\r\n        for (var k in scripts) {\r\n            setHash(k, scripts[k] || t);\r\n        }\r\n    }\r\n\r\n    export function set(name: string, value: any) {\r\n        setLoadedData(name, value);\r\n        triggerChange(name);\r\n    }\r\n}\r\n\r\nexport function getRemoteData(key: string) {\r\n    return ScriptData.ensure('RemoteData.' + key);\r\n}\r\n\r\nexport async function getRemoteDataAsync(key: string): Promise<any> {\r\n    return await ScriptData.ensureAsync('RemoteData.' + key);\r\n}\r\n\r\nexport function getLookup<TItem>(key: string): Lookup<TItem> {\r\n    return ScriptData.ensure('Lookup.' + key);\r\n}\r\n\r\nexport async function getLookupAsync<TItem>(key: string): Promise<Lookup<TItem>> {\r\n    return await ScriptData.ensureAsync('Lookup.' + key);\r\n}\r\n\r\nexport function reloadLookup(key: string) {\r\n    ScriptData.reload('Lookup.' + key);\r\n}\r\n\r\nexport async function reloadLookupAsync(key: string): Promise<any> {\r\n    return await ScriptData.reloadAsync('Lookup.' + key);\r\n}\r\n\r\nexport function getColumns(key: string): PropertyItem[] {\r\n    return getColumnsData(key).items;\r\n}\r\n\r\nexport function getColumnsData(key: string): PropertyItemsData {\r\n    return ScriptData.ensure('Columns.' + key);\r\n}\r\n\r\nexport async function getColumnsAsync(key: string): Promise<PropertyItem[]> {\r\n    return (await getColumnsDataAsync(key)).items;\r\n}\r\n\r\nexport async function getColumnsDataAsync(key: string): Promise<PropertyItemsData> {\r\n    return ScriptData.ensureAsync('Columns.' + key);\r\n}\r\n\r\nexport function getForm(key: string): PropertyItem[] {\r\n    return getFormData(key).items;\r\n}\r\n\r\nexport function getFormData(key: string): PropertyItemsData {\r\n    return ScriptData.ensure('Form.' + key);\r\n}\r\n\r\nexport async function getFormAsync(key: string): Promise<PropertyItem[]> {\r\n    return (await getFormDataAsync(key)).items;\r\n}\r\n\r\nexport async function getFormDataAsync(key: string): Promise<PropertyItemsData> {\r\n    return await ScriptData.ensureAsync('Form.' + key);\r\n}\r\n\r\nexport function getTemplate(key: string): string {\r\n    return ScriptData.ensure('Template.' + key);\r\n}\r\n\r\nexport async function getTemplateAsync(key: string): Promise<string> {\r\n    return await ScriptData.ensureAsync('Template.' + key);\r\n}\r\n\r\nexport function canLoadScriptData(name: string): boolean {\r\n    return ScriptData.canLoad(name);\r\n}\r\n\r\nvar exported = {\r\n    canLoadScriptData,\r\n    getColumns,\r\n    getColumnsAsync,\r\n    getForm,\r\n    getFormAsync,\r\n    getLookup,\r\n    getLookupAsync,\r\n    getRemoteData, \r\n    getRemoteDataAsync,\r\n    getTemplate,\r\n    getTemplateAsync,\r\n    reloadLookup,\r\n    reloadLookupAsync,\r\n    ScriptData\r\n}\r\n\r\nif (typeof globalThis !== \"undefined\") {\r\n    const Q = (globalThis as any).Q || ((globalThis as any).Q = {});\r\n    for (var i in exported)\r\n        if (Q[i] == null)\r\n            Q[i] = exported[i];\r\n}", "\uFEFFimport { localText } from \"./localtext\";\r\nimport { notifyError } from \"./notify\";\r\nimport { getRemoteData } from \"./scriptdata\";\r\nimport { UserDefinition } from \"./userdefinition\";\r\n\r\nexport namespace Authorization {\r\n    export function hasPermission(permission: string) {\r\n        if (permission == null)\r\n            return false;\r\n\r\n        if (permission == \"*\")\r\n            return true;\r\n\r\n        if (permission == \"\" || permission == \"?\")\r\n            return isLoggedIn;\r\n\r\n        var ud = Authorization.userDefinition;\r\n        if (ud && ud.IsAdmin)\r\n            return true;\r\n\r\n        if (ud && ud.Permissions) {\r\n            var p = ud.Permissions;\r\n            if (p[permission])\r\n                return true;\r\n\r\n            var orParts = permission.split('|');\r\n            for (var r of orParts) {\r\n                if (!r)\r\n                    continue;\r\n\r\n                var andParts = r.split('&');\r\n                if (!andParts.length)\r\n                    continue;\r\n\r\n                let fail = false;\r\n                for (var n of andParts) {\r\n                    if (!p[n]) {\r\n                        fail = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!fail)\r\n                    return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    export function validatePermission(permission: string) {\r\n        if (!hasPermission(permission)) {\r\n            notifyError(localText(\"Authorization.AccessDenied\"));\r\n            throw new Error(localText(\"Authorization.AccessDenied\"));\r\n        }\r\n    }\r\n}\r\n\r\nexport declare namespace Authorization {\r\n    export let isLoggedIn: boolean;\r\n    export let username: string;\r\n    export let userDefinition: UserDefinition;\r\n}\r\n\r\nObject.defineProperty(Authorization, \"userDefinition\", {\r\n    get: function () {\r\n        return getRemoteData(\"UserData\");\r\n    },\r\n    configurable: true\r\n});\r\n\r\nObject.defineProperty(Authorization, \"isLoggedIn\", {\r\n    get: function () {\r\n        var ud = Authorization.userDefinition;\r\n        return ud && !!ud.Username;\r\n    },\r\n    configurable: true\r\n});\r\n\r\nObject.defineProperty(Authorization, \"username\", {\r\n    get: function () {\r\n        var ud = Authorization.userDefinition;\r\n        if (ud)\r\n            return ud.Username;\r\n\r\n        return null;\r\n    },\r\n    configurable: true\r\n});\r\n", "\uFEFFvar debounceMock: typeof debounce = null;\r\n\r\n/**\r\n * Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds. If `immediate` is passed, trigger the function on the\r\n * leading edge, instead of the trailing. The function also has a property 'clear'\r\n * that is a function which will clear the timer to prevent previously scheduled executions.\r\n *\r\n * @source underscore.js\r\n */\r\nexport function debounce(func: Function, wait?: number, immediate?: boolean) {\r\n    if (debounceMock)\r\n        return debounceMock.apply(this, arguments);\r\n\r\n    var timeout: any, args: IArguments, context: any, timestamp: number, result: any;\r\n    if (null == wait) wait = 100;\r\n\r\n    function later() {\r\n        var last = Date.now() - timestamp;\r\n\r\n        if (last < wait && last >= 0) {\r\n            timeout = setTimeout(later, wait - last);\r\n        } else {\r\n            timeout = null;\r\n            if (!immediate) {\r\n                result = func.apply(context, args);\r\n                context = args = null;\r\n            }\r\n        }\r\n    };\r\n\r\n    var debounced = function () {\r\n        context = this;\r\n        args = arguments;\r\n        timestamp = Date.now();\r\n        var callNow = immediate && !timeout;\r\n        if (!timeout) timeout = setTimeout(later, wait);\r\n        if (callNow) {\r\n            result = func.apply(context, args);\r\n            context = args = null;\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    (debounced as any).clear = function () {\r\n        if (timeout) {\r\n            clearTimeout(timeout);\r\n            timeout = null;\r\n        }\r\n    };\r\n\r\n    (debounced as any).flush = function () {\r\n        if (timeout) {\r\n            result = func.apply(context, args);\r\n            context = args = null;\r\n\r\n            clearTimeout(timeout);\r\n            timeout = null;\r\n        }\r\n    };\r\n\r\n    return debounced;\r\n};\r\n\r\nexport function mockDebounce(f: typeof debounce): void {\r\n    debounceMock = f;\r\n}", "\uFEFFexport {}\r\n\r\ninterface LayoutTimerReg {\r\n    handler: () => void;\r\n    element: () => HTMLElement;\r\n    width: boolean;\r\n    height: boolean;\r\n    storedWidth?: number;\r\n    storedHeight?: number;\r\n}\r\n\r\nexport namespace LayoutTimer {\r\n\r\n    var timeout: number;\r\n    var nextKey: number = 0;\r\n    var regCount: number = 0;\r\n    var regs: { [key: number]: LayoutTimerReg; } = {};\r\n\r\n    function startTimer() {\r\n        if (timeout == null && regCount > 0) {\r\n            timeout = window.setTimeout(onTimeout, 100);\r\n        }\r\n    }\r\n\r\n    function clearTimer() {\r\n        if (timeout != null) {\r\n            window.clearTimeout(timeout);\r\n            timeout = null;\r\n        }\r\n    }\r\n\r\n    function onTimeout() {\r\n        for (var key in regs) {\r\n            var reg = regs[key];\r\n            try {\r\n                var el = reg.element();\r\n                if (!el)\r\n                    continue;\r\n\r\n                var w = el.offsetWidth;\r\n                var h = el.offsetHeight;\r\n                try {\r\n\r\n                    if ((reg.width && reg.storedWidth !== w) ||\r\n                        (reg.height && reg.storedHeight !== h) ||\r\n                        (!reg.width && !reg.height && (!w !== !reg.storedWidth || !h !== !reg.storedHeight))) {\r\n                            if (w > 0 && h > 0) {\r\n                                try {\r\n                                    reg.handler();\r\n                                }\r\n                                finally {\r\n                                    w = el.offsetWidth;\r\n                                    h = el.offsetHeight;\r\n                                }\r\n                            }\r\n                    }\r\n                }\r\n                finally {\r\n                    reg.storedWidth = w;\r\n                    reg.storedHeight = h;\r\n                }\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n        clearTimer();\r\n        startTimer();\r\n    }\r\n\r\n    export function store(key: number) {\r\n        var reg = regs[key];\r\n        if (!reg)\r\n            return;\r\n\r\n        var el = reg.element();\r\n        if (!el)\r\n            return;\r\n\r\n        reg.storedWidth = el.offsetWidth;\r\n        reg.storedHeight = el.offsetHeight;\r\n    }\r\n\r\n    export function trigger(key: number) {\r\n        var reg = regs[key];\r\n        if (!reg)\r\n            return;\r\n        store(key);\r\n        if (reg.storedWidth >= 0 &&\r\n            reg.storedHeight >= 0) {\r\n            reg.handler();\r\n        }\r\n        store(key);\r\n    }\r\n\r\n    export function onSizeChange(element: () => HTMLElement, handler: () => void, width?: boolean, height?: boolean): number {\r\n        if (handler == null)\r\n            throw \"Layout handler can't be null!\";\r\n\r\n        regs[++nextKey] = {\r\n            element: element,\r\n            handler: handler,\r\n            width: width !== false,\r\n            height: height !== false\r\n        }\r\n        regCount++;\r\n        store(nextKey)\r\n        startTimer();\r\n        return nextKey;\r\n    }\r\n\r\n    export function onWidthChange(element: () => HTMLElement, handler: () => void) {\r\n        return onSizeChange(element, handler, true, false);\r\n    }\r\n\r\n    export function onHeightChange(element: () => HTMLElement, handler: () => void) {\r\n        return onSizeChange(element, handler, false, true);\r\n    }\r\n\r\n    export function onShown(element: () => HTMLElement, handler: () => void) {\r\n        return onSizeChange(element, handler, false, false);\r\n    }\r\n\r\n    export function off(key: number): number {\r\n        var reg = regs[key];\r\n        if (!reg) \r\n            return 0;\r\n            \r\n        delete regs[key];\r\n        regCount--;\r\n        if (regCount <= 0)\r\n            clearTimer();\r\n\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function executeOnceWhenVisible(element: JQuery, callback: Function): void {\r\n    var el = element && element[0];\r\n    if (!el)\r\n        return;\r\n    \r\n    if (el.offsetWidth > 0 && el.offsetHeight > 0) {\r\n        callback();\r\n        return;\r\n    }\r\n\r\n    var timer = LayoutTimer.onShown(() => el, () => {\r\n        LayoutTimer.off(timer);\r\n        callback();\r\n    });\r\n}\r\n\r\nexport function executeEverytimeWhenVisible(element: JQuery, callback: Function, callNowIfVisible: boolean): void {\r\n    var el = element && element[0];\r\n    if (!el)\r\n        return;\r\n    \r\n    if (callNowIfVisible && el.offsetWidth > 0 && el.offsetHeight > 0) {\r\n        callback();\r\n    }\r\n\r\n    LayoutTimer.onShown(() => el, () => {\r\n        callback();\r\n    });\r\n}\r\n", "\uFEFFimport { startsWith } from \"./strings\";\r\nimport { closePanel } from \"./dialogs\";\r\n\r\nexport interface HandleRouteEventArgs {\r\n    handled: boolean,\r\n    route: string,\r\n    parts: string[],\r\n    index: number\r\n}\r\n\r\nexport namespace Router {\r\n    let oldURL: string;\r\n    let resolving: number = 0;\r\n    let autoinc: number = 0;\r\n    let ignoreHash: number = 0;\r\n    let ignoreTime: number = 0;\r\n\r\n    export let enabled: boolean = true;\r\n\r\n    function isEqual(url1: string, url2: string) {\r\n        return url1 == url2 || url1 == url2 + '#' || url2 == url1 + '#';\r\n    }\r\n\r\n    export function navigate(hash: string, tryBack?: boolean, silent?: boolean) {\r\n        if (!enabled || resolving > 0)\r\n            return;\r\n\r\n        hash = hash || '';\r\n        hash = hash.replace(/^#/, '');\r\n        hash = (!hash ? \"\" : '#' + hash);\r\n        var newURL = window.location.href.replace(/#$/, '')\r\n            .replace(/#.*$/, '') + hash;\r\n        if (newURL != window.location.href) {\r\n            if (tryBack && oldURL != null && isEqual(oldURL, newURL)) {\r\n                if (silent)\r\n                    ignoreChange();\r\n\r\n                var prior = window.location.href;\r\n                oldURL = null;\r\n                window.history.back();\r\n                return;\r\n            }\r\n\r\n            if (silent)\r\n                ignoreChange();\r\n\r\n            oldURL = window.location.href;\r\n            window.location.hash = hash;\r\n        }\r\n    }\r\n\r\n    export function replace(hash: string, tryBack?: boolean) {\r\n        navigate(hash, tryBack, true);\r\n    }\r\n\r\n    export function replaceLast(hash: string, tryBack?: boolean) {\r\n        if (!enabled)\r\n            return;\r\n\r\n        var current = window.location.hash || '';\r\n        if (current.charAt(0) == '#')\r\n            current = current.substr(1, current.length - 1);\r\n\r\n        var parts = current.split('/+/');\r\n\r\n        if (parts.length > 1) {\r\n            if (hash && hash.length) {\r\n                parts[parts.length - 1] = hash;\r\n                hash = parts.join(\"/+/\");\r\n            }\r\n            else {\r\n                parts.splice(parts.length - 1, 1);\r\n                hash = parts.join(\"/+/\");\r\n            }\r\n        }\r\n        replace(hash, tryBack);\r\n    }\r\n\r\n    function visibleDialogs() {\r\n        return $('.ui-dialog-content:visible, .ui-dialog.panel-hidden>.ui-dialog-content, .s-Panel').toArray().sort((a, b) => {\r\n            return ($(a).data('qrouterorder') || 0) - ($(b).data('qrouterorder') || 0);\r\n        });\r\n    }\r\n\r\n    function dialogOpen(owner: JQuery, element: JQuery, hash: () => string) {\r\n        var route = [];\r\n        var isDialog = owner.hasClass(\".ui-dialog-content\") || owner.hasClass('.s-Panel');\r\n        var dialog = isDialog ? owner :\r\n            owner.closest('.ui-dialog-content, .s-Panel');\r\n        var value = hash();\r\n\r\n        var idPrefix: string;\r\n        if (dialog.length) {\r\n            var dialogs = visibleDialogs();\r\n            var index = dialogs.indexOf(dialog[0]);\r\n\r\n            for (var i = 0; i <= index; i++) {\r\n                var q = $(dialogs[i]).data(\"qroute\") as string;\r\n                if (q && q.length)\r\n                    route.push(q);\r\n            }\r\n\r\n            if (!isDialog) {\r\n                idPrefix = dialog.attr(\"id\");\r\n                if (idPrefix) {\r\n                    idPrefix += \"_\";\r\n                    var id = owner.attr(\"id\");\r\n                    if (id && startsWith(id, idPrefix))\r\n                        value = id.substr(idPrefix.length) + '@' + value;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var id = owner.attr(\"id\");\r\n            if (id && (!owner.hasClass(\"route-handler\") ||\r\n                $('.route-handler').first().attr(\"id\") != id))\r\n                value = id + \"@\" + value;\r\n        }\r\n\r\n        route.push(value);\r\n        element.data(\"qroute\", value);\r\n        replace(route.join(\"/+/\"));\r\n\r\n        element.bind(\"dialogclose.qrouter panelclose.qrouter\", e => {\r\n            element.data(\"qroute\", null);\r\n            element.unbind(\".qrouter\");\r\n            var prhash = element.data(\"qprhash\");\r\n            var tryBack = $(e.target).closest('.s-MessageDialog').length > 0 || (e && e.originalEvent &&\r\n                ((e.originalEvent.type == \"keydown\" && (e.originalEvent as any).keyCode == 27) ||\r\n                $(e.originalEvent.target).hasClass(\"ui-dialog-titlebar-close\") ||\r\n                $(e.originalEvent.target).hasClass(\"panel-titlebar-close\")));\r\n            if (prhash != null)\r\n                replace(prhash, tryBack);\r\n            else\r\n                replaceLast('', tryBack);\r\n        });\r\n    }\r\n\r\n    export function dialog(owner: JQuery, element: JQuery, hash: () => string) {\r\n        if (!enabled)\r\n            return;\r\n        \r\n        element.on(\"dialogopen.qrouter panelopen.qrouter\", e => {\r\n            dialogOpen(owner, element, hash);\r\n        });\r\n    }\r\n\r\n    export function resolve(hash?: string) {\r\n        if (!enabled)\r\n            return;\r\n\r\n        resolving++;\r\n        try {\r\n            hash = hash ?? window.location.hash ?? '';\r\n            if (hash.charAt(0) == '#')\r\n                hash = hash.substr(1, hash.length - 1);\r\n\r\n            var dialogs = visibleDialogs();\r\n            var newParts = hash.split(\"/+/\");\r\n            var oldParts = dialogs.map(el => $(el).data('qroute') as string);\r\n\r\n            var same = 0;\r\n            while (same < dialogs.length &&\r\n                same < newParts.length &&\r\n                oldParts[same] == newParts[same]) {\r\n                same++;\r\n            }\r\n\r\n            for (var i = same; i < dialogs.length; i++) {\r\n                var d = $(dialogs[i]);\r\n                if (d.hasClass('ui-dialog-content'))\r\n                    d.dialog('close');\r\n                else if (d.hasClass('s-Panel'))\r\n                    closePanel(d);\r\n            }\r\n\r\n            for (var i = same; i < newParts.length; i++) {\r\n                var route = newParts[i];\r\n                var routeParts = route.split('@');\r\n                var handler: JQuery;\r\n                if (routeParts.length == 2) {\r\n                    var dialog = i > 0 ? $(dialogs[i - 1]) : $([]);\r\n                    if (dialog.length) {\r\n                        var idPrefix = dialog.attr(\"id\");\r\n                        if (idPrefix) {\r\n                            handler = $('#' + idPrefix + \"_\" + routeParts[0]);\r\n                            if (handler.length) {\r\n                                route = routeParts[1];\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (!handler || !handler.length) {\r\n                        handler = $('#' + routeParts[0]);\r\n                        if (handler.length) {\r\n                            route = routeParts[1];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!handler || !handler.length) {\r\n                    handler = i > 0 ? $(dialogs[i - 1]) :\r\n                        $('.route-handler').first();\r\n                }\r\n\r\n                handler.triggerHandler(\"handleroute\", <HandleRouteEventArgs>{\r\n                    handled: false,\r\n                    route: route,\r\n                    parts: newParts,\r\n                    index: i\r\n                });\r\n            }\r\n        }\r\n        finally {\r\n            resolving--;\r\n        }\r\n    }\r\n\r\n    function hashChange(e: any, o: string) {\r\n        if (ignoreHash > 0) {\r\n            if (new Date().getTime() - ignoreTime > 1000) {\r\n                ignoreHash = 0;\r\n            }\r\n            else {\r\n                ignoreHash--;\r\n                return;\r\n            }\r\n        }\r\n        resolve();\r\n    }\r\n\r\n    function ignoreChange() {\r\n        ignoreHash++;\r\n        ignoreTime = new Date().getTime();\r\n    }\r\n\r\n    window.addEventListener(\"hashchange\", hashChange as any, false);\r\n\r\n    let routerOrder = 1;\r\n\r\n    typeof document !== \"undefined\" && typeof $ !== \"undefined\" &&\r\n        $.fn && $(document).on(\"dialogopen panelopen\", \".ui-dialog-content, .s-Panel\", function (event, ui) {\r\n        if (!enabled)\r\n            return;\r\n\r\n        var dlg = $(event.target);\r\n        dlg.data(\"qrouterorder\", routerOrder++);\r\n\r\n        if (dlg.data(\"qroute\"))\r\n            return;\r\n\r\n        dlg.data(\"qprhash\", window.location.hash);\r\n        var owner = $(visibleDialogs).not(dlg).last();\r\n        if (!owner.length)\r\n            owner = $('html');\r\n\r\n        dialogOpen(owner, dlg, () => {\r\n            return \"!\" + (++autoinc).toString(36);\r\n        });\r\n    });\r\n}", "\uFEFFimport { Config } from \"./config\";\r\nimport { executeEverytimeWhenVisible } from \"./layouttimer\";\r\nimport { Router } from \"./router\";\r\nimport { getNested, getGlobalThis, initializeTypes } from \"./system\";\r\n\r\nexport function autoFullHeight(element: JQuery) {\r\n    element.css('height', '100%');\r\n    triggerLayoutOnShow(element);\r\n}\r\n\r\nexport function initFullHeightGridPage(gridDiv: JQuery, opt?: { noRoute?: boolean }) {\r\n    $('body').addClass('full-height-page');\r\n    gridDiv.addClass('responsive-height');\r\n\r\n    let layout = function () {\r\n        let inPageContent = gridDiv.parent().hasClass('page-content') ||\r\n            gridDiv.parent().is('section.content');\r\n\r\n        if (inPageContent) {\r\n            gridDiv.css('height', '1px').css('overflow', 'hidden');\r\n        }\r\n\r\n        layoutFillHeight(gridDiv);\r\n\r\n        if (inPageContent) {\r\n            gridDiv.css('overflow', '');\r\n        }\r\n\r\n        gridDiv.triggerHandler('layout');\r\n    };\r\n\r\n    if ($('body').hasClass('has-layout-event')) {\r\n        $('body').bind('layout', layout);\r\n    }\r\n    else if ((window as any).Metronic) {\r\n        (window as any).Metronic.addResizeHandler(layout);\r\n    }\r\n    else {\r\n        $(window).resize(layout);\r\n    }\r\n\r\n    layout();\r\n\r\n    gridDiv.one('remove', () => {\r\n        $(window).off('layout', layout);\r\n        $('body').off('layout', layout);\r\n    });\r\n\r\n    if (!opt?.noRoute && \r\n        typeof document !== \"undefined\" &&\r\n        !$(document.body).attr('data-fhrouteinit')) {\r\n            $(document.body).attr('data-fhrouteinit', 'true');\r\n            // ugly, but to it is to make old pages work without having to add this\r\n            typeof Router !== \"undefined\" && Router.resolve?.();\r\n    }\r\n}\r\n\r\nexport function layoutFillHeightValue(element: JQuery) {\r\n    let h = 0;\r\n    element.parent().children().not(element).each(function (i, e) {\r\n        let q = $(e);\r\n        if (q.is(':visible')) {\r\n            h += q.outerHeight(true);\r\n        }\r\n    });\r\n    h = element.parent().height() - h;\r\n    if (element.css('box-sizing') !== 'border-box') {\r\n        h = h - (element.outerHeight(true) - element.height());\r\n    }\r\n    return h;\r\n}\r\n\r\nexport function layoutFillHeight(element: JQuery) {\r\n    let h = layoutFillHeightValue(element);\r\n    let n = Math.round(h) + 'px';\r\n    if (element.css('height') != n) {\r\n        element.css('height', n);\r\n    }\r\n}\r\n\r\nexport function setMobileDeviceMode() {\r\n    let isMobile = typeof window !== 'undefined' &&\r\n        (window.matchMedia?.('(max-width: 767px)')?.matches ||\r\n         window.innerWidth < 768);\r\n\r\n    if (typeof document === \"undefined\" || !document.documentElement)\r\n        return;\r\n\r\n    if (document.documentElement.classList.contains('mobile-device')) {\r\n        if (!isMobile) {\r\n            document.documentElement.classList.remove('mobile-device');\r\n        }\r\n    }\r\n    else if (isMobile) {\r\n        document.documentElement.classList.add('mobile-device');\r\n    }\r\n}\r\n\r\nsetMobileDeviceMode();\r\n\r\nfunction initOnLoad() {\r\n    var globalObj = getGlobalThis();\r\n    if (globalObj && Config.rootNamespaces) {\r\n        for (var ns of Config.rootNamespaces) {\r\n            var obj = getNested(globalObj, ns);\r\n            if (obj != null)\r\n                initializeTypes(obj, ns + \".\", 3);\r\n        }\r\n    }\r\n\r\n    if (typeof window !== \"undefined\") {\r\n        if (typeof $ !== \"undefined\")\r\n            $(window).bind('resize', setMobileDeviceMode);\r\n        else\r\n            window.addEventListener('resize', setMobileDeviceMode);\r\n    }\r\n}\r\n\r\nif (typeof $ !== \"undefined\")\r\n    $(initOnLoad);\r\nelse if (typeof document !== \"undefined\" && document.readyState === 'loading')\r\n    document.addEventListener('DOMContentLoaded', initOnLoad);\r\nelse\r\n    initOnLoad();\r\n\r\nexport function triggerLayoutOnShow(element: JQuery) {\r\n    executeEverytimeWhenVisible(element, function () {\r\n        element.triggerHandler('layout');\r\n    }, true);\r\n}\r\n\r\nexport function centerDialog(el: JQuery) {\r\n    if (!el.hasClass(\"ui-dialog\"))\r\n        el = el.closest(\".ui-dialog\");\r\n\r\n    el.position({ at: 'center center', of: window });\r\n    let pos = el.position();\r\n    if (pos.left < 0)\r\n        el.css(\"left\", \"0px\");\r\n    if (pos.top < 0)\r\n        el.css(\"top\", \"0px\");\r\n}", "\uFEFFexport interface LookupOptions<TItem> {\r\n    idField?: string;\r\n    parentIdField?: string;\r\n    textField?: string;\r\n    textFormatter?(item: TItem): string;\r\n}\r\n\r\nexport interface Lookup<TItem> {\r\n    items: TItem[];\r\n    itemById: { [key: string]: TItem };\r\n    idField: string;\r\n    parentIdField: string;\r\n    textField: string;\r\n    textFormatter: (item: TItem) => string;\r\n}\r\n\r\nexport class Lookup<TItem> {\r\n    public items: TItem[] = [];\r\n    public itemById: { [key: string]: TItem } = {};\r\n    public idField: string;\r\n    public parentIdField: string;\r\n    public textField: string;\r\n    public textFormatter: (item: TItem) => string;\r\n\r\n    constructor(options: LookupOptions<TItem>, items?: TItem[]) {\r\n        options = options || {};\r\n        this.textFormatter = options.textFormatter;\r\n        this.idField = options.idField;\r\n        this.parentIdField = options.parentIdField;\r\n        this.textField = options.textField;\r\n        this.textFormatter = options.textFormatter;\r\n\r\n        if (items != null)\r\n            this.update(items);\r\n    }\r\n\r\n    update?(value: TItem[]) {\r\n        this.items = [];\r\n        this.itemById = {};\r\n        if (value) {\r\n            for (var k of value)\r\n                this.items.push(k);\r\n        }\r\n        var idField = this.idField;\r\n        if (idField) {\r\n            for (var r of this.items) {\r\n                var v = r[idField];\r\n                if (v != null) {\r\n                    this.itemById[v] = r;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}", "\uFEFFimport { registerEnum } from \"./system\";\r\n\r\nexport interface PropertyItem {\r\n    name?: string;\r\n    title?: string;\r\n    hint?: string;\r\n    placeholder?: string;\r\n    editorType?: string;\r\n    editorParams?: any;\r\n    category?: string;\r\n    collapsible?: boolean;\r\n    collapsed?: boolean;\r\n    tab?: string;\r\n    cssClass?: string;\r\n    headerCssClass?: string;\r\n    formCssClass?: string;\r\n    maxLength?: number;\r\n    required?: boolean;\r\n    insertable?: boolean;\r\n    insertPermission?: string;\r\n    hideOnInsert?: boolean;\r\n    updatable?: boolean;\r\n    updatePermission?: string;\r\n    hideOnUpdate?: boolean;\r\n    readOnly?: boolean;\r\n    readPermission?: string;\r\n    oneWay?: boolean;\r\n    defaultValue?: any;\r\n    localizable?: boolean;\r\n    visible?: boolean;\r\n    allowHide?: boolean;\r\n    formatterType?: string;\r\n    formatterParams?: any;\r\n    displayFormat?: string;\r\n    alignment?: string;\r\n    width?: number;\r\n    widthSet?: boolean;\r\n    minWidth?: number;\r\n    maxWidth?: number;\r\n    labelWidth?: string;\r\n    resizable?: boolean;\r\n    sortable?: boolean;\r\n    sortOrder?: number;\r\n    groupOrder?: number;\r\n    summaryType?: SummaryType;\r\n    editLink?: boolean;\r\n    editLinkItemType?: string;\r\n    editLinkIdField?: string;\r\n    editLinkCssClass?: string;\r\n    filteringType?: string;\r\n    filteringParams?: any;\r\n    filteringIdField?: string;\r\n    notFilterable?: boolean;\r\n    filterOnly?: boolean;\r\n    quickFilter?: boolean;\r\n    quickFilterParams?: any;\r\n    quickFilterSeparator?: boolean;\r\n    quickFilterCssClass?: string;\r\n}\r\n\r\nexport interface PropertyItemsData {\r\n    items: PropertyItem[];\r\n    additionalItems: PropertyItem[];\r\n}\r\n   \r\nexport enum SummaryType {\r\n    Disabled = -1,\r\n    None = 0,\r\n    Sum = 1,\r\n    Avg = 2,\r\n    Min = 3,\r\n    Max = 4\r\n}\r\n\r\nregisterEnum(SummaryType, 'Serenity.SummaryType');", "\uFEFFexport interface ServiceError {\r\n    Code?: string;\r\n    Arguments?: string;\r\n    Message?: string;\r\n    Details?: string;\r\n    ErrorId?: string;\r\n}               \r\n      \r\nexport interface ServiceResponse {\r\n    Error?: ServiceError;\r\n}\r\n    \r\nexport interface ServiceRequest {\r\n}\r\n    \r\nexport interface ServiceOptions<TResponse extends ServiceResponse> extends JQueryAjaxSettings {\r\n    request?: any;\r\n    service?: string;\r\n    blockUI?: boolean;\r\n    onError?(response: TResponse): void;\r\n    onSuccess?(response: TResponse): void;\r\n    onCleanup?(): void;\r\n}\r\n\r\nexport interface SaveRequest<TEntity> extends ServiceRequest {\r\n    EntityId?: any;\r\n    Entity?: TEntity;\r\n    Localizations?: any;\r\n}\r\n    \r\nexport interface SaveRequestWithAttachment<TEntity> extends SaveRequest<TEntity> {\r\n    Attachments?: any[];\r\n}\r\n    \r\nexport interface SaveResponse extends ServiceResponse {\r\n    EntityId?: any;\r\n}\r\n    \r\nexport interface SaveWithLocalizationRequest<TEntity> extends SaveRequest<TEntity> {\r\n    Localizations?: { [key: string]: TEntity };\r\n}\r\n    \r\nexport interface DeleteRequest extends ServiceRequest {\r\n    EntityId?: any;\r\n}\r\n    \r\nexport interface DeleteResponse extends ServiceResponse {\r\n}\r\n    \r\nexport interface UndeleteRequest extends ServiceRequest {\r\n    EntityId?: any;\r\n}\r\n    \r\nexport interface UndeleteResponse extends ServiceResponse {\r\n}\r\n    \r\nexport enum ColumnSelection {\r\n    List = 0,\r\n    KeyOnly = 1,\r\n    Details = 2,\r\n    None = 3,\r\n    IdOnly = 4,\r\n    Lookup = 5\r\n}\r\n    \r\nexport enum RetrieveColumnSelection {\r\n    details = 0,\r\n    keyOnly = 1,\r\n    list = 2,\r\n    none = 3,\r\n    idOnly = 4,\r\n    lookup = 5\r\n}\r\n    \r\nexport interface ListRequest extends ServiceRequest {\r\n    Skip?: number;\r\n    Take?: number;\r\n    Sort?: string[];\r\n    ContainsText?: string;\r\n    ContainsField?: string;\r\n    Criteria?: any[];\r\n    EqualityFilter?: any;\r\n    IncludeDeleted?: boolean;\r\n    ExcludeTotalCount?: boolean;\r\n    ColumnSelection?: ColumnSelection;\r\n    IncludeColumns?: string[];\r\n    ExcludeColumns?: string[];\r\n    ExportColumns?: string[];\r\n    DistinctFields?: string[];\r\n}\r\n    \r\nexport interface ListResponse<TEntity> extends ServiceResponse {\r\n    Entities?: TEntity[];\r\n    Values?: any[];\r\n    TotalCount?: number;\r\n    Skip?: number;\r\n    Take?: number;\r\n}\r\n    \r\nexport interface RetrieveRequest extends ServiceRequest {\r\n    EntityId?: any;\r\n    ColumnSelection?: RetrieveColumnSelection;\r\n    IncludeColumns?: string[];\r\n    ExcludeColumns?: string[];\r\n}\r\n    \r\nexport interface RetrieveResponse<TEntity> extends ServiceResponse {\r\n    Entity?: TEntity;\r\n}\r\n    \r\nexport interface RetrieveLocalizationRequest extends RetrieveRequest {\r\n}\r\n    \r\nexport interface RetrieveLocalizationResponse<TEntity> extends ServiceResponse {\r\n    Entities?: { [key: string]: TEntity };\r\n}\r\n", "\uFEFFimport { extend } from \"./system\";\r\nimport { Config } from \"./config\";\r\nimport { Exception } from \"./system\";\r\nimport { tryGetText } from \"./localtext\";\r\nimport { parseDate, parseHourAndMin, parseDayHourAndMin, parseDecimal, parseInteger } from \"./formatting\";\r\nimport { isBS3 } from \"./dialogs\";\r\nimport { htmlEncode } from \"./html\";\r\n\r\nif (typeof $ !== \"undefined\" && $.validator && $.validator.methods && $.validator.addMethod) {\r\n\r\n    if ($.validator[\"prototype\"].showLabel) {\r\n        var orgShowLabel = $.validator[\"prototype\"].showLabel;\r\n        $.validator[\"prototype\"].showLabel = function(element: any, message: any) {\r\n            if (message != null)\r\n                message = htmlEncode(message);\r\n            orgShowLabel.call(this, element, message);\r\n        }\r\n    }\r\n\r\n    $.validator.addMethod('customValidate', function (value: any, element: any) {\r\n        var result = this.optional(element) as any;\r\n        if (element == null || !!result) {\r\n            return result;\r\n        }\r\n        var events = ($ as any)._data(element, 'events');\r\n        if (!events) {\r\n            return true;\r\n        }\r\n        var handlers = events.customValidate;\r\n        if (handlers == null || handlers.length === 0) {\r\n            return true;\r\n        }\r\n\r\n        var el = $(element);\r\n        for (var i = 0; !!(i < handlers.length); i++) {\r\n            if ($.isFunction(handlers[i].handler)) {\r\n                var message = handlers[i].handler(el);\r\n                if (message != null) {\r\n                    el.data('customValidationMessage', message);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }, function (o: any, e: any) {\r\n        return $(e).data('customValidationMessage');\r\n    });\r\n\r\n    $.validator.addMethod(\"dateQ\", function (value, element) {\r\n        var o = this.optional(element);\r\n        if (o)\r\n            return o;\r\n\r\n        var d = parseDate(value);\r\n        if (!d)\r\n            return false;\r\n\r\n        var z = new Date(d);\r\n        z.setHours(0, 0, 0, 0);\r\n        return z.getTime() === d.getTime();\r\n    });\r\n\r\n    $.validator.addMethod(\"dateTimeQ\", function (value, element) {\r\n        var o = this.optional(element);\r\n        if (o)\r\n            return o;\r\n\r\n        var d = parseDate(value);\r\n        return !!d;\r\n    });        \r\n\r\n    $.validator.addMethod(\"hourAndMin\", function (value, element) {\r\n        return this.optional(element) || !isNaN(parseHourAndMin(value));\r\n    });\r\n\r\n    $.validator.addMethod(\"dayHourAndMin\", function (value, element) {\r\n        return this.optional(element) || !isNaN(parseDayHourAndMin(value));\r\n    });\r\n\r\n    $.validator.addMethod(\"decimalQ\", function (value, element) {\r\n        return this.optional(element) || !isNaN(parseDecimal(value));\r\n    });\r\n\r\n    $.validator.addMethod(\"integerQ\", function (value, element) {\r\n        return this.optional(element) || !isNaN(parseInteger(value));\r\n    });\r\n\r\n    let oldEmail = $.validator.methods['email'];\r\n    let emailRegex: RegExp = null;\r\n    $.validator.addMethod(\"email\", function (value, element) {\r\n        if (Config.emailAllowOnlyAscii)\r\n            return oldEmail.call(this, value, element);\r\n\r\n        if (emailRegex == null) \r\n            emailRegex = new RegExp(\"^((([a-z]|\\\\d|[!#\\\\$%&'\\\\*\\\\+\\\\-\\\\/=\\\\?\\\\^_`{\\\\|}~]|\" +\r\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])+(\\\\.([a-z]|\\\\d|\" +\r\n                \"[!#\\\\$%&'\\\\*\\\\+\\\\-\\\\/=\\\\?\\\\^_`{\\\\|}~]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])+)*)|\" +\r\n                \"((\\\\x22)((((\\\\x20|\\\\x09)*(\\\\x0d\\\\x0a))?(\\\\x20|\\\\x09)+)?(([\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x7f]|\" +\r\n                \"\\\\x21|[\\\\x23-\\\\x5b]|[\\\\x5d-\\\\x7e]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(\\\\\\\\([\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0d-\\\\x7f]|\" +\r\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]))))*(((\\\\x20|\\\\x09)*(\\\\x0d\\\\x0a))?(\\\\x20|\\\\x09)+)?(\\\\x22)))@((([a-z]|\\\\d|\" +\r\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(([a-z]|\\\\d|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])\" +\r\n                \"([a-z]|\\\\d|-|\\\\.|_|~|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])*([a-z]|\\\\d|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])))\\\\.)\" +\r\n                \"+(([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])([a-z]|\\\\d|-|\\\\.|_|~|\" +\r\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])*([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])))$\", \"i\");\r\n                \r\n        return emailRegex.test(value);\r\n    });\r\n\r\n    $(loadValidationErrorMessages);\r\n}\r\n\r\nexport function loadValidationErrorMessages() {\r\n\r\n    const addMsg = (m: string, k: string) => {\r\n        var txt = tryGetText(\"Validation.\" + k);\r\n        if (txt)\r\n            $.validator.messages[m] = txt;\r\n        else if (!$.validator.messages[m])\r\n            $.validator.messages[m] = k + \"?\";\r\n    }\r\n\r\n    addMsg(\"required\", \"Required\");\r\n    addMsg(\"email\", \"Email\");\r\n    addMsg(\"minlength\", \"MinLength\");\r\n    addMsg(\"maxlength\", \"MaxLength\");\r\n    addMsg(\"digits\", \"Digits\");\r\n    addMsg(\"range\", \"Range\");\r\n    addMsg(\"xss\", \"Xss\");\r\n    addMsg(\"dateQ\", \"DateInvalid\");\r\n    addMsg(\"decimalQ\", \"Decimal\");\r\n    addMsg(\"integerQ\", \"Integer\");\r\n    addMsg(\"url\", \"Url\");\r\n}\r\n\r\nfunction setTooltip(el: JQuery, val: string): JQuery {\r\n    if (isBS3())\r\n        el.attr('data-original-title', val || '').tooltip('fixTitle');\r\n    else\r\n        el.attr('title', val || '').tooltip('_fixTitle');\r\n    return el;\r\n}\r\n\r\nexport function getHighlightTarget(el: HTMLElement) {\r\n    var hl = el.dataset.vxHighlight;\r\n    if (hl)\r\n        return document.getElementById(hl);\r\n    else if (el.classList.contains(\"select2-offscreen\") && el.id)\r\n        return document.getElementById('s2id_' + el.id);\r\n}\r\n\r\nexport function baseValidateOptions(): JQueryValidation.ValidationOptions {\r\n    return <any>{\r\n        errorClass: 'error',\r\n        ignore: ':hidden, .no-validate',\r\n        ignoreTitle: true,\r\n        normalizer: function (value: any) {\r\n            return $.trim(value);\r\n        },\r\n        highlight: function (element: HTMLElement, errorClass: string, validClass: string) {\r\n            if ((element as any).type === \"radio\") {\r\n                this.findByName((element as any).name).addClass(errorClass).removeClass(validClass);\r\n            } else {\r\n                if (errorClass != null && errorClass.length)\r\n                    element.classList.add(errorClass);\r\n                if (validClass != null && validClass.length)\r\n                    element.classList.remove(validClass);\r\n                var hl = getHighlightTarget(element);\r\n                if (hl && hl.classList) {\r\n                    if (errorClass != null && errorClass.length)\r\n                        hl.classList.add(errorClass);\r\n                    if (validClass != null && validClass.length)\r\n                        hl.classList.remove(validClass);\r\n                }\r\n            }\r\n        },\r\n        unhighlight: function (element: HTMLElement, errorClass: string, validClass: string) {\r\n            if ((element as any).type === \"radio\") {\r\n                this.findByName((element as any).name).removeClass(errorClass).addClass(validClass);\r\n            } else {\r\n                if (errorClass != null && errorClass.length)\r\n                    element.classList.remove(errorClass);\r\n                if (validClass != null && validClass.length)\r\n                    element.classList.add(validClass);\r\n                var hl = getHighlightTarget(element);\r\n                if (hl && hl.classList) {\r\n                    if (errorClass != null && errorClass.length)\r\n                        hl.classList.remove(errorClass);\r\n                    if (validClass != null && validClass.length)\r\n                        hl.classList.add(validClass);\r\n                }\r\n            }\r\n        },\r\n        showErrors: function () {\r\n            if ($.fn.tooltip) {\r\n                var i: number, elements: any, error: any, $el: any, hl: any;\r\n                for (i = 0; this.errorList[i]; i++) {\r\n                    error = this.errorList[i];\r\n                    hl = getHighlightTarget(error.element);\r\n                    if (hl != null)\r\n                        $el = $(hl);\r\n                    else\r\n                        $el = $(error.element);\r\n                    if (i != 0)\r\n                        setTooltip($el, '').tooltip('hide');\r\n                    else\r\n                        setTooltip($el, error.message).tooltip('show');\r\n                }\r\n\r\n                for (i = 0, elements = this.validElements(); elements[i]; i++) {\r\n                    hl = getHighlightTarget(error.element);\r\n                    if (hl != null)\r\n                        $el = $(hl);\r\n                    else\r\n                        $el = $(error.element);\r\n                    setTooltip($el, '').tooltip('hide');\r\n                }\r\n            }\r\n\r\n            $.validator[\"prototype\"].defaultShowErrors.call(this);\r\n        }\r\n    }\r\n}\r\n\r\nexport function validateForm(form: JQuery, opt: JQueryValidation.ValidationOptions): JQueryValidation.Validator {\r\n    return form.validate(extend(baseValidateOptions(), opt));\r\n}\r\n\r\nexport function addValidationRule(element: JQuery, eventClass: string, rule: (p1: JQuery) => string): JQuery {\r\n    if (!element.length)\r\n        return element;\r\n    if (rule == null)\r\n        throw new Exception('rule is null!');\r\n    element.addClass('customValidate').bind('customValidate.' + eventClass, rule as any);\r\n    return element;\r\n}\r\n\r\nexport function removeValidationRule(element: JQuery, eventClass: string): JQuery {\r\n    element.unbind('customValidate.' + eventClass);\r\n    return element;\r\n}", "\uFEFFimport { extend } from \"./system\";\r\nimport { notifyError } from \"./notify\";\r\nimport { localText } from \"./localtext\";\r\nimport { baseValidateOptions, getHighlightTarget } from \"./validation\";\r\nimport { isBS3 } from \"./dialogs\";\r\n\r\nlet oldShowLabel: (e: HTMLElement, message: string) => void;\r\n\r\nfunction validateShowLabel(element: HTMLElement, message: string) {\r\n    oldShowLabel.call(this, element, message);\r\n    this.errorsFor(element).each(function (i: number, e: any) {\r\n        var $e = $(e);\r\n        if ($e.parent('.vx').length) {\r\n            $e.attr('title', $e.text());\r\n            if (message && $e.hasClass('error'))\r\n                $e.removeClass('checked');\r\n        }\r\n    });\r\n};\r\n\r\nfunction jQueryValidationInitialization() {\r\n\r\n    if (typeof $ === \"undefined\" ||\r\n        !$.validator)\r\n        return;\r\n\r\n    let p: any = $.validator;\r\n    p = p.prototype;\r\n    oldShowLabel = p.showLabel;\r\n    p.showLabel = validateShowLabel;\r\n\r\n    p.oldfocusInvalid = p.focusInvalid;\r\n    p.focusInvalid = function () {\r\n        if (this.settings.abortHandler)\r\n            this.settings.abortHandler(this);\r\n        this.oldfocusInvalid.call(this);\r\n    };\r\n    p.oldstopRequest = p.focusInvalid;\r\n    p.stopRequest = function (element: any, valid: boolean) {\r\n        let formSubmitted = this.formSubmitted;\r\n        this.oldfocusInvalid.call(this, [element, valid]);\r\n        if (!valid && this.pendingRequest == 0 && formSubmitted && this.settings.abortHandler) {\r\n            this.settings.abortHandler(this);\r\n        }\r\n    };\r\n    p.resetAll = function () {\r\n        this.submitted = {};\r\n        this.prepareForm();\r\n        this.hideErrors();\r\n        this.elements().removeClass(this.settings.errorClass);\r\n    };\r\n};\r\n\r\nexport function validatorAbortHandler(validator: any) {\r\n    validator.settings.abortHandler = null;\r\n    validator.settings.submitHandler = function () {\r\n        return false;\r\n    };\r\n};\r\n\r\nexport function validateOptions(options: JQueryValidation.ValidationOptions) {\r\n    var opt = baseValidateOptions();\r\n    delete opt.showErrors;\r\n    return extend(extend(opt, {\r\n        meta: 'v',\r\n        errorPlacement: function (error: any, element: any) {\r\n            let field: any = null;\r\n            let vx = element.attr('data-vx-id');\r\n            if (vx) {\r\n                field = $('#' + vx);\r\n                if (!field.length)\r\n                    field = null;\r\n                else\r\n                    field = field[0];\r\n            }\r\n            if (field == null) {\r\n                field = element.parents('div.field');\r\n                if (field.length) {\r\n                    let inner = $('div.vx', field[0]);\r\n                    if (inner.length)\r\n                        field = inner[0];\r\n                }\r\n                else\r\n                    field = element.parent();\r\n            }\r\n            error.appendTo(field);\r\n        },\r\n        submitHandler: function () {\r\n            return false;\r\n        },\r\n        invalidHandler: function (event: any, validator: JQueryValidation.Validator) {\r\n            notifyError(localText(\"Validation.InvalidFormMessage\"));\r\n\r\n            $(validator.errorList.map(x => x.element))\r\n                .closest('.category.collapsed')\r\n                .children('.category-title')\r\n                .each((i, x) => {\r\n                    $(x).click();\r\n                    return true;\r\n                });\r\n\r\n            if (validator.errorList.length)\r\n            {\r\n                var el = validator.errorList[0].element;\r\n                if (el) {\r\n                    var bsPane = $(el).closest('.tab-pane');\r\n                    if (!bsPane.hasClass(\"active\") &&\r\n                        bsPane.parent().hasClass('tab-content')) {\r\n                        var bsPaneId = bsPane.attr('id');\r\n                        if (bsPaneId) {\r\n                            $('a[href=\"#' + bsPaneId + '\"]').click();\r\n                        }\r\n                    }\r\n\r\n                    if ($.fn.tooltip) {\r\n                        var $el: any;\r\n                        var hl = getHighlightTarget(el);\r\n                        if (hl)\r\n                            $el = $(hl);\r\n                        else\r\n                            $el = $(el);\r\n\r\n                        $.fn.tooltip && $el.tooltip({\r\n                            title: validator.errorList[0].message,\r\n                            trigger: 'manual'\r\n                        }).tooltip('show');\r\n\r\n                        window.setTimeout(function () {\r\n                            $el.tooltip(isBS3() ? 'destroy' : 'dispose');\r\n                        }, 1500);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        success: function (label: JQuery) {\r\n            label.addClass('checked');\r\n        }\r\n    }), options);\r\n};\r\n\r\nif (typeof $ !== \"undefined\") {\r\n    if ($.validator)\r\n        jQueryValidationInitialization();\r\n    else\r\n        $(jQueryValidationInitialization);\r\n}\r\nelse if (typeof document !== \"undefined\") {\r\n    if (document.readyState === 'loading')\r\n        document.addEventListener('DOMContentLoaded', jQueryValidationInitialization);\r\n    else\r\n        setTimeout(jQueryValidationInitialization, 100);\r\n}", "\uFEFFexport function Criteria(field: string): Criteria.Builder {\r\n    var builder = Criteria.Builder.of(field);\r\n    // workaround for subclassing array until corelib switched to ES6\r\n    //@ts-ignore\r\n    !builder.eq && (builder.__proto__ = Criteria.Builder.prototype);\r\n    return builder as Criteria.Builder;\r\n}\r\n\r\nexport namespace Criteria {\r\n    import C = Criteria;\r\n\r\n    export function isEmpty(c: any[]): boolean {\r\n        return c == null ||\r\n            c.length === 0 ||\r\n            (c.length === 1 &&\r\n                typeof c[0] == \"string\" &&\r\n                c[0].length === 0);\r\n    }\r\n\r\n    export function join(c1: any[], op: string, c2: any[]): any[] {\r\n        if (C.isEmpty(c1))\r\n            return c2;\r\n\r\n        if (C.isEmpty(c2))\r\n            return c1;\r\n\r\n        return [c1, op, c2];\r\n    }\r\n\r\n    export function paren(c: any[]): any[] {\r\n        return C.isEmpty(c) ? c : ['()', c];\r\n    }\r\n\r\n    export function and(c1: any[], c2: any[], ...rest: any[][]): any[] {\r\n        var result = join(c1, 'and', c2);\r\n        if (rest) {\r\n            for (let k of rest)\r\n                result = join(result, 'and', k);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    export function or(c1: any[], c2: any[], ...rest: any[][]): any[] {\r\n        var result = join(c1, 'or', c2);\r\n\r\n        if (rest) {\r\n            for (let k of rest)\r\n                result = join(result, 'or', k);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    export function not(c: any[]) {\r\n        return ['not', c]\r\n    }\r\n\r\n    export enum Operator {\r\n        paren = \"()\",\r\n        not = \"not\",\r\n        isNull = \"is null\",\r\n        isNotNull = \"is not null\",\r\n        exists = \"exists\",\r\n        and = \"and\",\r\n        or = \"or\",\r\n        xor = \"xor\",\r\n        eq = \"=\",\r\n        ne = \"!=\",\r\n        gt = \">\",\r\n        ge = \">=\",\r\n        lt = \"<\",\r\n        le = \"<=\",\r\n        in = \"in\",\r\n        notIn = \"not in\",\r\n        like = \"like\",\r\n        notLike = \"not like\"\r\n    }\r\n\r\n    export class Builder extends Array {\r\n        bw(fromInclusive: any, toInclusive: any): Array<any> {\r\n            return [[this, '>=', fromInclusive], 'and', [this, '<=', toInclusive]];\r\n        }\r\n\r\n        contains(value: string): Array<any> { \r\n            return [this, 'like', '%' + value + '%'];\r\n        }\r\n        \r\n        endsWith(value: string): Array<any> { \r\n            return [this, 'like', '%' + value];\r\n        }\r\n\r\n        eq(value: any): Array<any> { \r\n            return [this, '=', value];\r\n        }\r\n    \r\n        gt(value: any): Array<any> { \r\n            return [this, '>', value];\r\n        }\r\n    \r\n        ge(value: any): Array<any> { \r\n            return [this, '>=', value];\r\n        }\r\n    \r\n        in(values: any[]): Array<any> { \r\n            return [this, 'in', [values]];\r\n        }\r\n    \r\n        isNull(): Array<any> { \r\n            return ['is null', this];\r\n        }\r\n        \r\n        isNotNull(): Array<any> { \r\n            return ['is not null', this];\r\n        }\r\n    \r\n        le(value: any): Array<any> { \r\n            return [this, '<=', value];\r\n        }\r\n    \r\n        lt(value: any): Array<any> { \r\n            return [this, '<', value];\r\n        }\r\n    \r\n        ne(value: any): Array<any> { \r\n            return [this, '!=', value];\r\n        }\r\n    \r\n        like(value: any): Array<any> { \r\n            return [this, 'like', value];\r\n        }\r\n\r\n        startsWith(value: string): Array<any> { \r\n            return [this, 'like', value + '%'];\r\n        }\r\n\r\n        notIn(values: any[]): Array<any> { \r\n            return [this, 'not in', [values]];\r\n        }\r\n    \r\n        notLike(value: any): Array<any> { \r\n            return [this, 'not like', value];\r\n        }\r\n    }\r\n\r\n    const TOKEN_IDENTIFIER = 1;\r\n    const TOKEN_OPERATOR = 2;\r\n    const TOKEN_VALUE = 3;\r\n    const TOKEN_PARAM = 4;\r\n    \r\n    interface Token {\r\n        t: number;\r\n        v: any;\r\n    }\r\n    \r\n    interface ParseError {\r\n        error: string;\r\n        pos: number;\r\n    }\r\n    \r\n    const ParseError: any = function(expression: string, error: string, position: number) {\r\n        this.expression = expression;\r\n        this.error = error;\r\n        this.position = position;\r\n        this.toString = function () {\r\n            return 'Error parsing expression: \"' + expression + '\", \"' +\r\n                error + ', position: ' + position;\r\n        };\r\n    }\r\n    \r\n    function tokenize(expression: string): Token[] {\r\n        var end: number, v: any;\r\n        var tokens: Token[] = [];\r\n        var l = expression.length;\r\n        var l1 = expression.length - 1;\r\n        var openParens = 0;\r\n        var index: number;\r\n        var ch: string;\r\n\r\n        function skipWhiteSpace() {\r\n            while (index < l) {\r\n                ch = expression.charAt(index);\r\n\r\n                if (ch === ' ' || ch === '\\t') {\r\n                    index++;\r\n                    continue;\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        function readString() {\r\n            end = index;\r\n            var foundDoubles = false;\r\n            while (end++ < l1) {\r\n                ch = expression.charAt(end);\r\n                if (ch === \"'\") {\r\n                    if (end < l1 && expression.charAt(end + 1) === \"'\") {\r\n                        end++;\r\n                        foundDoubles = true;\r\n                        continue;\r\n                    }\r\n                    else\r\n                        break;\r\n                }\r\n            }\r\n\r\n            if (end === index ||\r\n                expression.charAt(end) !== \"'\")\r\n                throw new ParseError(expression, 'unterminated string', index);\r\n\r\n            v = expression.substr(index + 1, end - index - 1);\r\n            if (foundDoubles)\r\n                v = v.replace(/''/g, \"'\");\r\n        }\r\n\r\n        function readNumber() {\r\n            end = index;\r\n            var foundDot = false;\r\n            while (end < l1) {\r\n                ch = expression.charAt(end + 1);\r\n                if ((ch >= '0' && ch <= '9') ||\r\n                    (!foundDot && (ch === '.'))) {\r\n                    if (ch === '.')\r\n                        foundDot = true;\r\n                    end++;\r\n                }\r\n                else\r\n                    break;\r\n            }\r\n\r\n            v = parseFloat(expression.substr(index, end - index + 1));\r\n            if (isNaN(v))\r\n                throw new ParseError(expression, 'invalid number', index);\r\n        }\r\n\r\n        function readIdentifier() {\r\n            end = index;\r\n            while (end < l1) {\r\n                ch = expression.charAt(end + 1);\r\n                if (ch == '_' ||\r\n                    (ch >= 'A' && ch <= 'Z') ||\r\n                    (ch >= 'a' && ch <= 'z') ||\r\n                    (ch >= '0' && ch <= '9')) {\r\n                    end++;\r\n                }\r\n                else\r\n                    break;\r\n            }\r\n\r\n            v = expression.substr(index, end - index + 1);\r\n        }\r\n\r\n        function readParam() {\r\n            index++;\r\n            readIdentifier();\r\n            if (!v.length)\r\n                throw new ParseError(expression, 'expected parameter name', index);\r\n        }\r\n\r\n        function readArrayList() {\r\n            skipWhiteSpace();\r\n\r\n            if (index >= l || expression.charAt(index) != '(') {\r\n                if (index < l && expression.charAt(index) == '@') {\r\n                    readParam();\r\n                    index = end;\r\n                    return;\r\n                }\r\n                throw new ParseError(expression, 'expected parenthesis', index);\r\n            }\r\n\r\n            index++;\r\n\r\n            let values = [];\r\n\r\n            while (true) {\r\n                skipWhiteSpace();\r\n\r\n                if (index >= l)\r\n                    throw new ParseError(expression, 'expected parenthesis', index);\r\n\r\n                ch = expression.charAt(index);\r\n\r\n                if (ch == ',') {\r\n                    if (values.length == 0)\r\n                        throw new ParseError(expression, 'unexpected comma', index);\r\n                    index++;\r\n                    skipWhiteSpace();\r\n                    ch = expression.charAt(index);\r\n                }\r\n                else if (ch == ')') {\r\n                    break;\r\n                }\r\n                else if (values.length > 0)\r\n                    throw new ParseError(expression, 'expected comma', index);\r\n\r\n\r\n                if (ch === \"'\") {\r\n                    readString();\r\n\r\n                    values.push(v);\r\n                    index = end + 1;\r\n                    continue;\r\n                }\r\n\r\n                if (ch >= '0' && ch <= '9') {\r\n                    readNumber();\r\n\r\n                    values.push(v);\r\n                    index = end + 1;\r\n                    continue;\r\n                }\r\n\r\n                if (ch == 'n') {\r\n                    readIdentifier();\r\n\r\n                    if (v === 'null') {\r\n                        values.push(null)\r\n                        index = end + 1;\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                throw new ParseError(expression, 'unexpected token', index);\r\n            }\r\n\r\n            v = values;\r\n        }\r\n    \r\n        for (index = 0; index < l; index++) {\r\n            ch = expression.charAt(index);\r\n            if (ch === ' ' || ch === '\\t')\r\n                continue;\r\n\r\n            if (ch == '_' ||\r\n                (ch >= 'A' && ch <= 'Z') ||\r\n                (ch >= 'a' && ch <= 'z')) {\r\n                readIdentifier();\r\n                var w = v.toLowerCase();\r\n                if (w == 'is') {\r\n                    index = end + 1;\r\n                    skipWhiteSpace();\r\n    \r\n                    readIdentifier();\r\n                    w = v.toLowerCase();\r\n                    if (w === 'not') {\r\n                        index = end + 1;\r\n                        skipWhiteSpace();\r\n                        readIdentifier();\r\n                        if (v.toLowerCase() === 'null') {\r\n                            tokens.push({\r\n                                t: TOKEN_OPERATOR,\r\n                                v: 'is not null'\r\n                            });\r\n                        }\r\n                        else\r\n                            throw new ParseError(expression, 'expected \"null\"', index);\r\n                    }\r\n                    else if (w === 'null') {\r\n                        tokens.push({\r\n                            t: TOKEN_OPERATOR,\r\n                            v: 'is null'\r\n                        });\r\n                    }\r\n                    else\r\n                        throw new ParseError(expression, 'expected \"null\" or \"not\" keyword', index);\r\n                }\r\n                else if (w === 'and' || w === 'or' || w === 'xor') {\r\n                    tokens.push({\r\n                        t: TOKEN_OPERATOR,\r\n                        v: w\r\n                    });\r\n                }\r\n                else if (w === 'not') {\r\n                    const currentEnd = end;\r\n    \r\n                    index = end + 1;\r\n                    skipWhiteSpace();\r\n    \r\n                    readIdentifier();\r\n                    w = v.toLowerCase();\r\n    \r\n                    if (w === 'in') {\r\n                        index = end + 1;\r\n    \r\n                        tokens.push({\r\n                            t: TOKEN_OPERATOR,\r\n                            v: 'not in'\r\n                        });\r\n    \r\n                        readArrayList();\r\n    \r\n                        if (typeof v === \"string\") {\r\n                            tokens.push({\r\n                                t: TOKEN_PARAM,\r\n                                v: v\r\n                            })\r\n                        }\r\n                        else {\r\n                            tokens.push({\r\n                                t: TOKEN_VALUE,\r\n                                v: v\r\n                            });\r\n                        }\r\n                    }\r\n                    else if (w === \"like\") {\r\n                        tokens.push({\r\n                            t: TOKEN_OPERATOR,\r\n                            v: 'not like'\r\n                        });\r\n    \r\n                        index = end;\r\n                    } else {\r\n                        tokens.push({\r\n                            t: TOKEN_OPERATOR,\r\n                            v: 'not'\r\n                        });\r\n    \r\n                        index = currentEnd;\r\n                    }\r\n    \r\n                    continue;\r\n                }\r\n                else if (w === 'in') {\r\n                    tokens.push({\r\n                        t: TOKEN_OPERATOR,\r\n                        v: 'in'\r\n                    });\r\n    \r\n                    index = end + 1;\r\n    \r\n                    readArrayList();\r\n    \r\n                    if (typeof v === \"string\") {\r\n                        tokens.push({\r\n                            t: TOKEN_PARAM,\r\n                            v: v\r\n                        })\r\n                    }\r\n                    else {\r\n                        tokens.push({\r\n                            t: TOKEN_VALUE,\r\n                            v: v\r\n                        });\r\n                    }\r\n    \r\n                    continue;\r\n                }\r\n                else if (w === \"like\") {\r\n                    tokens.push({\r\n                        t: TOKEN_OPERATOR,\r\n                        v: 'like'\r\n                    });\r\n                }\r\n                else {\r\n                    tokens.push({\r\n                        t: TOKEN_IDENTIFIER,\r\n                        v: v\r\n                    });\r\n                }\r\n    \r\n                index = end;\r\n                continue;\r\n            }\r\n\r\n            if (ch === '@') {\r\n                readParam();\r\n                tokens.push({\r\n                    t: TOKEN_PARAM,\r\n                    v: v\r\n                });\r\n                index = end;\r\n                continue;\r\n            }\r\n    \r\n            if ((((ch === '-') || (ch === '+')) &&\r\n                index < l1 &&\r\n                expression.charAt(index + 1) >= '0' &&\r\n                expression.charAt(index + 1) <= '9') ||\r\n                (ch >= '0' && ch <= '9')) {\r\n                end = index;\r\n                readNumber();\r\n    \r\n                tokens.push({\r\n                    t: TOKEN_VALUE,\r\n                    v: v\r\n                });\r\n    \r\n                index = end;\r\n                continue;\r\n            }\r\n    \r\n            if (ch === \"'\") {\r\n                end = index;\r\n                readString();\r\n    \r\n                tokens.push({\r\n                    t: TOKEN_VALUE,\r\n                    v: v\r\n                });\r\n                index = end;\r\n                continue;\r\n            }\r\n    \r\n            if (ch === '=') {\r\n                tokens.push({\r\n                    t: TOKEN_OPERATOR,\r\n                    v: ch\r\n                });\r\n                continue;\r\n            }\r\n    \r\n            if (ch === '(') {\r\n                openParens++;\r\n                tokens.push({\r\n                    t: TOKEN_OPERATOR,\r\n                    v: ch\r\n                });\r\n                continue;\r\n            }\r\n    \r\n            if (ch == ')') {\r\n                if (openParens <= 0)\r\n                    throw new ParseError(expression, 'unexpected parenthesis', index);\r\n    \r\n                openParens--;\r\n                tokens.push({\r\n                    t: TOKEN_OPERATOR,\r\n                    v: ch\r\n                });\r\n                continue;\r\n            }\r\n    \r\n            if (ch === '>' || ch === '<') {\r\n                if (index < l1 &&\r\n                    expression.charAt(index + 1) === '=') {\r\n                    tokens.push({\r\n                        t: TOKEN_OPERATOR,\r\n                        v: ch + '='\r\n                    });\r\n                    index++;\r\n                }\r\n                else {\r\n                    tokens.push({\r\n                        t: TOKEN_OPERATOR,\r\n                        v: ch\r\n                    });\r\n                }\r\n                continue;\r\n            }\r\n    \r\n            throw new ParseError(expression, 'unknown token', index);\r\n        }\r\n    \r\n        if (openParens > 0)\r\n            throw new ParseError(expression, 'missing parenthesis', index);\r\n    \r\n        return tokens;\r\n    }\r\n    \r\n    const operatorPrecedence = {\r\n        '=': 4,\r\n        '>': 4,\r\n        '<': 4,\r\n        '>=': 4,\r\n        '<=': 4,\r\n        '<>': 4,\r\n        '!=': 4,\r\n        'like': 4,\r\n        'not like': 4,\r\n        'in': 4,\r\n        'is null': 4,\r\n        'is not null': 4,\r\n        'not': 5,\r\n        'and': 6,\r\n        'or': 7,\r\n    }\r\n    \r\n    function shuntingYard(tokens: Token[]): Token[] {\r\n        var result: Token[] = [];\r\n        var stack: Token[] = [];\r\n        for (var token of tokens) {\r\n            if (token.t === TOKEN_OPERATOR) {\r\n                var precedence = operatorPrecedence[token.v];\r\n    \r\n                if (precedence != null) {\r\n                    while (stack.length) {\r\n                        var prev = stack[stack.length - 1];\r\n                        if (prev.t !== TOKEN_OPERATOR)\r\n                            break;\r\n                        var prevPrecedence = operatorPrecedence[prev.v];\r\n                        if (prevPrecedence == null || prevPrecedence > precedence)\r\n                            break;\r\n    \r\n                        result.push(stack.pop());\r\n                    }\r\n    \r\n                    stack.push(token);\r\n                }\r\n                else if (token.v === '(') {\r\n                    stack.push(token);\r\n                }\r\n                else if (token.v === ')') {\r\n                    while (stack.length &&\r\n                        (stack[stack.length - 1].t !== TOKEN_OPERATOR ||\r\n                            stack[stack.length - 1].v !== '(')) {\r\n                        result.push(stack.pop());\r\n                    }\r\n    \r\n                    stack.pop();\r\n                }\r\n                else\r\n                    result.push(token);\r\n            }\r\n            else\r\n                result.push(token);\r\n        }\r\n    \r\n        while (stack.length) {\r\n            var tok = stack.pop();\r\n    \r\n            if (tok.t == TOKEN_OPERATOR &&\r\n                (tok.v === '(' || tok.v === ')'))\r\n                throw \"Mismatched parentheses in permission expression!\";\r\n    \r\n            result.push(tok);\r\n        }\r\n    \r\n        return result;\r\n    }\r\n    \r\n    function rpnTokensToCriteria(rpnTokens: Token[], getParam?: (name: string) => any): any[] {\r\n        var stack: any[] = [];\r\n    \r\n        for (var token of rpnTokens) {\r\n            switch (token.t) {\r\n                case TOKEN_IDENTIFIER:\r\n                    {\r\n                        stack.push([token.v]);\r\n                        break;\r\n                    }\r\n    \r\n                case TOKEN_VALUE:\r\n                    {\r\n                        stack.push(Array.isArray(token.v) ? [token.v] : token.v);\r\n                        break;\r\n                    }\r\n\r\n                case TOKEN_PARAM:\r\n                    {\r\n                        if (!getParam)\r\n                            throw new Error(\"getParam must be passed for parameterized expressions!\");\r\n                        var prm = getParam(token.v)\r\n                        stack.push(Array.isArray(prm) ? [prm] : prm);\r\n                        break;\r\n                    }\r\n    \r\n                case TOKEN_OPERATOR:\r\n                    {\r\n                        switch (token.v as string) {\r\n                            case 'not':\r\n                            case 'is null':\r\n                            case 'is not null':\r\n                                if (!stack.length)\r\n                                    throw new Error(\"Unary operator \" + token.v + \" requires a value!\");\r\n    \r\n                                stack.push([token.v, stack.pop()]);\r\n                                break;\r\n                            default:\r\n                                if (stack.length < 2)\r\n                                    throw new Error(\"Binary operator \" + token.v + \" requires two values!\");\r\n    \r\n                                var r = stack.pop();\r\n                                var l = stack.pop();\r\n                                stack.push([l, token.v, r]);\r\n                                break;\r\n                        }\r\n                        break;\r\n                    }\r\n                default:\r\n                    throw new Error(\"Invalid operator type: \" + token.t + \"!\");\r\n            }\r\n        }\r\n    \r\n        if (stack.length != 1)\r\n            throw new Error(\"Error evaluating expression!\");\r\n    \r\n        return stack.pop();\r\n    }\r\n\r\n    function internalParse(expression: string, getParam?: (name: string) => any) {\r\n        var tokens = tokenize(expression);\r\n        var rpnTokens = shuntingYard(tokens);\r\n        return rpnTokensToCriteria(rpnTokens, getParam);\r\n    }\r\n\r\n    export function parse(expression: string, params?: any): any[];\r\n    export function parse(strings: TemplateStringsArray, ...values: any[]): any[];\r\n    export function parse(exprOrStrings: TemplateStringsArray | string, ...values: any[]): any[] {\r\n        if (!exprOrStrings?.length)\r\n            return [];\r\n\r\n        if (typeof exprOrStrings === \"string\") {\r\n            return internalParse(exprOrStrings, \r\n                values == null || values[0] == null ? null : name => values[0][name]);\r\n        }\r\n        else if (!values?.length)\r\n            return internalParse(exprOrStrings.join(''));\r\n\r\n        var expression = String.raw({ raw: exprOrStrings }, ...values.map((x, i) => '@__' + i));\r\n        return internalParse(expression, name => name?.startsWith('__') ?\r\n            values[parseInt(name.substring(2), 10)] : void 0);\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": ["any", "array", "predicate", "x", "count", "first", "indexOf", "i", "insert", "obj", "index", "item", "isArray", "single", "match", "found", "toGrouping", "items", "getKey", "lookup", "key", "d", "groupBy", "_a", "result", "group", "tryFirst", "coalesce", "a", "b", "isValue", "today", "d", "extend", "key", "deepClone", "a2", "a3", "result", "type", "value", "kv", "getRegExpFlags", "regExp", "flags", "getTypeStore", "getStateStore", "getNested", "from", "name", "i", "globalObj", "getGlobalThis", "getType", "target", "types", "getTypeNameProp", "setTypeNameProp", "getTypeFullName", "getTypeShortName", "fullName", "bIndex", "nsIndex", "getInstanceType", "instance", "ArgumentNullException", "ex", "isAssignableFrom", "isInstanceOfType", "safeCast", "cast", "InvalidCastException", "getBaseType", "p", "ownValue", "getAttributes", "attrType", "inherit", "_a", "t", "attr", "j", "MemberType", "getMembers", "memberTypes", "members", "m", "addTypeMember", "member", "md", "ensureMetadata", "existing", "merge", "getTypes", "traverse", "s", "n", "c", "clearKeys", "delegateCombine", "delegate1", "delegate2", "targets1", "targets2", "_mkdel", "fallbackStore", "store", "Enum", "enumType", "values", "parts", "delegateContains", "targets", "object", "method", "delegate", "clone", "delegateRemove", "isEnum", "initFormType", "typ", "nameWidgetPairs", "widget", "prop", "getter", "setter", "distinct", "arr", "item", "pos", "_fieldsProxy", "_", "fieldsProxy", "keyOf", "arr1", "arr2", "interfaceIsAssignableFrom", "x", "registerType", "intf", "registerClass", "registerEditor", "addAttribute", "EditorAttribute", "registerEnum", "enumKey", "registerInterface", "ISlickFormatter", "initializeTypes", "root", "pre", "limit", "k", "obj", "Exception", "message", "paramName", "endsWith", "s", "suffix", "isEmptyOrNull", "isTrimmedEmpty", "trimToNull", "padLeft", "len", "ch", "startsWith", "prefix", "toSingleLine", "str", "replaceAll", "trimToEmpty", "trimEnd", "trimStart", "trim", "f", "zeroPad", "n", "digits", "localText", "key", "t", "getTable", "text", "dbText", "prefix", "getStateStore", "prefixedText", "startsWith", "local", "tryGetText", "isEmptyOrNull", "textKey", "value", "dbTryText", "proxyTexts", "o", "p", "x", "y", "tv", "z", "k", "_LT", "obj", "pre", "table", "actual", "LT", "type", "$t1", "$t2", "member", "lt", "defaultText", "Q", "defaultNotifyOptions", "getToastrOptions", "options", "extend", "positionToastContainer", "notifyWarning", "message", "title", "notifySuccess", "notifyInfo", "notifyError", "create", "container", "dialog", "position", "Config", "pathLink", "addOption", "select", "key", "text", "addEmptyOption", "localText", "clearOptions", "findElementWithRelativeId", "element", "relativeId", "elementId", "isEmptyOrNull", "result", "idx", "esc", "escFunc", "a", "htmlEncode", "s", "attrEncode", "newBodyDiv", "outerHtml", "toIconClass", "icon", "startsWith", "uiDialogMessage", "options", "message", "dialogClass", "opt", "extend", "x", "btn", "dialogButtonToUI", "e", "_isBS3", "_isBS5Plus", "isBS3", "isBS5Plus", "resetBSVersionCheck", "defaultTxt", "txt", "k", "_a", "tryGetText", "bsModalMarkup", "title", "body", "modalClass", "closeButton", "dialogButtonToBS", "text", "htmlEncode", "iconClass", "bsModalMessage", "markup", "div", "footer", "createButton", "button", "_useBrowserDialogs", "useBrowserDialogs", "useBSModal", "Config", "messageHtml", "encode", "preWrap", "alertDialog", "_b", "_c", "useBS", "alert", "confirmDialog", "onYes", "confirm", "iframeDialog", "doc", "settings", "informationDialog", "onOk", "information", "successDialog", "success", "warningDialog", "warning", "closePanel", "element", "query", "uniqueName", "klass", "ErrorHandling", "showServiceError", "error", "msg", "alertDialog", "runtimeErrorHandler", "message", "filename", "lineno", "colno", "host", "errorInfo", "htmlEncode", "notifyError", "e", "blockUICount", "blockUIWithCheck", "opt", "blockUI", "options", "extend", "blockUndo", "getCookie", "name", "ca", "i", "xhr", "opt", "token", "serviceCall", "options", "handleError", "response", "Config", "ErrorHandling", "url", "resolveUrl", "extend", "data", "textStatus", "request", "blockUndo", "status", "ev", "l", "$t1", "json", "html", "iframeDialog", "alertDialog", "blockUI", "serviceRequest", "service", "onSuccess", "setEquality", "field", "value", "parseQueryString", "s", "qs", "result", "parts", "pair", "postToService", "form", "div", "csrfToken", "postToUrl", "k", "Invariant", "a", "b", "compareStringFactory", "order", "o", "z", "_len", "x", "y", "ix", "iy", "Culture", "k", "trimToNull", "sc", "turkishLocaleToUpper", "turkishLocaleCompare", "insertGroupSeperator", "num", "dec", "grp", "neg", "decPart", "decIndex", "negative", "startsWith", "groupSize", "index", "s", "done", "length", "startIndex", "part", "_formatRE", "_formatString", "format", "l", "values", "from", "m", "value", "type", "getInstanceType", "formatSpec", "formatIndex", "_formatObject", "prm", "localeFormat", "obj", "fmt", "formatNumber", "formatDate", "round", "n", "d", "rounding", "sign", "f", "trunc", "decOrLoc", "_a", "_b", "_c", "_d", "_e", "_f", "precision", "fs", "padLeft", "prefix", "mid", "suffix", "endPrefix", "inQuote", "i", "c", "r", "dp", "df", "roundNumber", "dv", "ds", "ones", "of", "op", "oneText", "gl", "gc", "padStart", "padLen", "pos", "pc", "parseInteger", "trim", "ts", "parseDecimal", "power", "toId", "id", "v", "_dateFormatRE", "locale", "_g", "_h", "_i", "_j", "_k", "_l", "_m", "date", "res", "parseDate", "re", "sb", "match", "formatDayHourAndMin", "days", "txt", "mins", "zeroPad", "formatISODateTimeUTC", "zeropad", "str", "secs", "isoRegexp", "parseISODateTime", "parseHourAndMin", "h", "parseDayHourAndMin", "p", "hm", "dateOrder", "datePart", "dateVal", "dArray", "splitDateString", "fullYear", "shortYearCutoff", "e", "getHash", "key", "reload", "k", "stateStore", "getStateStore", "trimToNull", "regs", "ScriptData", "setHash", "value", "getLoadedData", "name", "setLoadedData", "bindToChange", "regClass", "onChange", "e", "s", "triggerChange", "unbindFromChange", "loadOptions", "async", "_a", "resolveUrl", "text", "data", "textStatus", "jqXHR", "xhr", "errorThrown", "isLookup", "startsWith", "notifyError", "html", "iframeDialog", "alertDialog", "loadScriptAsync", "__async", "blockUI", "blockUndo", "loadScriptData", "loadScriptDataAsync", "loadError", "message", "format", "ensure", "ensureAsync", "reloadAsync", "canLoad", "setRegisteredScripts", "scripts", "t", "set", "getRemoteData", "getRemoteDataAsync", "getLookup", "getLookupAsync", "reloadLookup", "reloadLookupAsync", "getColumns", "getColumnsData", "getColumnsAsync", "getColumnsDataAsync", "getForm", "getFormData", "getFormAsync", "getFormDataAsync", "getTemplate", "getTemplateAsync", "canLoadScriptData", "exported", "Q", "i", "Authorization", "hasPermission", "permission", "ud", "p", "orParts", "r", "andParts", "fail", "n", "validatePermission", "notifyError", "localText", "getRemoteData", "debounceMock", "debounce", "func", "wait", "immediate", "timeout", "args", "context", "timestamp", "result", "later", "last", "debounced", "callNow", "mockDebounce", "f", "LayoutTimer", "timeout", "nextKey", "regCount", "regs", "startTimer", "onTimeout", "clearTimer", "key", "reg", "el", "w", "h", "e", "store", "trigger", "onSizeChange", "element", "handler", "width", "height", "onWidthChange", "onHeightChange", "onShown", "off", "executeOnceWhenVisible", "callback", "timer", "executeEverytimeWhenVisible", "callNowIfVisible", "Router", "oldURL", "resolving", "autoinc", "ignoreHash", "ignoreTime", "isEqual", "url1", "url2", "navigate", "hash", "tryBack", "silent", "newURL", "ignoreChange", "prior", "replace", "replaceLast", "current", "parts", "visibleDialogs", "a", "b", "dialogOpen", "owner", "element", "route", "isDialog", "dialog", "value", "idPrefix", "dialogs", "index", "i", "q", "id", "startsWith", "e", "prhash", "resolve", "_a", "newParts", "oldParts", "el", "same", "d", "closePanel", "routeParts", "handler", "hashChange", "o", "routerOrder", "event", "ui", "dlg", "autoFullHeight", "element", "triggerLayoutOnShow", "initFullHeightGridPage", "gridDiv", "opt", "_a", "_b", "layout", "inPageContent", "layoutFillHeight", "Router", "layoutFillHeightValue", "h", "i", "e", "q", "n", "setMobileDeviceMode", "isMobile", "initOnLoad", "globalObj", "getGlobalThis", "Config", "ns", "obj", "getNested", "initializeTypes", "executeEverytimeWhenVisible", "centerDialog", "el", "pos", "Lookup", "options", "items", "value", "k", "idField", "r", "v", "SummaryType", "registerEnum", "ColumnSelection", "RetrieveColumnSelection", "orgShowLabel", "element", "message", "htmlEncode", "value", "result", "events", "handlers", "el", "i", "o", "e", "d", "parseDate", "z", "parseHourAndMin", "parseDayHourAndMin", "parseDecimal", "parseInteger", "oldEmail", "emailRegex", "Config", "loadValidationErrorMessages", "addMsg", "m", "k", "txt", "tryGetText", "setTooltip", "val", "isBS3", "getHighlightTarget", "hl", "baseValidateOptions", "errorClass", "validClass", "elements", "error", "$el", "validateForm", "form", "opt", "extend", "addValidationRule", "eventClass", "rule", "Exception", "removeValidationRule", "oldShowLabel", "validateShowLabel", "element", "message", "i", "e", "$e", "jQueryValidationInitialization", "p", "valid", "formSubmitted", "validatorAbortHandler", "validator", "validateOptions", "options", "opt", "baseValidateOptions", "extend", "error", "field", "vx", "inner", "event", "notifyError", "localText", "x", "el", "bsPane", "bsPaneId", "$el", "hl", "getHighlightTarget", "isBS3", "label", "Criteria", "field", "builder", "C", "isEmpty", "c", "join", "c1", "op", "c2", "paren", "and", "rest", "result", "k", "or", "not", "Operator", "Builder", "fromInclusive", "toInclusive", "value", "values", "TOKEN_IDENTIFIER", "TOKEN_OPERATOR", "TOKEN_VALUE", "TOKEN_PARAM", "ParseError", "expression", "error", "position", "tokenize", "end", "v", "tokens", "l", "l1", "openParens", "index", "ch", "skipWhiteSpace", "readString", "foundDoubles", "readNumber", "foundDot", "readIdentifier", "readParam", "readArrayList", "w", "currentEnd", "operatorPrecedence", "shuntingYard", "stack", "token", "precedence", "prev", "prevPrecedence", "tok", "rpnTokensToCriteria", "rpnTokens", "getParam", "prm", "r", "internalParse", "parse", "exprOrStrings", "name", "x", "i"]
}
