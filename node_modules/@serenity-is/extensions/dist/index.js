var re=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var o=(p,r)=>re(p,"name",{value:r,configurable:!0});var l=(p,r,e,t)=>{for(var i=t>1?void 0:t?fe(r,e):r,a=p.length-1,u;a>=0;a--)(u=p[a])&&(i=(t?u(r,e,i):u(i))||i);return t&&i&&re(r,e,i),i};import{fieldsProxy as ye}from"@serenity-is/corelib/q";var g=class{};o(g,"UserPreferenceRow"),g.idProperty="UserPreferenceId",g.nameProperty="Name",g.localTextPrefix="Common.UserPreference",g.deletePermission="",g.insertPermission="",g.readPermission="",g.updatePermission="",g.Fields=ye();import{serviceRequest as ve}from"@serenity-is/corelib/q";var w;(e=>(e.baseUrl="Extensions/UserPreference",e.Methods={Update:"Extensions/UserPreference/Update",Retrieve:"Extensions/UserPreference/Retrieve"},["Update","Retrieve"].forEach(t=>{e[t]=function(i,a,u){return ve(e.baseUrl+"/"+t,i,a,u)}})))(w||(w={}));import{Decorators as xe,TemplatedDialog as be}from"@serenity-is/corelib";import{localText as Q,trimToNull as Ce}from"@serenity-is/corelib/q";var C=class extends be{constructor(){super();this.dialogTitle=Q("Site.BasicProgressDialog.PleaseWait")}get max(){return parseInt(this.byId("ProgressBar").attr("aria-valuemax"),10)}set max(e){this.byId("ProgressBar").attr("aria-valuemax",(e||100).toString())}get value(){return parseInt(this.byId("ProgressBar").attr("aria-valuenow"),10)}set value(e){this.byId("ProgressBar").attr("aria-valuenow",(e||0).toString()).css("width",(e||0)/(this.max||100)*100+"%").text(e+" / "+this.max)}get title(){return this.dialogTitle}set title(e){this.dialogTitle=e}getDialogButtons(){return[{text:Q("Dialogs.CancelButton"),class:"btn btn-danger",click:()=>{this.cancelled=!0,this.element.closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button").attr("disabled","disabled").css("opacity","0.5"),this.element.dialog("option","title",Ce(this.cancelTitle)||Q("Site.BasicProgressDialog.CancelTitle"))}}]}getDialogOptions(){var e=super.getDialogOptions();return e.width=600,e}initDialog(){super.initDialog(),this.element.closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}getTemplate(){return`<div class="s-DialogContent s-BasicProgressDialogContent">
    <div id="~_StatusText" class="status-text" ></div>
        <div id="~_Progress" class="progress" style="height: 1.5rem">
        <div id="~_ProgressBar" class="progress-bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
</div>`}};o(C,"BasicProgressDialog"),C=l([xe.registerClass("Serenity.Extensions.BasicProgressDialog")],C);import{confirmDialog as Te,format as k,notifyError as ie,notifySuccess as Se,notifyWarning as De,localText as y}from"@serenity-is/corelib/q";var J=class{createProgressDialog(){this.progressDialog=new C,this.progressDialog.dialogOpen(),this.progressDialog.max=this.keys.length,this.progressDialog.value=0}getConfirmationFormat(){return y("Site.BulkServiceAction.ConfirmationFormat")}getConfirmationMessage(r){return k(this.getConfirmationFormat(),r)}confirm(r,e){Te(this.getConfirmationMessage(r),e)}getNothingToProcessMessage(){return y("Site.BulkServiceAction.NothingToProcess")}nothingToProcess(){ie(this.getNothingToProcessMessage())}getParallelRequests(){return 1}getBatchSize(){return 1}startParallelExecution(){this.createProgressDialog(),this.successCount=0,this.errorCount=0,this.pendingRequests=0,this.completedRequests=0,this.errorCount=0,this.errorByKey={},this.queue=this.keys.slice(),this.queueIndex=0;for(var r=this.getParallelRequests();r-- >0;)this.executeNextBatch()}serviceCallCleanup(){this.pendingRequests--,this.completedRequests++;var r=y(this.progressDialog.cancelled?"Site.BasicProgressDialog.CancelTitle":"Site.BasicProgressDialog.PleaseWait");r+=" (",this.successCount>0&&(r+=k(y("Site.BulkServiceAction.SuccessCount"),this.successCount)),this.errorCount>0&&(this.successCount>0&&(r+=", "),r+=k(y("Site.BulkServiceAction.ErrorCount"),this.errorCount)),this.progressDialog.title=r+")",this.progressDialog.value=this.successCount+this.errorCount,!this.progressDialog.cancelled&&this.progressDialog.value<this.keys.length?this.executeNextBatch():this.pendingRequests===0&&(this.progressDialog.dialogClose(),this.showResults(),this.done&&(this.done(),this.done=null))}executeForBatch(r){}executeNextBatch(){for(var r=this.getBatchSize(),e=[];!(e.length>=r||this.queueIndex>=this.queue.length);)e.push(this.queue[this.queueIndex++]);e.length>0&&(this.pendingRequests++,this.executeForBatch(e))}getAllHadErrorsFormat(){return y("Site.BulkServiceAction.AllHadErrorsFormat")}showAllHadErrors(){ie(k(this.getAllHadErrorsFormat(),this.errorCount))}getSomeHadErrorsFormat(){return y("Site.BulkServiceAction.SomeHadErrorsFormat")}showSomeHadErrors(){De(k(this.getSomeHadErrorsFormat(),this.successCount,this.errorCount))}getAllSuccessFormat(){return y("Site.BulkServiceAction.AllSuccessFormat")}showAllSuccess(){Se(k(this.getAllSuccessFormat(),this.successCount))}showResults(){if(this.errorCount===0&&this.successCount===0){this.nothingToProcess();return}if(this.errorCount>0&&this.successCount===0){this.showAllHadErrors();return}if(this.errorCount>0){this.showSomeHadErrors();return}this.showAllSuccess()}execute(r){if(this.keys=r,this.keys.length===0){this.nothingToProcess();return}this.confirm(this.keys.length,()=>this.startParallelExecution())}get_successCount(){return this.successCount}set_successCount(r){this.successCount=r}get_errorCount(){return this.errorCount}set_errorCount(r){this.errorCount=r}};o(J,"BulkServiceAction");import{coalesce as se,deepClone as Re,postToService as Pe}from"@serenity-is/corelib/q";var oe;(r=>{function p(e){return{hint:se(e.hint,"Excel"),title:se(e.title,""),cssClass:"export-xlsx-button",icon:"fa-file-excel-o",onClick:function(){if(!e.onViewSubmit())return;let t=e.grid;var i=Re(t.getView().params);i.Take=0,i.Skip=0;var a=t.getView().sortBy;a&&(i.Sort=a),i.ExportColumns=[];let u=t.getGrid().getColumns();for(let s of u)i.ExportColumns.push(s.id||s.field);e.editRequest&&(i=e.editRequest(i)),Pe({service:e.service,request:i,target:"_blank"})},separator:e.separator}}r.createToolButton=p,o(p,"createToolButton")})(oe||(oe={}));import{deepClone as Ee,format as Ie,formatDate as ae,resolveUrl as ne,serviceCall as ke}from"@serenity-is/corelib/q";var le;(u=>{function p(s,d,m){return s.map(h=>{let c={dataKey:h.id||h.field,title:h.name||""};m&&m[c.dataKey]!=null&&(c.title=m[c.dataKey]);let f={};return(h.cssClass||"").indexOf("align-right")>=0?f.halign="right":(h.cssClass||"").indexOf("align-center")>=0&&(f.halign="center"),d[c.dataKey]=f,c})}o(p,"toAutoTableColumns");function r(s,d,m,h){let c=document.createElement("span"),f=0;return d.map(R=>{let n=[];for(let E=0;E<h.length;E++){var O=h[E],F=s.getFormatter(f,O),P=s.getFormatterContext(f,E);P.item=R,P.value=R[O.field];let x=F?F(P):"";!x||x.indexOf("<")<0&&x.indexOf("&")<0?n.push(x):(c.innerHTML=x,c.children.length==1&&$(c.children[0]).is("select")?n.push($(c.children[0]).children("[selected]").text()):c.children.length==1&&$(c.children[0]).is(":input")?n.push($(c.children[0]).val()):c.children.length==1&&$(c.children).is(".check-box")?n.push($(c.children).hasClass("checked")?"X":""):n.push(c.textContent||""))}return f++,n})}o(r,"toAutoTableData");function e(s){var d=s.grid;if(s.onViewSubmit()){a();var m=Ee(d.view.params);m.Take=0,m.Skip=0;var h=d.view.sortBy;h!=null&&(m.Sort=h);var c=d.slickGrid.getColumns();c=c.filter(R=>R.id!=="__select__"),m.IncludeColumns=[];for(var f of c)m.IncludeColumns.push(f.id||f.field);ke({url:d.view.url,request:m,onSuccess:R=>{let n=new jsPDF("l","pt"),O=c,F={},P=p(O,F,s.columnTitles);var E=P.map(b=>b.dataKey);let x=R.Entities||[],he=r(d.slickGrid,x,E,O);n.setFontSize(s.titleFontSize||10),n.setFont("helvetica","bold");let ge=s.reportTitle||d.getTitle()||"Report";n.autoTableText(ge,n.internal.pageSize.width/2,s.titleTop||25,{halign:"center"});var ee="{{T}}";let te=s.pageNumbers==null||s.pageNumbers;var I=$.extend({margin:{top:25,left:25,right:25,bottom:te?25:30},startY:60,styles:{fontSize:8,overflow:"linebreak",cellPadding:2,valign:"middle"},columnStyles:F},s.tableOptions),K,M;if(te&&(K=o(function(b){var z=b.pageCount;typeof n.putTotalPages=="function"&&(z=z+" / "+ee),n.autoTableText(z,n.internal.pageSize.width/2,n.internal.pageSize.height-I.margin.bottom,{halign:"center"})},"footer")),(s.printDateTimeHeader==null||s.printDateTimeHeader)&&(M=o(function(b){n.setFont("helvetica","normal"),n.setFontSize(8),n.autoTableText(ae(new Date,"dd-MM-yyyy HH:mm"),n.internal.pageSize.width-I.margin.right,13,{halign:"right"})},"header")),I.didDrawPage=b=>{M&&M(b),K&&K(b)},I.head=[P],I.body=he,n.autoTable(I),typeof n.putTotalPages=="function"&&n.putTotalPages(ee),!s.output||s.output=="file"){var U=s.fileName||s.reportTitle||"{0}_{1}.pdf";U=Ie(U,d.getTitle()||"report",ae(new Date,"yyyyMMdd_HHmm")),n.save(U);return}s.autoPrint&&n.autoPrint();var W=s.output;W=="newwindow",W="dataurlnewwindow",n.output(W)}})}}u.exportToPdf=e,o(e,"exportToPdf");function t(s){return{title:s.title||"",hint:s.hint||"PDF",cssClass:"export-pdf-button",onClick:()=>e(s),separator:s.separator}}u.createToolButton=t,o(t,"createToolButton");function i(){if(typeof jsPDF=="undefined"){var s=$("jsPDFScript");s.length>0||($("<script/>").attr("type","text/javascript").attr("id","jsPDFScript").attr("src",ne("~/Serenity.Assets/Scripts/jspdf.min.js")).appendTo(document.head),typeof jsPDF=="undefined"&&typeof jspdf!="undefined"&&(window.jsPDF=jspdf.jsPDF))}}o(i,"includeJsPDF");function a(){if(i(),!(typeof jsPDF=="undefined"||typeof jsPDF.API=="undefined"||typeof jsPDF.API.autoTable!="undefined")){var s=$("jsPDFAutoTableScript");s.length>0||$("<script/>").attr("type","text/javascript").attr("id","jsPDFAutoTableScript").attr("src",ne("~/Serenity.Assets/Scripts/jspdf.plugin.autotable.min.js")).appendTo(document.head)}}o(a,"includeAutoTable")})(le||(le={}));import{Decorators as N,EnumTypeRegistry as Oe}from"@serenity-is/corelib";import{htmlEncode as X,localText as Fe,tryGetText as we}from"@serenity-is/corelib/q";var v=class{constructor(){this.allowClear=!0}format(r){var e=Oe.get(this.enumKey),t="<select>";this.allowClear&&(t+='<option value="">',t+=X(this.emptyItemText||Fe("Controls.SelectEditor.EmptyItemText")),t+="</option>");for(var i of Object.keys(e).filter(u=>!isNaN(parseInt(u,10)))){t+='<option value="'+X(i)+'"',i==r.value&&(t+=" selected");var a=e[i];t+=">",t+=X(we("Enums."+this.enumKey+"."+a)||a),t+="</option>"}return t+="</select>",t}};o(v,"EnumSelectFormatter"),l([N.option()],v.prototype,"enumKey",2),l([N.option()],v.prototype,"allowClear",2),l([N.option()],v.prototype,"emptyItemText",2),v=l([N.registerFormatter("Serenity.Extensions.EnumSelectFormatter")],v);import{Decorators as qe}from"@serenity-is/corelib";import{htmlEncode as Be,toSingleLine as Ae}from"@serenity-is/corelib/q";var T=class{format(r){return T.formatValue(r.value)}static formatValue(r){var e=$("<div/>").html(r||"").text();return Be(Ae(e))}};o(T,"SingleLineTextFormatter"),T=l([qe.registerFormatter("Serenity.Extensions.SingleLineTextFormatter")],T);import{Decorators as Y,EntityGrid as Ve,IGetEditValue as He,ISetEditValue as je}from"@serenity-is/corelib";import{deepClone as G,indexOf as Ne,tryFirst as Ge}from"@serenity-is/corelib/q";var q=class extends Ve{constructor(e,t){super(e,t);this.nextId=1}getIdProperty(){return"__id"}id(e){return e[this.getIdProperty()]}getNextId(){return"`"+this.nextId++}setNewId(e){e[this.getIdProperty()]=this.getNextId()}save(e,t){var i=e.request,a=G(i.Entity),u=this.id(a);if(u==null&&(a[this.getIdProperty()]=this.getNextId()),!!this.validateEntity(a,u)){var s=this.view.getItems().slice();if(u==null)s.push(a);else{var d=Ne(s,m=>this.id(m)===u);s[d]=G({},s[d],a)}this.setEntities(s),t({})}}deleteEntity(e){return this.view.deleteItem(e),!0}validateEntity(e,t){return!0}setEntities(e){this.view.setItems(e,!0)}getNewEntity(){return{}}getButtons(){var e=super.getButtons(),t=Ge(e,i=>i.cssClass=="add-button");return t!=null&&(t.onClick=()=>{this.createEntityDialog(this.getItemType(),i=>{var a=i;a.onSave=(u,s)=>this.save(u,s),this.transferDialogReadOnly(a),a.loadEntityAndOpenDialog(this.getNewEntity())})}),e.filter(i=>i.cssClass!="refresh-button")}editItem(e){var t=e,i=this.view.getItemById(t);this.createEntityDialog(this.getItemType(),a=>{var u=a;u.onDelete=(s,d)=>{this.deleteEntity(t)&&d({})},this.transferDialogReadOnly(u),u.onSave=(s,d)=>this.save(s,d),u.loadEntityAndOpenDialog(i)})}getEditValue(e,t){t[e.name]=this.value}setEditValue(e,t){this.value=e[t.name]}get value(){var e=this.getIdProperty();return this.view.getItems().map(t=>{var i=G(t),a=i[e];return a&&a.toString().charAt(0)=="`"&&delete i[e],i})}set value(e){var t=this.getIdProperty();this.view.setItems((e||[]).map(i=>{var a=G(i);return a[t]==null&&(a[t]=this.getNextId()),a}),!0)}getGridCanLoad(){return!1}usePager(){return!1}getInitialTitle(){return null}createQuickSearchInput(){}};o(q,"GridEditorBase"),q=l([Y.registerClass("Serenity.Extensions.GridEditorBase",[He,je]),Y.editor(),Y.element("<div/>")],q);import{Decorators as Le,EntityDialog as _e}from"@serenity-is/corelib";var B=class extends _e{getIdProperty(){return"__id"}destroy(){this.onSave=null,this.onDelete=null,super.destroy()}updateInterface(){super.updateInterface(),this.applyChangesButton&&this.applyChangesButton.hide()}saveHandler(e,t){this.onSave&&this.onSave(e,t)}deleteHandler(e,t){this.onDelete&&this.onDelete(e,t)}};o(B,"GridEditorDialog"),B=l([Le.registerClass("Serenity.Extensions.GridEditorDialog")],B);import{Decorators as $e,PropertyGrid as Me,TemplatedDialog as Ue}from"@serenity-is/corelib";import{resolveUrl as We,serviceCall as ze}from"@serenity-is/corelib/q";import{coalesce as L,postToUrl as Ke}from"@serenity-is/corelib/q";var _;(e=>{function p(t){return{title:L(t.title,"Report"),cssClass:L(t.cssClass,"print-button"),icon:t.icon,onClick:()=>{e.execute(t)}}}e.createToolButton=p,o(p,"createToolButton");function r(t){var i=t.getParams?t.getParams():t.params;Ke({url:"~/Serenity.Extensions/Report/"+(t.download?"Download":"Render"),params:{key:t.reportKey,ext:L(t.extension,"pdf"),opt:i?$.toJSON(i):""},target:L(t.target,"_blank")})}e.execute=r,o(r,"execute")})(_||(_={}));var S=class extends Ue{constructor(e){super(e);this.updateInterface(),this.loadReport(this.options.reportKey)}getDialogButtons(){return null}createPropertyGrid(){this.propertyGrid&&this.byId("PropertyGrid").html("").attr("class",""),this.propertyGrid=new Me(this.byId("PropertyGrid"),{idPrefix:this.idPrefix,useCategories:!0,items:this.report.Properties}).init(null)}loadReport(e){ze({url:We("~/Serenity.Extensions/Report/Retrieve"),request:{ReportKey:e},onSuccess:t=>{this.report=t,this.dialogTitle=this.report.Title,this.createPropertyGrid(),this.propertyGrid.load(this.report.InitialSettings||{}),this.updateInterface(),this.dialogOpen()}})}updateInterface(){this.toolbar.findButton("print-preview-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("run-button").toggle(this.report&&this.report.IsExternalReport),this.toolbar.findButton("export-pdf-button").toggle(this.report&&!this.report.IsDataOnlyReport&&!this.report.IsExternalReport),this.toolbar.findButton("export-xlsx-button").toggle(this.report&&this.report.IsDataOnlyReport&&!this.report.IsExternalReport)}executeReport(e,t,i){if(this.validateForm()){var a={};this.propertyGrid.save(a),_.execute({download:i,reportKey:this.report.ReportKey,extension:t,target:e,params:a})}}getToolbarButtons(){return[{title:"Preview",cssClass:"print-preview-button",onClick:()=>this.executeReport("_blank",null,!1)},{title:"Run",cssClass:"run-button",icon:"fa-print text-blue",onClick:()=>this.executeReport("_blank",null,!1)},{title:"PDF",cssClass:"export-pdf-button",onClick:()=>this.executeReport("_blank","pdf",!0)},{title:"Excel",cssClass:"export-xlsx-button",onClick:()=>this.executeReport("_blank","xlsx",!0)}]}getTemplate(){return`<div class="s-DialogContent">
<div id="~_Toolbar" class="s-DialogToolbar">
</div>
<div class="s-Form">
    <form id="~_Form" action="">
        <div class="fieldset ui-widget ui-widget-content ui-corner-all">
            <div id="~_PropertyGrid"></div>
            <div class="clear"></div>
        </div>
    </form>
</div>
</div>`}};o(S,"ReportDialog"),S=l([$e.registerClass("Serenity.Extensions.ReportDialog")],S);import{Decorators as Qe,QuickSearchInput as Je,Widget as Xe}from"@serenity-is/corelib";import{coalesce as Ye,trimToNull as Ze}from"@serenity-is/corelib/q";var A=class extends Xe{constructor(r){super(r),$(".report-link",r).click(e=>this.reportLinkClick(e)),new Je($(".s-QuickSearchBar input",r),{onSearch:(e,t,i)=>{this.updateMatchFlags(t),i(!0)}})}updateMatchFlags(r){var e=$(".report-list",this.element).find("li").removeClass("non-match");if(r=Ze(r),!!r){r=Select2.util.stripDiacritics(r).toUpperCase();var t=e.filter(".report-item");t.each(function(s,d){var m=$(d),h=Select2.util.stripDiacritics(Ye(m.text(),"").toUpperCase());h.indexOf(r)<0&&m.addClass("non-match")});var i=t.not(".non-match"),a=i.parents("li").add(i);a.children("[data-bs-toggle]:not([aria-expanded=true])").attr("aria-expanded","true").removeClass("collapsed"),a.parent(".collapse:not(.show)").addClass("show");var u=e.not(a);u.addClass("non-match")}}reportLinkClick(r){r.preventDefault(),new S({reportKey:$(r.target).data("key")}).dialogOpen()}};o(A,"ReportPage"),A=l([Qe.registerClass("Serenity.Extensions.ReportPage")],A);var Z=class{getItem(r){let e;return w.Retrieve({PreferenceType:"UserPreferenceStorage",Name:r},t=>e=t.Value,{async:!1}),e}setItem(r,e){w.Update({PreferenceType:"UserPreferenceStorage",Name:r,Value:e})}};o(Z,"UserPreferenceStorage");import{TemplatedDialog as et,WX as tt}from"@serenity-is/corelib";import{confirmDialog as rt,localText as it}from"@serenity-is/corelib/q";var ue;(r=>{function p(e,t){e.on("dialogbeforeclose panelbeforeclose",function(i){!tt.hasOriginalEvent(i)||!t()||(i.preventDefault(),rt(it("Site.Dialogs.PendingChangesConfirmation"),()=>e.find("div.save-and-close-button").click(),{onNo:function(){e.hasClass("ui-dialog-content")?e.dialog("close"):e.hasClass("s-Panel")&&et.closePanel(e)}}))})}r.pendingChangesConfirmation=p,o(p,"pendingChangesConfirmation")})(ue||(ue={}));import{Decorators as st,PropertyDialog as ot}from"@serenity-is/corelib";import{coalesce as at,isEmptyOrNull as pe,localText as ce}from"@serenity-is/corelib/q";var D=class extends ot{constructor(r){if(super(r),pe(this.options.cssClass)||this.element.addClass(this.options.cssClass),!pe(this.options.message)){var e=$("<div/>").addClass("message").insertBefore(this.byId("PropertyGrid"));this.options.isHtml?e.html(this.options.message):e.text(this.options.message)}this.dialogTitle=this.options.title||"Prompt"}getDialogButtons(){return[{text:ce("Dialogs.OkButton"),click:()=>{this.validateForm()&&(this.options.validateValue==null||this.options.validateValue(this.value))&&this.dialogClose()}},{text:ce("Dialogs.CancelButton"),click:()=>this.dialogClose()}]}loadInitialEntity(){this.value=this.options.value}getPropertyItems(){return[{name:"Value",editorType:this.options.editorType||"String",required:at(this.options.required,!0),editorParams:this.options.editorOptions}]}get value(){return this.getSaveEntity().Value}set value(r){this.propertyGrid.load({Value:r})}static prompt(r,e,t,i){new D({title:r,message:e,value:t,validateValue:a=>i(a)}).dialogOpen()}};o(D,"PromptDialog"),D=l([st.registerClass("Serenity.Extensions.PromptDialog")],D);import{Decorators as nt,EntityGrid as lt}from"@serenity-is/corelib";var V=class extends lt{getSlickOptions(){var r=super.getSlickOptions();return r.enableTextSelectionOnCells=!0,r.selectedCellCssClass="slick-row-selected",r.enableCellNavigation=!0,r}createSlickGrid(){var r=super.createSlickGrid();return r.setSelectionModel(new Slick.RowSelectionModel),r}};o(V,"SelectableEntityGrid"),V=l([nt.registerClass("Serenity.Extensions.SelectableEntityGrid")],V);import{CascadedWidgetLink as ut,Decorators as pt,EditorUtils as ct,Select2AjaxEditor as dt,Widget as mt}from"@serenity-is/corelib";import{ColumnSelection as ht,isEmptyOrNull as gt,RetrieveColumnSelection as ft,serviceCall as yt}from"@serenity-is/corelib/q";var H=class extends dt{constructor(e,t){super(e,t);this.setCascadeFrom(this.options.cascadeFrom)}setCascadeFrom(e){if(gt(e)){this.cascadeLink&&(this.cascadeLink.set_parentID(null),this.cascadeLink=null),this.options.cascadeFrom=null;return}this.cascadeLink=new ut(mt,this,t=>this.cascadeValue=this.getCascadeFromValue(t)),this.cascadeLink.set_parentID(e),this.options.cascadeFrom=e}get cascadeValue(){return this.options.cascadeValue}set cascadeValue(e){e!==this.options.cascadeValue&&(this.options.cascadeValue=e,this.value=null)}get cascadeField(){return this.options.cascadeField||this.options.cascadeFrom}set cascadeField(e){this.options.cascadeField=e}get cascadeFrom(){return this.options.cascadeFrom}set cascadeFrom(e){e!==this.options.cascadeFrom&&this.setCascadeFrom(e)}getCascadeFromValue(e){return ct.getValue(e)}getIncludeColumns(){return[]}getSort(){return[]}getTypeDelay(){return 200}executeQueryByKey(e){var t=e.request;t.ColumnSelection=ft.keyOnly,t.IncludeColumns=this.getIncludeColumns(),super.executeQueryByKey(e)}executeQuery(e){var t=e.request;t.ColumnSelection=ht.KeyOnly,t.IncludeColumns=this.getIncludeColumns(),t.Sort=this.getSort(),t.ExcludeTotalCount=!0,this.cascadeField&&(t.EqualityFilter=t.EqualityFilter||{},t.EqualityFilter[this.cascadeField]=this.cascadeValue),e.blockUI=!1,e.error=()=>{},this.lastRequest!=null&&this.lastRequest.readyState!=XMLHttpRequest.DONE&&this.lastRequest.abort(),this.lastRequest=yt(e),this.lastRequest.then(()=>this.lastRequest=null,()=>this.lastRequest=null)}};o(H,"ServiceEditorBase"),H=l([pt.registerClass("Serenity.Extensions.ServiceEditorBase")],H);import{Decorators as de,ISetEditValue as vt,Widget as xt}from"@serenity-is/corelib";import{coalesce as me,localText as bt}from"@serenity-is/corelib/q";var j=class extends xt{constructor(e,t){super(e,t);this.options.hideLabel&&this.element.closest(".field").find(".caption").hide(),this.updateElementContent()}updateElementContent(){var e=me(this.options.text,this.value);this.options.isLocalText&&(e=bt(e)),this.options.isHtml?this.element.html(e):this.element.text(e)}setEditValue(e,t){this.options.text==null&&(this.value=me(this.options.text,e[t.name]),this.updateElementContent())}};o(j,"StaticTextBlock"),j=l([de.element("<div/>"),de.registerEditor("Serenity.Extensions.StaticTextBlock",[vt])],j);export{C as BasicProgressDialog,J as BulkServiceAction,ue as DialogUtils,v as EnumSelectFormatter,oe as ExcelExportHelper,q as GridEditorBase,B as GridEditorDialog,le as PdfExportHelper,D as PromptDialog,S as ReportDialog,_ as ReportHelper,A as ReportPage,V as SelectableEntityGrid,H as ServiceEditorBase,T as SingleLineTextFormatter,j as StaticTextBlock,g as UserPreferenceRow,w as UserPreferenceService,Z as UserPreferenceStorage};
//# sourceMappingURL=index.js.map
